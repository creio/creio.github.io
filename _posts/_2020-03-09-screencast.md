---
layout: post
title: Как я записываю и монтирую видео
description:
image: /uploads/screencast.png
tags: screencast
comments: false
---

Хочу поделиться своим опытом по записи видео (screencast).

## Запись рабочего стола

Рабочий стол записываю утилитой simplescreenrecorder, частота кадров: 30.

Звук пишу отдельно, поэтому снимаем галочку.

Профиль YouTube, контейнер: mkv, кодек: H.264, constant rate: 23, preset: superfast.

## Запись аудио потока

Раньше я писал через наушники с микрофоном, которые подключены к компу, но качество звука плохое. И мне как-то на это было пофиг.

Теперь решил исправить эту ситуацию и пишу аудио через гарнитуру на телефонный диктофон, качество намного лучше, но и телодвижений больше.

Далее переношу файл на комп, в audacity убираю шумы, увеличиваю громкость.

При необходимости увеличиваю скорость. Эффекты - Изменение темпа.

## Конвертирование

Перегоняю в mp4: разрешение 1920x1080, кадров 30(fps), bit rate audio 320k.

```sh
ffmpeg -i Videos/arch.mkv -b:a 320k -r 30 -s 1920x1080 Videos/out.mp4
```
## Изменение скорости

Видео ffmpeg, если нужно убрать аудио: `-an`. Это соответственно самый длительный процесс и ресурсный, поэтому можно пойти погулять.

- Ускорение на 30%: `ffmpeg -i arch.mkv -vf "setpts=0.7*PTS" -r 30 -s 1920x1080 speed.mp4`
- Ускорение в 2 раза: `ffmpeg -i arch.mkv -vf "setpts=0.5*PTS" -r 30 -s 1920x1080 speed.mp4`
- Ускорение в 3 раза: `ffmpeg -i arch.mkv -vf "setpts=1/3*PTS" -r 30 -s 1920x1080 speed.mp4`
- Ускорение в 5 раз: `ffmpeg -i arch.mkv -vf "setpts=1/5*PTS" -r 30 -s 1920x1080 speed.mp4`
- Замедление в 5 раз: `ffmpeg -i arch.mkv -vf "setpts=1*5*PTS" -r 30 -s 1920x1080 out.mp4`

Комплексное ускорение видео/аудио примерно на 20%. `atempo=1/setpts`.

```sh
ffmpeg -i arch.mkv -filter_complex "[0:v]setpts=0.8*PTS[v];[0:a]atempo=1.25[a]" -map "[v]" -map "[a]" -b:a 320k -r 30 -s 1920x1080 speed.mp4
```

## Сводка video/mp3

Свожу всё это в avidemux, процесс очень быстрый. В сравнении, если бы я это всё делал в видео редакторе.

На вкладку Аудио, выбрать дорожку. Тут можно выбрать несколько дорожек, или заменить исходную. Вкладка копировать, выбираем mp3.

Так как с видео у меня расхождение я подгоняю сдвиг в разделе аудио на выходе, 1000мс - 1с, параметр может принимать минусовое значение(-).

Бум и видео каст готов в кратчайшие сроки, всё это дело уже можно лить на трубу-Youtube.

Вот такие пироги, возможно у вас есть свои более лучшие наработки, напишите в комментариях.
