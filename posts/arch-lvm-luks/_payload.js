export default (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av){return {data:{"content-/posts/arch-lvm-luks":{_path:"\u002Fposts\u002Farch-lvm-luks",_dir:"posts",_draft:D,_partial:D,_locale:m,_empty:D,title:"Установка Arch Linux на зашифрованный раздел, LVM на LUKS",description:P,date:"2020-03-23T00:00:00.000Z",type:"post",tags:["archlinux","crypt"],body:{type:E,children:[{type:a,tag:l,props:{},children:[{type:b,value:P}]},{type:a,tag:k,props:{code:"loadkeys ru\nsetfont cyr-sun16\ntimedatectl set-ntp true\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"loadkeys"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"ru"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"setfont"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"cyr-sun16"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:S}]}]}]}]}]},{type:a,tag:F,props:{id:T},children:[{type:b,value:U}]},{type:a,tag:l,props:{},children:[{type:b,value:"Создаем таблицу на диске MBR(DOS) и 2 первичных раздела."}]},{type:a,tag:"ul",props:{},children:[{type:a,tag:V,props:{},children:[{type:b,value:"LUKS под root, swap, home"}]},{type:a,tag:V,props:{},children:[{type:b,value:"boot 512M, выставляем флаг boot"}]}]},{type:a,tag:k,props:{code:"cfdisk\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"cfdisk"}]}]}]}]}]},{type:a,tag:l,props:{},children:[{type:b,value:"Шифруем, открываем раздел. Создаем контейнер."}]},{type:a,tag:k,props:{code:"# подтверждаем YES\ncryptsetup -y luksFormat --type luks2 \u002Fdev\u002Fsda1\ncryptsetup open \u002Fdev\u002Fsda1 cryptlvm\n\npvcreate \u002Fdev\u002Fmapper\u002Fcryptlvm\nvgcreate lvarch \u002Fdev\u002Fmapper\u002Fcryptlvm\n\nls -l \u002Fdev\u002Fmapper\u002Fcryptlvm\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:r},children:[{type:b,value:"# подтверждаем YES"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"-y"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"luksFormat"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"--type"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"luks2"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:u}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"open"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:W}]}]},{type:a,tag:g,props:{class:h},children:[]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"pvcreate"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:G}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"vgcreate"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:G}]}]},{type:a,tag:g,props:{class:h},children:[]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"ls"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:G}]}]}]}]}]},{type:a,tag:l,props:{},children:[{type:b,value:"Создаём разделы lvm."}]},{type:a,tag:k,props:{code:"lvcreate -L 4G -n swap lvarch\nlvcreate -L 25G -n root lvarch\nlvcreate -l 100%FREE -n home lvarch\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"4G"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:X}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:w}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"25G"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:w}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"100"}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"%FREE"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:Y}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:w}]}]}]}]}]},{type:a,tag:l,props:{},children:[{type:b,value:"Форматируем и включаем swap."}]},{type:a,tag:k,props:{code:"mkfs.ext2 -L boot \u002Fdev\u002Fsda2\nmkfs.ext4 -L root \u002Fdev\u002Flvarch\u002Froot\nmkfs.ext4 -L home \u002Fdev\u002Flvarch\u002Fhome\nmkswap -L swap \u002Fdev\u002Flvarch\u002Fswap\nswapon \u002Fdev\u002Flvarch\u002Fswap\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"mkfs.ext2"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"boot"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:Z}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:_}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:$}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:_}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:Y}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:aa}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"mkswap"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:X}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:ab}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"swapon"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:ab}]}]}]}]}]},{type:a,tag:l,props:{},children:[{type:b,value:"Монтируем и создаем директории."}]},{type:a,tag:k,props:{code:"mount \u002Fdev\u002Flvarch\u002Froot \u002Fmnt\nmkdir \u002Fmnt\u002F{home,boot}\nmount \u002Fdev\u002Flvarch\u002Fhome \u002Fmnt\u002Fhome\nmount \u002Fdev\u002Fsda2 \u002Fmnt\u002Fboot\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:J}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:$}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:x}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"mkdir"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\u002Fmnt\u002F{home,boot}"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:J}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:aa}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\u002Fmnt\u002Fhome"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:J}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:Z}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\u002Fmnt\u002Fboot"}]}]}]}]}]},{type:a,tag:F,props:{id:ac},children:[{type:b,value:ad}]},{type:a,tag:l,props:{},children:[{type:b,value:"Установка базовой системы и необходимых пакетов."}]},{type:a,tag:k,props:{code:"pacstrap \u002Fmnt base base-devel linux linux-headers linux-firmware lvm2 nano networkmanager bash-completion reflector htop openssh curl wget git rsync unzip unrar p7zip gnu-netcat pv\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"pacstrap"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:x}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"base"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"base-devel"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:ae}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"linux-headers"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"linux-firmware"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"lvm2"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:K}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"networkmanager"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"bash-completion"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:af}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"htop"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"openssh"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"curl"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"wget"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"git"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"rsync"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"unzip"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"unrar"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"p7zip"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"gnu-netcat"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"pv"}]}]}]}]}]},{type:a,tag:l,props:{},children:[{type:b,value:"Генерируем и правим, если нужно fstab, выполняем chroot."}]},{type:a,tag:k,props:{code:"genfstab -pU \u002Fmnt \u003E\u003E \u002Fmnt\u002Fetc\u002Ffstab\ncat \u002Fmnt\u002Fetc\u002Ffstab\n\narch-chroot \u002Fmnt\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"genfstab"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"-pU"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:x}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:ag}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"cat"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:ag}]}]},{type:a,tag:g,props:{class:h},children:[]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"arch-chroot"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:x}]}]}]}]}]},{type:a,tag:l,props:{},children:[{type:b,value:"Включаем multilib и сортируем зеркала."}]},{type:a,tag:k,props:{code:"sed -i \"\u002F[multilib]\u002F,\u002FInclude\u002F\"'s\u002F^#\u002F\u002F' \u002Fetc\u002Fpacman.conf\n\nreflector -c \"Russia\" -c \"Belarus\" -c \"Ukraine\" -c \"Poland\" -f 20 -l 20 -p https -p http -n 20 --save \u002Fetc\u002Fpacman.d\u002Fmirrorlist --sort rate\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"sed"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"-i"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\"\u002F[multilib]\u002F,\u002FInclude\u002F\"'s\u002F^#\u002F\u002F'"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\u002Fetc\u002Fpacman.conf"}]}]},{type:a,tag:g,props:{class:h},children:[]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:af}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:z}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\"Russia\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:z}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\"Belarus\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:z}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\"Ukraine\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:z}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\"Poland\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"-f"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:L}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:L}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"https"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"http"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:L}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"--save"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\u002Fetc\u002Fpacman.d\u002Fmirrorlist"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"--sort"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"rate"}]}]}]}]}]},{type:a,tag:l,props:{},children:[{type:b,value:"Пароль root."}]},{type:a,tag:k,props:{code:"passwd\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:ah}]}]}]}]}]},{type:a,tag:l,props:{},children:[{type:b,value:"Создаем пользователя st в нужных группах, назначаем пароль и включаем sudo."}]},{type:a,tag:k,props:{code:"useradd -m -g users -G \"adm,audio,log,network,rfkill,scanner,storage,optical,power,wheel\" -s \u002Fbin\u002Fbash -c \"Alex Creio\" st\n\npasswd st\n\necho \"%wheel ALL=(ALL) ALL\" \u003E\u003E \u002Fetc\u002Fsudoers\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"useradd"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"-m"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"-g"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"users"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"-G"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\"adm,audio,log,network,rfkill,scanner,storage,optical,power,wheel\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"-s"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\u002Fbin\u002Fbash"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:z}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\"Alex Creio\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:ai}]}]},{type:a,tag:g,props:{class:h},children:[]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:ah}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:ai}]}]},{type:a,tag:g,props:{class:h},children:[]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\"%wheel ALL=(ALL) ALL\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\u002Fetc\u002Fsudoers"}]}]}]}]}]},{type:a,tag:l,props:{},children:[{type:b,value:"Назначаем hostname: имя машины и часовой пояс, время."}]},{type:a,tag:k,props:{code:"echo \"ctlos\" \u003E \u002Fetc\u002Fhostname\nln -svf \u002Fusr\u002Fshare\u002Fzoneinfo\u002FEurope\u002FMoscow \u002Fetc\u002Flocaltime\ntimedatectl set-ntp true\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\"ctlos\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\u002Fetc\u002Fhostname"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"ln"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"-svf"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\u002Fusr\u002Fshare\u002Fzoneinfo\u002FEurope\u002FMoscow"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\u002Fetc\u002Flocaltime"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:S}]}]}]}]}]},{type:a,tag:l,props:{},children:[{type:b,value:"Генерируем локали и включаем русский язык системы."}]},{type:a,tag:k,props:{code:"echo \"en_US.UTF-8 UTF-8\" \u003E \u002Fetc\u002Flocale.gen\necho \"ru_RU.UTF-8 UTF-8\" \u003E\u003E \u002Fetc\u002Flocale.gen\nlocale-gen\necho \"LANG=ru_RU.UTF-8\" \u003E \u002Fetc\u002Flocale.conf\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\"en_US.UTF-8 UTF-8\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:aj}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\"ru_RU.UTF-8 UTF-8\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:aj}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"locale-gen"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\"LANG=ru_RU.UTF-8\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\u002Fetc\u002Flocale.conf"}]}]}]}]}]},{type:a,tag:l,props:{},children:[{type:b,value:"Добавляем поддержку ru в консоле."}]},{type:a,tag:k,props:{code:"echo \"KEYMAP=ru\" \u003E\u003E \u002Fetc\u002Fvconsole.conf\necho \"FONT=cyr-sun16\" \u003E\u003E \u002Fetc\u002Fvconsole.conf\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\"KEYMAP=ru\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:ak}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\"FONT=cyr-sun16\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:ak}]}]}]}]}]},{type:a,tag:l,props:{},children:[{type:b,value:"Добавляем хуки (порядок важен) и создаем загрузочный образ."}]},{type:a,tag:k,props:{code:"### добавить keyboard keymap encrypt lvm2\n# HOOKS=(base udev autodetect keyboard keymap modconf block encrypt lvm2 filesystems fsck)\nnano \u002Fetc\u002Fmkinitcpio.conf\n\nmkinitcpio -p linux\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:r},children:[{type:b,value:"### добавить keyboard keymap encrypt lvm2"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:r},children:[{type:b,value:"# HOOKS=(base udev autodetect keyboard keymap modconf block encrypt lvm2 filesystems fsck)"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:K}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\u002Fetc\u002Fmkinitcpio.conf"}]}]},{type:a,tag:g,props:{class:h},children:[]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"mkinitcpio"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:ae}]}]}]}]}]},{type:a,tag:l,props:{},children:[{type:b,value:"Устанавливаем Grub."}]},{type:a,tag:k,props:{code:"pacman -S --noconfirm --needed grub\ngrub-install \u002Fdev\u002Fsda\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"pacman"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"-S"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"--noconfirm"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"--needed"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"grub"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"grub-install"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\u002Fdev\u002Fsda"}]}]}]}]}]},{type:a,tag:l,props:{},children:[{type:b,value:"Настраиваем и конфигурируем grub."}]},{type:a,tag:k,props:{code:"## узнаём UUID\nblkid \u002Fdev\u002Fsda1\n# \u002Fdev\u002Fsda1: UUID=\"c0868972-f314-48e1-9be5-3584826dbd64\" TYPE=\"crypto_LUKS\" PARTUUID=\"bbb93e39-01\"\n\nnano \u002Fetc\u002Fdefault\u002Fgrub\n\n## Прописываем команду для старта и включаем.\nGRUB_CMDLINE_LINUX=\"cryptdevice=UUID=c0868972-f314-48e1-9be5-3584826dbd64:cryptlvm root=\u002Fdev\u002Flvarch\u002Froot\"\nGRUB_ENABLE_CRYPTODISK=y\n\n## конфигурируем\ngrub-mkconfig -o \u002Fboot\u002Fgrub\u002Fgrub.cfg\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:r},children:[{type:b,value:"## узнаём UUID"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"blkid"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:u}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:r},children:[{type:b,value:"# \u002Fdev\u002Fsda1: UUID=\"c0868972-f314-48e1-9be5-3584826dbd64\" TYPE=\"crypto_LUKS\" PARTUUID=\"bbb93e39-01\""}]}]},{type:a,tag:g,props:{class:h},children:[]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:K}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\u002Fetc\u002Fdefault\u002Fgrub"}]}]},{type:a,tag:g,props:{class:h},children:[]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:r},children:[{type:b,value:"## Прописываем команду для старта и включаем."}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"GRUB_CMDLINE_LINUX"}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:al}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\"cryptdevice=UUID=c0868972-f314-48e1-9be5-3584826dbd64:cryptlvm root=\u002Fdev\u002Flvarch\u002Froot\""}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"GRUB_ENABLE_CRYPTODISK"}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:al}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"y"}]}]},{type:a,tag:g,props:{class:h},children:[]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:r},children:[{type:b,value:"## конфигурируем"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"grub-mkconfig"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"-o"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\u002Fboot\u002Fgrub\u002Fgrub.cfg"}]}]}]}]}]},{type:a,tag:l,props:{},children:[{type:b,value:"Включаем необходимые сервисы."}]},{type:a,tag:k,props:{code:"systemctl enable NetworkManager\nsystemctl enable sshd\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:am}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:an}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"NetworkManager"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:am}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:an}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"sshd"}]}]}]}]}]},{type:a,tag:l,props:{},children:[{type:b,value:"Выходим из chroot, отмонтируем разделы и закроем контейнер."}]},{type:a,tag:k,props:{code:"exit\numount -Rf \u002Fmnt\nvgchange -a n lvarch\ncryptsetup close cryptlvm\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:"exit"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"umount"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"-Rf"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:x}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"vgchange"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"-a"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"n"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:w}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"close"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:W}]}]}]}]}]},{type:a,tag:F,props:{id:ao},children:[{type:b,value:ap}]},{type:a,tag:l,props:{},children:[{type:b,value:"Просмотр информации."}]},{type:a,tag:k,props:{code:"cryptsetup luksDump \u002Fdev\u002Fsda1\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"luksDump"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:u}]}]}]}]}]},{type:a,tag:"blockquote",props:{},children:[{type:a,tag:l,props:{},children:[{type:b,value:"Обязательно создайте backup заголовка."}]}]},{type:a,tag:k,props:{code:"cryptsetup luksHeaderBackup \u002Fdev\u002Fsda1 --header-backup-file luksheader.bac\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"luksHeaderBackup"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aq}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:A}]}]}]}]}]},{type:a,tag:l,props:{},children:[{type:b,value:"Шифруем."}]},{type:a,tag:k,props:{code:"openssl enc -aes-256-cbc -salt -in luksheader.bac -out luksheader.bac.enc\nrm luksheader.bac\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:ar}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:as}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:at}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"-salt"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:au}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:av}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:O}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"rm"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:A}]}]}]}]}]},{type:a,tag:l,props:{},children:[{type:b,value:"Расшифровываем."}]},{type:a,tag:k,props:{code:"openssl enc -d -aes-256-cbc -in luksheader.bac.enc -out luksheader.bac\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:ar}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:as}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"-d"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:at}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:au}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:O}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:av}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:A}]}]}]}]}]},{type:a,tag:l,props:{},children:[{type:b,value:"Восстанавливаем, подтверждаем: YES."}]},{type:a,tag:k,props:{code:"cryptsetup luksHeaderRestore --header-backup-file luksheader.bac \u002Fdev\u002Fsda1\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:k,props:{__ignoreMap:m},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"luksHeaderRestore"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aq}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:u}]}]}]}]}]},{type:a,tag:l,props:{},children:[{type:b,value:"Сохраняем в надёжное место "},{type:a,tag:"code-inline",props:{},children:[{type:b,value:O}]},{type:b,value:", например на usb."}]},{type:a,tag:l,props:{},children:[{type:a,tag:"a",props:{href:"https:\u002F\u002Fwww.youtube.com\u002Fwatch?v=sGIrre2OVt4&t=238s",rel:["nofollow"]},children:[{type:b,value:"Стеганографируем и в публичный доступ (video)"}]}]},{type:a,tag:l,props:{},children:[{type:b,value:"Profit!"}]},{type:a,tag:"style",children:[{type:b,value:".ct-c9ac18{color:#FF7B72}\n.ct-1ec738{color:#8B949E}\n.ct-b493fe{color:#79C0FF}\n.ct-dc8aa1{color:#A5D6FF}\n.ct-0f52ca{color:#C9D1D9}\n.ct-70d52e{color:#FFA657}"}]}],toc:{title:m,searchDepth:B,depth:B,links:[{id:T,depth:B,text:U},{id:ac,depth:B,text:ad},{id:ao,depth:B,text:ap}]}},_type:"markdown",_id:"content:posts:arch-lvm-luks.md",_source:"content",_file:"posts\u002Farch-lvm-luks.md",_extension:"md"}},prerenderedAt:1681411568101}}("element","text","span","ct-0f52ca"," ","ct-dc8aa1","div","line","ct-b493fe","ct-70d52e","code","p","","bash",null,"pre","ct-c9ac18","ct-1ec738","echo","cryptsetup","\u002Fdev\u002Fsda1","-L","lvarch","\u002Fmnt","\u003E\u003E","-c","luksheader.bac",2,"-n",false,"root","h2","\u002Fdev\u002Fmapper\u002Fcryptlvm","-l","lvcreate","mount","nano","20","-p","\u003E","luksheader.bac.enc","Грузимся из под live-usb, устанавливаем ru язык и время.","timedatectl","set-ntp","true","подготовка-к-установке","Подготовка к установке","li","cryptlvm","swap","home","\u002Fdev\u002Fsda2","mkfs.ext4","\u002Fdev\u002Flvarch\u002Froot","\u002Fdev\u002Flvarch\u002Fhome","\u002Fdev\u002Flvarch\u002Fswap","установка-и-настройка","Установка и настройка","linux","reflector","\u002Fmnt\u002Fetc\u002Ffstab","passwd","st","\u002Fetc\u002Flocale.gen","\u002Fetc\u002Fvconsole.conf","=","systemctl","enable","резервное-копирование-luksheader","Резервное копирование luksHeader","--header-backup-file","openssl","enc","-aes-256-cbc","-in","-out"))