export default (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$){return {data:{"content-/posts/fluxbb-discourse":{_path:"\u002Fposts\u002Ffluxbb-discourse",_dir:"posts",_draft:E,_partial:E,_locale:l,_empty:E,title:"Перенос форума fluxbb на discourse",description:l,date:"2021-06-19T00:00:00.000Z",type:"post",tags:["dev",s],body:{type:I,children:[{type:a,tag:F,props:{id:J},children:[{type:b,value:K}]},{type:a,tag:m,props:{},children:[{type:b,value:"Для переноса нужно получить базу данных форума fluxbb, наверняка вы знаете как это сделать, но если нет, то вот. Данные для подключение к базе, которые вы создавали, или то, что предоставил хостер, при создании."}]},{type:a,tag:"ul",props:{},children:[{type:a,tag:x,props:{},children:[{type:b,value:"host_ip - ip или домен mysql."}]},{type:a,tag:x,props:{},children:[{type:b,value:"user_db - имя пользователя базы"}]},{type:a,tag:x,props:{},children:[{type:b,value:"PASS_WORD_DB - пароль к базе"}]},{type:a,tag:x,props:{},children:[{type:b,value:"db_name - имя базы"}]}]},{type:a,tag:j,props:{code:"# получение через ssh\nssh creio@125.120.10.54 \"mysqldump -h host_ip -u user_db -pPASS_WORD_DB db_name\" \u003E ~\u002Fforum.sql\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:j,props:{__ignoreMap:l},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:r},children:[{type:b,value:"# получение через ssh"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:"ssh"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"creio@125.120.10.54"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\"mysqldump -h host_ip -u user_db -pPASS_WORD_DB db_name\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"\u003E"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:L}]}]}]}]}]},{type:a,tag:F,props:{id:M},children:[{type:b,value:N}]},{type:a,tag:m,props:{},children:[{type:b,value:"Копируем mysql дамп базы в докер контейнер и логинемся в него."}]},{type:a,tag:j,props:{code:"docker cp ~\u002Fforum.sql app:\u002Fvar\u002Fwww\u002Fdiscourse\n\n# docker exec -it app \u002Fbin\u002Fbash --login\nsudo .\u002Flauncher enter app\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:j,props:{__ignoreMap:l},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"cp"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:L}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"app:\u002Fvar\u002Fwww\u002Fdiscourse"}]}]},{type:a,tag:g,props:{class:h},children:[]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:r},children:[{type:b,value:"# docker exec -it app \u002Fbin\u002Fbash --login"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:G}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:".\u002Flauncher"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"enter"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:O}]}]}]}]}]},{type:a,tag:m,props:{},children:[{type:b,value:"Установка mysql и запуск."}]},{type:a,tag:j,props:{code:"apt install -y mariadb-server mariadb-client libmariadb-dev\nservice mysql start\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:j,props:{__ignoreMap:l},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:"apt"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"-y"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"mariadb-server"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"mariadb-client"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"libmariadb-dev"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:"service"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"start"}]}]}]}]}]},{type:a,tag:m,props:{},children:[{type:b,value:"Создаем mysql базу, в которую выгрузим старые данные."}]},{type:a,tag:j,props:{code:"mysql -u root -p mysql\nmysql\u003E CREATE USER 'fluxbb'@'localhost' IDENTIFIED BY 'fluxbb';\nmysql\u003E CREATE DATABASE fluxbb;\nmysql\u003E GRANT ALL PRIVILEGES ON fluxbb.* TO 'fluxbb'@'localhost';\nmysql\u003E FLUSH PRIVILEGES;\nmysql\u003E exit\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:j,props:{__ignoreMap:l},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:y}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:S}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"USER"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:T}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"IDENTIFIED"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"BY"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"'fluxbb'"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:z}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:S}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"DATABASE"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:z}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"GRANT"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"ALL"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"ON"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"fluxbb."}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"TO"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:T}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:z}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"FLUSH"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:z}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"exit"}]}]}]}]}]},{type:a,tag:m,props:{},children:[{type:b,value:"Логинимся под юзера discourse."}]},{type:a,tag:j,props:{code:"su discourse\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:j,props:{__ignoreMap:l},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:W}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"discourse"}]}]}]}]}]},{type:a,tag:m,props:{},children:[{type:b,value:"Экспортируем базу данных fluxbb."}]},{type:a,tag:j,props:{code:"mysql -u fluxbb -p fluxbb \u003C forum.sql\n# pass\nfluxbb\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:j,props:{__ignoreMap:l},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"\u003C"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"forum.sql"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:r},children:[{type:b,value:"# pass"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:s}]}]}]}]}]},{type:a,tag:m,props:{},children:[{type:b,value:"Добавляем зависимости в Gemfile."}]},{type:a,tag:j,props:{code:"echo \"gem 'mysql2'\" \u003E\u003E Gemfile\necho \"gem 'redcarpet'\" \u003E\u003E Gemfile\necho \"gem 'ruby-bbcode-to-md', git: 'https:\u002F\u002Fgithub.com\u002Fnlalonde\u002Fruby-bbcode-to-md'\" \u003E\u003E Gemfile\necho \"gem 'reverse_markdown'\" \u003E\u003E Gemfile\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:j,props:{__ignoreMap:l},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\"gem 'mysql2'\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:C}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\"gem 'redcarpet'\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:C}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\"gem 'ruby-bbcode-to-md', git: 'https:\u002F\u002Fgithub.com\u002Fnlalonde\u002Fruby-bbcode-to-md'\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:C}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\"gem 'reverse_markdown'\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:C}]}]}]}]}]},{type:a,tag:m,props:{},children:[{type:b,value:"Установка зависимостей для корректной конвертации."}]},{type:a,tag:j,props:{code:"bundle config unset deployment\nbundle install --no-deployment --path vendor\u002Fbundle --jobs 4 --without test development\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:j,props:{__ignoreMap:l},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:X}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"config"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"unset"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"deployment"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:X}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"--no-deployment"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"--path"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"vendor\u002Fbundle"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"--jobs"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"4"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"--without"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"test"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"development"}]}]}]}]}]},{type:a,tag:m,props:{},children:[{type:b,value:"Данные для подключение к mysql, возможно у вас нет FLUXBB_PREFIX в базе и будет ошибка, попробуйте убрать это значение."}]},{type:a,tag:j,props:{code:"FLUXBB_HOST=\"localhost\" FLUXBB_DB=\"fluxbb\" FLUXBB_USER=\"fluxbb\" FLUXBB_PW=\"fluxbb\" FLUXBB_PREFIX=\"bb_\" bundle exec ruby script\u002Fimport_scripts\u002Ffluxbb.rb\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:j,props:{__ignoreMap:l},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"FLUXBB_HOST"}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\"localhost\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" FLUXBB_DB"}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" FLUXBB_USER"}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" FLUXBB_PW"}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" FLUXBB_PREFIX"}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\"bb_\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" bundle exec ruby script\u002Fimport_scripts\u002Ffluxbb.rb"}]}]}]}]}]},{type:a,tag:m,props:{},children:[{type:b,value:"Изменение домена, полезно выполнить на тестовом домене, а когда все готово изменить на основной."}]},{type:a,tag:m,props:{},children:[{type:a,tag:"a",props:{href:"https:\u002F\u002Fmeta.discourse.org\u002Ft\u002Fchange-the-domain-name-or-rename-my-discourse\u002F16098",rel:["nofollow"]},children:[{type:b,value:"\u002Ft\u002Fchange-the-domain-name-or-rename-my-discourse\u002F16098"}]}]},{type:a,tag:F,props:{id:Y},children:[{type:b,value:Z}]},{type:a,tag:m,props:{},children:[{type:b,value:"Первым делом стоит обновить сам сервер(ubuntu\u002Fdebian)."}]},{type:a,tag:j,props:{code:"apt-get update\napt-get dist-upgrade\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:j,props:{__ignoreMap:l},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"update"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"dist-upgrade"}]}]}]}]}]},{type:a,tag:m,props:{},children:[{type:b,value:"Включить автообновления(не обязательно) и не везде это возможно, для убунту."}]},{type:a,tag:j,props:{code:"sudo dpkg-reconfigure -plow unattended-upgrades\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:j,props:{__ignoreMap:l},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:G}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"dpkg-reconfigure"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"-plow"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"unattended-upgrades"}]}]}]}]}]},{type:a,tag:m,props:{},children:[{type:b,value:"Discourse работает в докере и используются скрипты для упрощения."}]},{type:a,tag:j,props:{code:"sudo su\ncd \u002Fvar\u002Fdiscourse\ngit pull\n.\u002Flauncher rebuild app\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:j,props:{__ignoreMap:l},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:G}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:W}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:"cd"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\u002Fvar\u002Fdiscourse"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:"git"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"pull"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:_}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:$}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"rebuild"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:O}]}]}]}]}]},{type:a,tag:m,props:{},children:[{type:b,value:"После обновления и запусков rebuild будут плодится контейнеры и images, которые забивают диск, но не используются."}]},{type:a,tag:j,props:{code:"# размер диска\ndf -h \u002F\n# размеры директорий\ndu -sh \u002Fvar\u002Flib\u002F*\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:j,props:{__ignoreMap:l},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:r},children:[{type:b,value:"# размер диска"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:"df"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"-h"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\u002F"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:r},children:[{type:b,value:"# размеры директорий"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:"du"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"-sh"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"\u002Fvar\u002Flib\u002F"}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:V}]}]}]}]}]},{type:a,tag:m,props:{},children:[{type:b,value:"Удалить не нужные образы можно через docker, или через скрипт, имейте ввиду скрипт снесет все остановленные контейнеры и удалит все неиспользуемые образы. Дело в том, что если у вас работает, что-то еще кроме discourse в докере, то лучше работать именно самим docker-ом и удалять по id(7281bf55ce46)."}]},{type:a,tag:j,props:{code:"# листинг контейнеров\ndocker ps -a\n# удаление контейнеров(CONTAINER ID)\ndocker rm 8ee579ceabf7\n\n# листинг образов\ndocker images\n# удаление образов(IMAGE ID)\ndocker rmi 7281bf55ce46\n\n# удаление всего скриптом\n.\u002Flauncher cleanup\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:j,props:{__ignoreMap:l},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:r},children:[{type:b,value:"# листинг контейнеров"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"ps"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"-a"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:r},children:[{type:b,value:"# удаление контейнеров(CONTAINER ID)"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"rm"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"8ee579ceabf7"}]}]},{type:a,tag:g,props:{class:h},children:[]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:r},children:[{type:b,value:"# листинг образов"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"images"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:r},children:[{type:b,value:"# удаление образов(IMAGE ID)"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"rmi"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"7281bf55ce46"}]}]},{type:a,tag:g,props:{class:h},children:[]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:r},children:[{type:b,value:"# удаление всего скриптом"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:_}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:$}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"cleanup"}]}]}]}]}]},{type:a,tag:m,props:{},children:[{type:b,value:"Очистка системы apt."}]},{type:a,tag:j,props:{code:"apt-get autoclean\napt-get autoremove\n",language:n,meta:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:j,props:{__ignoreMap:l},children:[{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"autoclean"}]}]},{type:a,tag:g,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:f},children:[{type:b,value:"autoremove"}]}]}]}]}]},{type:a,tag:"style",children:[{type:b,value:".ct-a45bcc{color:#79C0FF}\n.ct-69f312{color:#FF7B72}\n.ct-ae2443{color:#A5D6FF}\n.ct-b75db4{color:#C9D1D9}\n.ct-abb72b{color:#FFA657}\n.ct-4e0b0b{color:#8B949E}"}]}],toc:{title:l,searchDepth:w,depth:w,links:[{id:J,depth:w,text:K},{id:M,depth:w,text:N},{id:Y,depth:w,text:Z}]}},_type:"markdown",_id:"content:posts:fluxbb-discourse.md",_source:"content",_file:"posts\u002Ffluxbb-discourse.md",_extension:"md"}},prerenderedAt:1681411567290}}("element","text","span","ct-b75db4"," ","ct-ae2443","div","line","ct-abb72b","code","ct-a45bcc","","p","bash",null,"pre","ct-69f312","ct-4e0b0b","fluxbb","docker","mysql\u003E","=",2,"li","mysql",";","echo","\u003E\u003E","Gemfile","apt-get",false,"h2","sudo","\"fluxbb\"","root","перенос-mysql","Перенос mysql","~\u002Fforum.sql","login-в-docker","Login в docker","app","install","-u","-p","CREATE","'fluxbb'@'localhost'","PRIVILEGES","*","su","bundle","обновление-discourse","Обновление discourse",".","\u002Flauncher"))