export default (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr){return {data:{posts:[{_path:"\u002Fposts\u002Fnginx-onion",_dir:aF,_draft:U,_partial:U,_locale:r,_empty:U,title:"Доступность веб сервера в tor и создание onion домена | Nginx tor onion",description:aG,date:"2021-09-13T00:00:00.000Z",type:aH,tags:["dev",aI],body:{type:P,children:[{type:a,tag:o,props:{},children:[{type:b,value:aG}]},{type:a,tag:Y,props:{},children:[{type:a,tag:N,props:{},children:[{type:a,tag:A,props:{href:"https:\u002F\u002Fwww.youtube.com\u002Fwatch?v=1ioGn-2JaiM",rel:[C]},children:[{type:b,value:aJ}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Все действия выполняются на Arch Linux, но суть везде одинакова, разница только в пакетном менеджере."}]},{type:a,tag:Y,props:{},children:[{type:a,tag:N,props:{},children:[{type:a,tag:A,props:{href:"https:\u002F\u002Fwww.cloudflare.com\u002F",rel:[C]},children:[{type:b,value:"www.cloudflare.com\u002F"}]}]}]},{type:a,tag:O,props:{id:aK},children:[{type:b,value:aL}]},{type:a,tag:o,props:{},children:[{type:b,value:"Локально нужен только tor или tor браузер для доступа к будущему сервису, я буду использовать chromium с прокси портом тора 9050."}]},{type:a,tag:m,props:{code:"yay -S tor chromium\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:aM}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:ae}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:af}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"chromium"}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"На сервере нужен tor и nginx."}]},{type:a,tag:m,props:{code:"yay -S tor nginx\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:aM}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:ae}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:af}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:F}]}]}]}]}]},{type:a,tag:O,props:{id:aN},children:[{type:b,value:aO}]},{type:a,tag:o,props:{},children:[{type:b,value:"Отредактировать конфиг на сервере \u002Fetc\u002Ftor\u002Ftorrc, раскомментировать 2 строки."}]},{type:a,tag:m,props:{code:"sudo nano \u002Fetc\u002Ftor\u002Ftorrc\n\nHiddenServiceDir \u002Fvar\u002Flib\u002Ftor\u002Fhidden_service\u002F\nHiddenServicePort 80 127.0.0.1:80\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:Z}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"\u002Fetc\u002Ftor\u002Ftorrc"}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"HiddenServiceDir"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:an}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"HiddenServicePort"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"127.0.0.1:"}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:Q}]}]}]}]}]},{type:a,tag:O,props:{id:aP},children:[{type:b,value:aQ}]},{type:a,tag:_,props:{},children:[{type:a,tag:o,props:{},children:[{type:b,value:"Генерировать не обязательно, по умолчанию tor сам создает нужные файлы в hidden_service при рестарте, но их можно удалить и создать имя с кастомным началом в hostname. Чем длиннее имя, тем дольше генерация."}]}]},{type:a,tag:Y,props:{},children:[{type:a,tag:N,props:{},children:[{type:a,tag:A,props:{href:aR,rel:[C]},children:[{type:b,value:"github.com\u002Fcathugger\u002Fmkp224o"}]}]}]},{type:a,tag:m,props:{code:"git clone https:\u002F\u002Fgithub.com\u002Fcathugger\u002Fmkp224o\ncd mkp224o\n.\u002Fautogen.sh\n.\u002Fconfigure\nmake\n# -t 2  потоки cpu, -n кол-во имен, имя topor\n.\u002Fmkp224o filter topor -t 2 -v -n 1 -d ~\u002Fhs-keys\n#\nscp -r ~\u002Fhs-keys user@123.123.123.123:~\u002F\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"git"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"clone"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:aR}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:x},children:[{type:b,value:"cd"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"mkp224o"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:x},children:[{type:b,value:K}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:"\u002Fautogen.sh"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:x},children:[{type:b,value:K}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:"\u002Fconfigure"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"make"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:L},children:[{type:b,value:"# -t 2  потоки cpu, -n кол-во имен, имя topor"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:x},children:[{type:b,value:K}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:"\u002Fmkp224o"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"filter"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"topor"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:ao}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:"2"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:$}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:"-n"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:aS}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:ap}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:aT}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:L},children:[{type:b,value:"#"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"scp"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:aU}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:aT}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"user@123.123.123.123:~\u002F"}]}]}]}]}]},{type:a,tag:_,props:{},children:[{type:a,tag:o,props:{},children:[{type:b,value:"Рекомендую сохранить ключи и hostname."}]}]},{type:a,tag:O,props:{id:aV},children:[{type:b,value:aW}]},{type:a,tag:o,props:{},children:[{type:b,value:"На сервере после переноса файлов."}]},{type:a,tag:m,props:{code:"ssh user@123.123.123.123\nsudo cp -r ~\u002Fhs-keys\u002F*\u002F* \u002Fvar\u002Flib\u002Ftor\u002Fhidden_service\u002F\nsudo chmod 700 \u002Fvar\u002Flib\u002Ftor\u002Fhidden_service\nsudo chown -R tor:tor \u002Fvar\u002Flib\u002Ftor\u002Fhidden_service\u002F\nsudo systemctl restart tor\nsudo systemctl status tor\nsudo cat \u002Fvar\u002Flib\u002Ftor\u002Fhidden_service\u002Fhostname\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"ssh"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"user@123.123.123.123"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"cp"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:aU}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"~\u002Fhs-keys\u002F"}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:aq}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:aq}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:an}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"chmod"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:"700"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"\u002Fvar\u002Flib\u002Ftor\u002Fhidden_service"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"chown"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:"-R"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"tor:tor"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:an}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:aa}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:af}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:ar}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:af}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:as}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"\u002Fvar\u002Flib\u002Ftor\u002Fhidden_service\u002Fhostname"}]}]}]}]}]},{type:a,tag:O,props:{id:aX},children:[{type:b,value:aY}]},{type:a,tag:_,props:{},children:[{type:a,tag:o,props:{},children:[{type:b,value:"Важный момент, onion работает по http поэтому не нужно использовать редиректы на 443 порт https "},{type:a,tag:A,props:{href:aZ},children:[{type:b,value:"О первоначальной настройке nginx смотри тут"}]},{type:b,value:K}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Дефолтный конфиг "},{type:a,tag:D,props:{},children:[{type:b,value:a_}]},{type:b,value:", можно в секцию server добавить созданный onion домен и он будет выдавать содержимое по умолчанию из "},{type:a,tag:D,props:{},children:[{type:b,value:at}]},{type:b,value:", в данном случае "},{type:a,tag:D,props:{},children:[{type:b,value:"index.hmtl"}]},{type:b,value:K}]},{type:a,tag:m,props:{code:"# вырезка \u002Fetc\u002Fnginx\u002Fnginx.conf\nserver {\n        listen 80 default_server;\n        listen [::]:80 default_server;\n        server_name ctlos5lhe2vc3giixr.onion;\n\n        root \u002Fusr\u002Fshare\u002Fnginx\u002Fhtml;\n        index index.htm index.html;\n...\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:L},children:[{type:b,value:"# вырезка \u002Fetc\u002Fnginx\u002Fnginx.conf"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:E}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:G}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:ag}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:G}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:a$}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:ag}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:ah}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:at}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:au}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:av}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:aw}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:x},children:[{type:b,value:"..."}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Простой конфиг, Nginx выводит содержимое директории."}]},{type:a,tag:m,props:{code:"sudo nano \u002Fetc\u002Fnginx\u002Fsites-available\u002Fonion.conf\nsudo ln -s \u002Fetc\u002Fnginx\u002Fsites-available\u002Fonion.conf \u002Fetc\u002Fnginx\u002Fsites-enabled\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:Z}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:ba}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:bb}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:bc}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:ba}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:bd}]}]}]}]}]},{type:a,tag:m,props:{code:"server {\n  # директория со статикой сайта\n  server_name ctlos5lhe2vc3giixr.onion;\n  root \u002Fhome\u002Fcretm\u002Fapp\u002Fcloud.ctlos.ru;\n  listen 80;\n  listen [::]:80;\n\n  location \u002F {\n    autoindex on;\n    try_files $uri $uri\u002F =404;\n  }\n}\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:E}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:L},children:[{type:b,value:"# директория со статикой сайта"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:ah}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:be}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:G}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:G}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ax}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:W}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:E}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:ai}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:X}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:ay}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:az}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:aj}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:ak}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:aA}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:S}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Проверка и рестарт web сервера."}]},{type:a,tag:m,props:{code:"sudo nginx -t\nsudo systemctl restart nginx\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:ao}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:aa}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:F}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Конфиг с 2 доменами и ssl. С указанием Onion-Location, добавляет фиолетовый знак в тор браузере, сайт обязательно должен иметь ssl на основном домене."}]},{type:a,tag:m,props:{code:"sudo nano \u002Fetc\u002Fnginx\u002Fsites-enabled\u002Fonion.conf\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:Z}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"\u002Fetc\u002Fnginx\u002Fsites-enabled\u002Fonion.conf"}]}]}]}]}]},{type:a,tag:m,props:{code:"server {\n  server_name dev.ctlos.ru;\n  server_name ctlos5lhe2vc3giixr.onion;\n  root \u002Fhome\u002Fcretm\u002Fapp\u002Fcloud.ctlos.ru;\n\n  listen 80;\n  listen [::]:80;\n\n  listen 443 ssl; # managed by Certbot\n  ssl_certificate \u002Fetc\u002Fletsencrypt\u002Flive\u002Fdev.ctlos.ru\u002Ffullchain.pem; # managed by Certbot\n  ssl_certificate_key \u002Fetc\u002Fletsencrypt\u002Flive\u002Fdev.ctlos.ru\u002Fprivkey.pem; # managed by Certbot\n  include \u002Fetc\u002Fletsencrypt\u002Foptions-ssl-nginx.conf; # managed by Certbot\n  ssl_dhparam \u002Fetc\u002Fletsencrypt\u002Fssl-dhparams.pem; # managed by Certbot\n\n  location \u002F {\n    autoindex on;\n    try_files $uri $uri\u002F =404;\n    add_header Onion-Location \"http:\u002F\u002Fctlos5lhe2vc3giixr.onion$request_uri\" always;\n  }\n}\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:E}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"dev.ctlos.ru"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:ah}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:be}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:G}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:G}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ax}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:G}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:"443"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"ssl"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ab}]},{type:a,tag:c,props:{class:L},children:[{type:b,value:ac}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:"ssl_certificate"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"\u002Fetc\u002Fletsencrypt\u002Flive\u002Fdev.ctlos.ru\u002Ffullchain.pem"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ab}]},{type:a,tag:c,props:{class:L},children:[{type:b,value:ac}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:"ssl_certificate_key"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"\u002Fetc\u002Fletsencrypt\u002Flive\u002Fdev.ctlos.ru\u002Fprivkey.pem"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ab}]},{type:a,tag:c,props:{class:L},children:[{type:b,value:ac}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:aB}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"\u002Fetc\u002Fletsencrypt\u002Foptions-ssl-nginx.conf"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ab}]},{type:a,tag:c,props:{class:L},children:[{type:b,value:ac}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:"ssl_dhparam"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"\u002Fetc\u002Fletsencrypt\u002Fssl-dhparams.pem"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ab}]},{type:a,tag:c,props:{class:L},children:[{type:b,value:ac}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:W}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:E}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:ai}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:X}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:ay}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:az}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:aj}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:ak}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:bf}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:bg}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:bh}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bi}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:bj}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:bk}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:aA}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:S}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Реверс прокси nginx. Пример направления домена на порт 5000 на котором работает не важно какой веб сервис, в данном случае Whoogle."}]},{type:a,tag:m,props:{code:"server {\n  server_name ctlos5lhe2vc3giixr.onion;\n  # reverse proxy\n  location \u002F {\n    proxy_pass http:\u002F\u002Flocalhost:5000;  # Whoogle\n    proxy_redirect off;\n    add_header Onion-Location \"http:\u002F\u002Fctlos5lhe2vc3giixr.onion$request_uri\" always;\n\n    proxy_set_header Host $http_host;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header X-Forwarded-Proto $scheme;\n    proxy_set_header Proxy \"Cloud-LB\";\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_pass_header Server;\n\n    proxy_buffering off;\n    proxy_http_version 1.1;\n    tcp_nodelay on;\n  }\n}\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:E}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:ah}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:L},children:[{type:b,value:bl}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:W}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:E}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:bm}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:"http:\u002F\u002Flocalhost:"}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:"5000"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:";  "}]},{type:a,tag:c,props:{class:L},children:[{type:b,value:"# Whoogle"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:bn}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:T}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:bf}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:bg}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:bh}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bi}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:bj}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:bk}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:bo}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bp}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:bq}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:br}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:bs}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bt}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:bu}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bv}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:bw}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:bx}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:by}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bz}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:bA}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:bB}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:bC}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:T}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:bD}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:bE}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:bF}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:j},children:[{type:b,value:X}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:aA}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:S}]}]}]}]}]},{type:a,tag:Y,props:{},children:[{type:a,tag:N,props:{},children:[{type:a,tag:A,props:{href:"https:\u002F\u002Fctlos.github.io\u002Fdonat\u002F",rel:[C]},children:[{type:b,value:"Поблагодарить меня можно тут"}]}]},{type:a,tag:N,props:{},children:[{type:b,value:"Вопросы и предложения можно оставить в чате "},{type:a,tag:A,props:{href:"https:\u002F\u002Ftelegram.me\u002Fctlos",rel:[C]},children:[{type:b,value:"@ctlos"}]}]}]},{type:a,tag:bG,children:[{type:b,value:".ct-c8bd26{color:#8B949E}\n.ct-ad963d{color:#A5D6FF}\n.ct-2cbc07{color:#79C0FF}\n.ct-45bc0f{color:#C9D1D9}\n.ct-bdf449{color:#FFA657}"}]}],toc:{title:r,searchDepth:J,depth:J,links:[{id:aK,depth:J,text:aL},{id:aN,depth:J,text:aO},{id:aP,depth:J,text:aQ},{id:aV,depth:J,text:aW},{id:aX,depth:J,text:aY}]}},_type:bH,_id:"content:posts:nginx-onion.md",_source:bI,_file:"posts\u002Fnginx-onion.md",_extension:bJ},{_path:aZ,_dir:aF,_draft:U,_partial:U,_locale:r,_empty:U,title:"Настройка и использование Nginx в Arch Linux | Docker Portainer",description:bK,date:"2021-04-05T00:00:00.000Z",type:aH,tags:["vpn",H,aI],body:{type:P,children:[{type:a,tag:o,props:{},children:[{type:b,value:bK}]},{type:a,tag:o,props:{},children:[{type:a,tag:A,props:{href:"https:\u002F\u002Fwww.youtube.com\u002Fwatch?v=IFjzUpTjsC4",rel:[C]},children:[{type:b,value:aJ}]}]},{type:a,tag:O,props:{id:bL},children:[{type:b,value:bM}]},{type:a,tag:o,props:{},children:[{type:b,value:"Для установки на Arch."}]},{type:a,tag:m,props:{code:"sudo pacman -S nginx\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bN}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:ae}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:F}]}]}]}]}]},{type:a,tag:Y,props:{},children:[{type:a,tag:N,props:{},children:[{type:a,tag:A,props:{href:"http:\u002F\u002Fnginx.org\u002Fru\u002Fdocs\u002Fbeginners_guide.html",rel:[C]},children:[{type:b,value:"Nginx docs"}]}]},{type:a,tag:N,props:{},children:[{type:a,tag:A,props:{href:"https:\u002F\u002Fwiki.archlinux.org\u002Findex.php\u002FNginx",rel:[C]},children:[{type:b,value:"ArchWiki Nginx"}]}]},{type:a,tag:N,props:{},children:[{type:a,tag:A,props:{href:"https:\u002F\u002Fwiki.archlinux.org\u002Ftitle\u002FCertbot",rel:[C]},children:[{type:b,value:"Certbot"}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Глобальный конфиг, при обращении по ip, nginx будет отдавать стандартную страницу, по пути "},{type:a,tag:D,props:{},children:[{type:b,value:"\u002Fusr\u002Fshare\u002Fnginx\u002Fhtml\u002Findex.html"}]},{type:b,value:", некоторые настройки и импорты других конфигураций include, user - указываю юзера creio, от которого я работаю и из его директории в дальнейшем буду импортировать статичный сайт "},{type:a,tag:D,props:{},children:[{type:b,value:bO}]},{type:b,value:", который сгенерирован jekyll, точнее это не его домашняя директория, но права на нее принадлежат ему."}]},{type:a,tag:m,props:{code:"sudo nano \u002Fetc\u002Fnginx\u002Fnginx.conf\n\nuser creio users;\nworker_processes  1;\n#error_log  logs\u002Ferror.log;\n#error_log  logs\u002Ferror.log  notice;\n#error_log  logs\u002Ferror.log  info;\n#pid        logs\u002Fnginx.pid;\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    include       mime.types;\n    default_type  application\u002Foctet-stream;\n    #access_log  logs\u002Faccess.log  main;\n    types_hash_max_size 4096;\n    server_names_hash_bucket_size 128;\n    sendfile        on;\n    #tcp_nopush     on;\n    keepalive_timeout  65;\n    gzip  on;\n\n    server {\n        listen 80 default_server;\n        listen [::]:80 default_server;\n\n        root \u002Fusr\u002Fshare\u002Fnginx\u002Fhtml;\n        index index.htm index.html;\n\n        server_tokens off;\n        autoindex off;\n    }\n\n    include sites-enabled\u002F*;\n}\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:Z}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:a_}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:"user"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"creio"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"users"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:"worker_processes"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:aS}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:z},children:[{type:b,value:"#error_log  logs\u002Ferror.log;"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:z},children:[{type:b,value:"#error_log  logs\u002Ferror.log  notice;"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:z},children:[{type:b,value:"#error_log  logs\u002Ferror.log  info;"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:z},children:[{type:b,value:"#pid        logs\u002Fnginx.pid;"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:"events"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:E}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"worker_connections"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"1024"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:S}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:"http"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:E}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:aB}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"       "}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"mime.types"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"default_type"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"application\u002Foctet-stream"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:z},children:[{type:b,value:"#access_log  logs\u002Faccess.log  main;"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"types_hash_max_size"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"4096"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"server_names_hash_bucket_size"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"128"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"sendfile"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:X}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:z},children:[{type:b,value:"#tcp_nopush     on;"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"keepalive_timeout"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"65"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"gzip"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:X}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:E}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:G}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ag}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:G}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:a$}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ag}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:at}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:au}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:av}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aw}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"server_tokens"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:T}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:ai}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:T}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:ad}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:aB}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"sites-enabled\u002F"}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:aq}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:S}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Создаем 2 директории в "},{type:a,tag:D,props:{},children:[{type:b,value:"available"}]},{type:b,value:" будем складывать все конфиги сайтов, а в "},{type:a,tag:D,props:{},children:[{type:b,value:"enabled"}]},{type:b,value:" будем создавать сим линки "},{type:a,tag:D,props:{},children:[{type:b,value:"ln -s"}]},{type:b,value:" на то, что хотим включить, если нужно выключить, то просто удаляем конфиг(симлинк) из enabled. Файлы в этих директориях, как зеркала, не важно откуда мы их будем править."}]},{type:a,tag:m,props:{code:"sudo mkdir \u002Fetc\u002Fnginx\u002Fsites-{available,enabled}\nsudo nano \u002Fetc\u002Fnginx\u002Fsites-available\u002Fhome.conf\nsudo ln -s \u002Fetc\u002Fnginx\u002Fsites-available\u002Fhome.conf \u002Fetc\u002Fnginx\u002Fsites-enabled\n# если нужно удалить и не забудь перезапустить nginx\nsudo rm \u002Fetc\u002Fnginx\u002Fsites-enabled\u002Fhome.conf\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"mkdir"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"\u002Fetc\u002Fnginx\u002Fsites-{available,enabled}"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:Z}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bP}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bb}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:bc}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bP}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bd}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:z},children:[{type:b,value:"# если нужно удалить и не забудь перезапустить nginx"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:al}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"\u002Fetc\u002Fnginx\u002Fsites-enabled\u002Fhome.conf"}]}]}]}]}]},{type:a,tag:bQ,props:{id:bR},children:[{type:b,value:bS}]},{type:a,tag:o,props:{},children:[{type:b,value:"Проверить конфигурацию на валидность."}]},{type:a,tag:m,props:{code:"sudo nginx -t\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:ao}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Запуск сервера, рестарт, стоп, средствами systemd."}]},{type:a,tag:m,props:{code:"sudo systemctl start nginx\n\nsudo systemctl restart nginx\n\nsudo systemctl stop nginx\n\nsudo systemctl status nginx\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:am}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:F}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aa}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:F}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bT}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:F}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ar}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:F}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Добавить в авто старт и убрать, если нужно."}]},{type:a,tag:m,props:{code:"sudo systemctl enable nginx\n\nsudo systemctl disable nginx\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bU}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:F}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"disable"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:F}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Просмотр логов в зависимости, что указали в access_log и error_log."}]},{type:a,tag:m,props:{code:"cat \u002Fvar\u002Flog\u002Fnginx\u002Fhome.access\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:as}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aC}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Я использую "},{type:a,tag:D,props:{},children:[{type:b,value:"server_name домен"}]},{type:b,value:", но можно манипулировать портами, если нет доменного имени, или воспользоваться freedns, no-ip и подобные. В конфиге ниже нет привязки к домену, а именно к порту, можно использовать и то и другое, как вместе, так и отдельно. В данном случае в браузере мы должны обратится "},{type:a,tag:D,props:{},children:[{type:b,value:"ip:port ip:4000"}]},{type:b,value:". Команда ip a покажет ip, обычно это 127.0.0.1(localhost), можно и так "},{type:a,tag:D,props:{},children:[{type:b,value:"localhost:4000"}]},{type:b,value:", "},{type:a,tag:A,props:{href:"https:\u002F\u002Fwww.duckdns.org\u002F",rel:[C]},children:[{type:b,value:"www.duckdns.org\u002F"}]},{type:b,value:K}]},{type:a,tag:m,props:{code:"# cat \u002Fetc\u002Fnginx\u002Fsites-available\u002Fhome.conf\nserver {\n  listen 4000;\n  listen [::]:4000;\n  # server_name creio.duckdns.org;\n\n  root \u002Fmedia\u002Ffiles\u002Fgithub\u002Fctlos\u002Fctlos.github.io\u002F_site;\n  index index.html index.htm index.php;\n\n  access_log \u002Fvar\u002Flog\u002Fnginx\u002Fhome.access;\n  error_log \u002Fvar\u002Flog\u002Fnginx\u002Fhome.error;\n\n  location \u002F {\n      autoindex off;\n      try_files $uri $uri\u002F =404;\n    }\n\n    error_page 404 \u002F404.html;\n    location = \u002F404.html {\n        internal;\n    }\n\n    if ($request_uri = \u002Findex.html) {\n        return 301 \u002F;\n    }\n}\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:z},children:[{type:b,value:"# cat \u002Fetc\u002Fnginx\u002Fsites-available\u002Fhome.conf"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:E}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:G}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:aD}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:G}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" [::]:4000;"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:z},children:[{type:b,value:"# server_name creio.duckdns.org;"}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bO}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:au}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aw}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:av}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"index.php"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bV}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aC}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bW}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bX}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:W}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:E}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bY}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:ai}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:T}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bY}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:ay}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:az}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aj}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:ak}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:ad}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"error_page"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:ak}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bZ}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:W}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aj}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bZ}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:E}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"internal"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:ad}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:b_},children:[{type:b,value:"if"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" ($request_uri = \u002Findex.html) {"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:b_},children:[{type:b,value:"return"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"301"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:ad}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:S}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Пример запуска jekyll, по умолчанию он стартует на localhost "},{type:a,tag:D,props:{},children:[{type:b,value:"127.0.0.1"}]},{type:b,value:", порт 4000, но через vpn доступа к нему вы не получите, решение указать хост "},{type:a,tag:D,props:{},children:[{type:b,value:"-H 0.0.0.0"}]},{type:b,value:". В этом случае нам локально не нужен запущенный nginx, а сразу же настраиваем реверс на сервере. Jekyll используется для примера, тут может быть любое приложение на любом порту."}]},{type:a,tag:m,props:{code:"bundle exec jekyll serve -H 0.0.0.0\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:"bundle"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"exec"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"jekyll"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"serve"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"-H"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"0.0.0.0"}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Команду можно повесить в авто запуск."}]},{type:a,tag:O,props:{id:b$},children:[{type:b,value:ca}]},{type:a,tag:o,props:{},children:[{type:b,value:"Конфиг проброса (reverse proxy) локалки на сервер через vpn(wireguard), о его настройке я писал "},{type:a,tag:A,props:{href:"\u002Fposts\u002Fvpn"},children:[{type:b,value:"тут"}]},{type:b,value:K}]},{type:a,tag:m,props:{code:"curl ident.me\n\nsudo systemctl start wg-quick@wg0\n\nip a\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:cb}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"ident.me"}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:am}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"wg-quick@wg0"}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:"ip"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:A}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Важный момент, если вы хотите иметь доступ к работающим докерам в локальной сети из вне, через vpn, находясь за nat с динамическим ip, обязательно используйте host сеть(0.0.0.0) --network host. При создании конфигурации в portainer, выбирайте сеть host для контейнера, или при ручном запуске контейнера указывайте(--network host). Просмотр сведений о сети. "},{type:a,tag:A,props:{href:"https:\u002F\u002Fstackoverflow.com\u002Fq\u002F32103885",rel:[C]},children:[{type:b,value:"stackoverflow.com\u002Fq\u002F32103885"}]},{type:b,value:K}]},{type:a,tag:m,props:{code:"# iproute2\nss -tulpn\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:z},children:[{type:b,value:"# iproute2"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:"ss"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"-tulpn"}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Приложение работает и теперь можно настроить реверс прокси на сервере впн к этому порту, конфиг почти такой же как и в примере выше, только убираем путь root."}]},{type:a,tag:m,props:{code:"cat \u002Fetc\u002Fnginx\u002Fsites-enabled\u002Fhome.ctlos.ru.conf\n# содержимое\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name creio.duckdns.org;\n\n    access_log \u002Fvar\u002Flog\u002Fnginx\u002Fhome.access;\n    error_log \u002Fvar\u002Flog\u002Fnginx\u002Fhome.error;\n\n    # reverse proxy\n    location \u002F {\n        proxy_pass http:\u002F\u002F10.0.0.10:4000;\n        # proxy_redirect http:\u002F\u002F $scheme:\u002F\u002F;\n        proxy_redirect off;\n        proxy_buffering off;\n        tcp_nodelay on;\n\n        proxy_http_version 1.1;\n        proxy_pass_header Server;\n        proxy_set_header Host $http_host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header Proxy \"Cloud-LB\";\n        proxy_set_header Upgrade $http_upgrade;\n    }\n}\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:as}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"\u002Fetc\u002Fnginx\u002Fsites-enabled\u002Fhome.ctlos.ru.conf"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:z},children:[{type:b,value:"# содержимое"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:E}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:G}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:G}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ax}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"creio.duckdns.org"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bV}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aC}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bW}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bX}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:z},children:[{type:b,value:bl}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:W}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:E}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bm}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"http:\u002F\u002F10.0.0.10:"}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:aD}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:z},children:[{type:b,value:"# proxy_redirect http:\u002F\u002F $scheme:\u002F\u002F;"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bn}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:T}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bC}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:T}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bF}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:X}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bD}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:bE}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bA}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bB}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bo}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bp}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bq}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:br}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bs}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bt}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bu}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bv}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bw}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bx}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:n}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:by}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bz}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:ad}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:S}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"В "},{type:a,tag:D,props:{},children:[{type:b,value:"proxy_pass http:\u002F\u002F10.0.0.10:4000;"}]},{type:b,value:" указываем ip wg клиента, то есть ваш локальный ip интерфейса wg, команда ip a покажет его. Рестарт nginx и посмотрим статус."}]},{type:a,tag:m,props:{code:"sudo systemctl restart nginx\n\nsudo systemctl status nginx\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aa}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:F}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ar}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:F}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Просмотр отдачи инфы сервером в vpn сети. Должно отдавать одни и теже данные, как локально, так и на сервере."}]},{type:a,tag:m,props:{code:"curl 10.0.0.10:4000\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:cb}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"10.0.0.10:"}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:aD}]}]}]}]}]},{type:a,tag:_,props:{},children:[{type:a,tag:o,props:{},children:[{type:b,value:"Таким образом можно создать множество сайтов, пробросить нужные приложения в сеть из локальной сети, но обязательное условие, иметь сервер, иначе в этом мало смысла."}]}]},{type:a,tag:O,props:{id:cc},children:[{type:b,value:cd}]},{type:a,tag:_,props:{},children:[{type:a,tag:o,props:{},children:[{type:b,value:"В данном подходе не обязательно иметь сервер и можно забыть о vpn, а организовать все локально, без всяких доступов за nat. Поднять в докерах plex, nextcloud и многое другое, а portainer позволяет легко этим управлять."}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Установка Doker, docker-compose и настройка. "},{type:a,tag:A,props:{href:"https:\u002F\u002Fwiki.archlinux.org\u002Findex.php\u002FDocker",rel:[C]},children:[{type:b,value:"wiki.archlinux.org\u002Findex.php\u002FDocker"}]},{type:b,value:K}]},{type:a,tag:m,props:{code:"sudo pacman -S docker-compose\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bN}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:ae}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"docker-compose"}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Добавляем пользователя от которого работаем(username) в группу docker."}]},{type:a,tag:m,props:{code:"sudo usermod -aG docker username\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"usermod"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"-aG"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"username"}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Возможно стоит перезагрузиться. Включаем сервис и добавляем в авто-старт, если нужно."}]},{type:a,tag:m,props:{code:"sudo systemctl start docker\n\nsudo systemctl enable docker\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:am}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:H}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bU}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:H}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Portainer — веб интерфейс на 9000 порту, для управления docker контейнерами. "},{type:a,tag:A,props:{href:"https:\u002F\u002Fdocumentation.portainer.io\u002Fv2.0\u002Fdeploy\u002Fceinstalldocker\u002F",rel:[C]},children:[{type:b,value:"documentation portainer"}]},{type:b,value:". Создадим диск "},{type:a,tag:D,props:{},children:[{type:b,value:aE}]},{type:b,value:", как сказано в доках."}]},{type:a,tag:m,props:{code:"docker volume create portainer_data\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ce}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"create"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aE}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Одна из команд ниже запустит portainer, о хост сети я уже говорил выше, но можно и использовать 2 команду, только необходимо немного ковырнуть докер. В случае отказа запуска сервиса docker, попробуйте. "},{type:a,tag:A,props:{href:"https:\u002F\u002Fwiki.archlinux.org\u002Findex.php\u002FDocker#Daemon_socket",rel:[C]},children:[{type:b,value:"wiki.archlinux.org"}]},{type:b,value:K}]},{type:a,tag:m,props:{code:"sudo systemctl daemon-reload\nsudo rm -rf \u002Fvar\u002Frun\u002Fdocker.sock\nsudo systemctl restart docker\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"daemon-reload"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:al}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"-rf"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"\u002Fvar\u002Frun\u002Fdocker.sock"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aa}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:H}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Если вы изменили socket, как сказано в вики, то используйте вторую команду, контейнер будет доступен в vpn сети на 9000 порту."}]},{type:a,tag:m,props:{code:"# запуск в host сети\ndocker run -d --network host --name=portainer --restart=always -v \u002Fvar\u002Frun\u002Fdocker.sock:\u002Fvar\u002Frun\u002Fdocker.sock -v portainer_data:\u002Fdata portainer\u002Fportainer-ce --logo \"https:\u002F\u002Fctlos.github.io\u002Fassets\u002Fimg\u002Flogo.svg\"\n\n# bridge ports, portainer-ce\ndocker run -d -p 9000:9000 --name=portainer --restart=always -v \u002Fvar\u002Frun\u002Fdocker.sock:\u002Fvar\u002Frun\u002Fdocker.sock -v portainer_data:\u002Fdata portainer\u002Fportainer-ce --logo \"https:\u002F\u002Fctlos.github.io\u002Fassets\u002Fimg\u002Flogo.svg\"\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:z},children:[{type:b,value:"# запуск в host сети"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:cf}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:ap}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"--network"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"host"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:cg}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:ch}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:$}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ci}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:$}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:cj}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ck}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:cl}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:cm}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:z},children:[{type:b,value:"# bridge ports, portainer-ce"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:cf}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:ap}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"-p"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:cn}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:":"}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:cn}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:cg}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:ch}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:$}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ci}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:$}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:cj}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ck}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:cl}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:cm}]}]}]}]}]},{type:a,tag:bQ,props:{id:co},children:[{type:b,value:cp}]},{type:a,tag:m,props:{code:"# список контейнеров\ndocker ps\n\n# остановка ID или Name\ndocker stop portainer\n\n# запуск ID или Name\ndocker start fc46d04d334d\n\n# удалить\ndocker rm portainer\n\n# удалить диск\ndocker volume rm portainer_data\n",language:t,meta:u},children:[{type:a,tag:v,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:z},children:[{type:b,value:"# список контейнеров"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"ps"}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:z},children:[{type:b,value:"# остановка ID или Name"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bT}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:cq}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:z},children:[{type:b,value:"# запуск ID или Name"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:am}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"fc46d04d334d"}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:z},children:[{type:b,value:"# удалить"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:al}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:cq}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:z},children:[{type:b,value:"# удалить диск"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:k},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ce}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:al}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:e}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aE}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:b,value:"Многое можно делать в терминале, точнее все. Рекомендую детальней изучить docker-compose, "},{type:a,tag:A,props:{href:"https:\u002F\u002Fdocs.docker.com\u002F",rel:[C]},children:[{type:b,value:"docs.docker.com\u002F"}]},{type:b,value:K}]},{type:a,tag:bG,children:[{type:b,value:".ct-def2af{color:#FF7B72}\n.ct-4d7b12{color:#8B949E}\n.ct-5ffcf4{color:#79C0FF}\n.ct-486d64{color:#A5D6FF}\n.ct-61b6ed{color:#C9D1D9}\n.ct-06c65f{color:#FFA657}"}]}],toc:{title:r,searchDepth:J,depth:J,links:[{id:bL,depth:J,text:bM,children:[{id:bR,depth:cr,text:bS}]},{id:b$,depth:J,text:ca},{id:cc,depth:J,text:cd,children:[{id:co,depth:cr,text:cp}]}]}},_type:bH,_id:"content:posts:web-server.md",_source:bI,_file:"posts\u002Fweb-server.md",_extension:bJ}]},prerenderedAt:1681405495603}}("element","text","span","ct-61b6ed"," ","div","line","ct-45bc0f","ct-486d64","ct-ad963d","ct-06c65f","ct-bdf449","code",";","p","    ","ct-5ffcf4","","sudo","bash",null,"pre","  ","ct-2cbc07","        ","ct-4d7b12","a","systemctl","nofollow","code-inline","{","nginx","listen","docker","proxy_set_header",2,".","ct-c8bd26","\u002F","li","h2","root","80","server","}","off",false,"server_name","location","on","ul","nano","blockquote","-v","restart","; ","# managed by Certbot","    }","-S","tor","default_server","ctlos5lhe2vc3giixr.onion","autoindex","=","404","rm","start","\u002Fvar\u002Flib\u002Ftor\u002Fhidden_service\u002F","-t","-d","*","status","cat","\u002Fusr\u002Fshare\u002Fnginx\u002Fhtml","index","index.htm","index.html"," [::]:80;","try_files"," $uri $uri","  }","include","\u002Fvar\u002Flog\u002Fnginx\u002Fhome.access","4000","portainer_data","posts","Как запустить веб приложение и открыть доступность через tor в доменной зоне onion.","post","webserver","Video","установка-софта","Установка софта","yay","настройка-tor","Настройка tor","генерация-onion-домена-v3","Генерация onion домена v3","https:\u002F\u002Fgithub.com\u002Fcathugger\u002Fmkp224o","1","~\u002Fhs-keys","-r","права-на-hidden_service","Права на hidden_service","настройка-nginx","Настройка nginx","\u002Fposts\u002Fweb-server","\u002Fetc\u002Fnginx\u002Fnginx.conf"," [::]:80 ","\u002Fetc\u002Fnginx\u002Fsites-available\u002Fonion.conf","ln","-s","\u002Fetc\u002Fnginx\u002Fsites-enabled","\u002Fhome\u002Fcretm\u002Fapp\u002Fcloud.ctlos.ru","add_header","Onion-Location","\"http:\u002F\u002Fctlos5lhe2vc3giixr.onion","$request_uri","\"","always","# reverse proxy","proxy_pass","proxy_redirect","Host"," $http_host;","X-Real-IP"," $remote_addr;","X-Forwarded-For"," $proxy_add_x_forwarded_for;","X-Forwarded-Proto"," $scheme;","Proxy","\"Cloud-LB\"","Upgrade"," $http_upgrade;","proxy_pass_header","Server","proxy_buffering","proxy_http_version","1.1","tcp_nodelay","style","markdown","content","md","Nginx reverse proxy, проброс локальной сети на сервер, через wireguard. Portainer — gui для docker контейнеров.","nginx-локально","Nginx локально","pacman","\u002Fmedia\u002Ffiles\u002Fgithub\u002Fctlos\u002Fctlos.github.io\u002F_site","\u002Fetc\u002Fnginx\u002Fsites-available\u002Fhome.conf","h3","команды-nginx","Команды nginx","stop","enable","access_log","error_log","\u002Fvar\u002Flog\u002Fnginx\u002Fhome.error","      ","\u002F404.html","ct-def2af","nginx-на-сервере","Nginx на сервере","curl","docker-portainer","Docker Portainer","volume","run","--name=portainer","--restart=always","\u002Fvar\u002Frun\u002Fdocker.sock:\u002Fvar\u002Frun\u002Fdocker.sock","portainer_data:\u002Fdata","portainer\u002Fportainer-ce","--logo","\"https:\u002F\u002Fctlos.github.io\u002Fassets\u002Fimg\u002Flogo.svg\"","9000","команды-docker","Команды docker","portainer",3))