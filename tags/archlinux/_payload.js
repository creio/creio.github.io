export default (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,do0,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d_,d$,ea,eb,ec,ed){return {data:{posts:[{_path:"\u002Fposts\u002Foci",_dir:bg,_draft:$,_partial:$,_locale:o,_empty:$,title:"Установка Arch Linux в Oracle Cloud",description:o,date:"2021-03-22T00:00:00.000Z",type:bh,tags:[bi],body:{type:aj,children:[{type:a,tag:aa,props:{},children:[{type:a,tag:n,props:{},children:[{type:b,value:"PS: У меня забанили аккаунт без предупреждения :)."}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Существует такое предложение от Oracle Cloud, можно получить 2 сервера в минимальной комплектации навсегда и первые 30 дней тестирования более широкого функционала, нужно привязать карту с которой спишут примерно 1 евро(мне вернули практически сразу) и телефон. Доступные дистрибутивы на free тарифе: ubuntu, centos, oracle linux "},{type:a,tag:D,props:{href:"https:\u002F\u002Fwww.oracle.com\u002Fcloud\u002Ffree\u002F",rel:[G]},children:[{type:b,value:"oracle.com\u002Fcloud\u002Ffree\u002F"}]},{type:b,value:W}]},{type:a,tag:n,props:{},children:[{type:b,value:"После того, как я немного потрогал их кабинет задался целью развернуть у них Arch Linux, доступного образа у них нет, но я знаю о таком замечательном инструменте, как packer, все мои попытки запустить собранные packer-ом образы были не удачны. Образы практически на 100% уверен были в порядке, но я не знал как у них устроен efi загрузчик и не сообразил использовать Console Connection, об этом будет ниже "},{type:a,tag:D,props:{href:"https:\u002F\u002Fwww.packer.io\u002Fdocs",rel:[G]},children:[{type:b,value:"www.packer.io\u002Fdocs"}]},{type:b,value:W}]},{type:a,tag:n,props:{},children:[{type:b,value:"Для тех кому интересно, как залить туда custom image. В меню, Object storage - Bucket, создайте bucket, а в него загрузите образ. После этого в меню, Custom Images можно импортировать файл из бакета и уже из него создать Instance(машину)."}]},{type:a,tag:n,props:{},children:[{type:b,value:"Спустя примерно месяц я решил еще раз попробовать это провернуть, но доступ к функционалу Custom Images был закрыт, но я размотал его немного иначе."}]},{type:a,tag:n,props:{},children:[{type:b,value:"Интерфейс, практически везде есть сноски на документацию, которую можно перевести и детальней узнать о работе. Собственно так я и знакомился с функционалом кабинета, методом тыка. На данный момент он мне даже кажется весьма удобным."}]},{type:a,tag:aa,props:{},children:[{type:a,tag:n,props:{},children:[{type:b,value:"После создания машины(не важно какой), если в ней присутствует Файрвол, то открыть порты в нем мало, нужно еще открыть их в Default Security List. В меню, Networking - Virtual Cloud Networks - vcn-id - Security Lists - Default Security List vor vcn-id, иначе порты не будут доступны. Простыми словами их нужно открыть, как в Default Security List, так и на самой машине, при наличии Файрвола."}]}]},{type:a,tag:ak,props:{},children:[{type:a,tag:H,props:{},children:[{type:a,tag:D,props:{href:"https:\u002F\u002Fstackoverflow.com\u002Fquestions\u002F54794217\u002Fopening-port-80-on-oracle-cloud-infrastructure-compute-node",rel:[G]},children:[{type:b,value:"stackoverflow.com"}]}]}]},{type:a,tag:x,props:{id:bj},children:[{type:b,value:bk}]},{type:a,tag:n,props:{},children:[{type:b,value:"Локально создайте ssh ключи, если еще не сделали этого."}]},{type:a,tag:j,props:{code:"ssh-keygen -t rsa -b 4096 -C \"ctlos@protonmail.com\"\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"ssh-keygen"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"-t"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"rsa"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"-b"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"4096"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"-C"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\"ctlos@protonmail.com\""}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Ключи упадут в "},{type:a,tag:L,props:{},children:[{type:b,value:"~\u002F.ssh"}]},{type:b,value:". При создании instance(машины), импортируйте публичный ключ "},{type:a,tag:L,props:{},children:[{type:b,value:"id_rsa.pub"}]},{type:b,value:W}]},{type:a,tag:x,props:{id:bl},children:[{type:b,value:bm}]},{type:a,tag:n,props:{},children:[{type:b,value:"Создать минимальную машинку free, oracle linux 7.9, именно в ней будет swap раздел на 8G, который мы будем использовать для трансфера. Я не трогал настройки по умолчанию при создании. Авторизуемся на машине по ssh."}]},{type:a,tag:x,props:{id:bn},children:[{type:b,value:bo}]},{type:a,tag:n,props:{},children:[{type:b,value:"Методы описаны в вики archlinux "},{type:a,tag:D,props:{href:"https:\u002F\u002Fwiki.archlinux.org\u002Findex.php\u002FInstall_Arch_Linux_from_existing_Linux#Method_A:_Using_the_bootstrap_image_(recommended)",rel:[G]},children:[{type:b,value:"wiki.archlinux.org"}]},{type:b,value:W}]},{type:a,tag:n,props:{},children:[{type:b,value:"Копируем ссылку на bootstrap .tar.gz. Скачиваем и раскрываем архив в корень "},{type:a,tag:D,props:{href:"http:\u002F\u002Fmirrors.evowise.com\u002Farchlinux\u002Fiso\u002Flatest\u002F",rel:[G]},children:[{type:b,value:"http:\u002F\u002Fmirrors.evowise.com\u002F"}]},{type:b,value:W}]},{type:a,tag:j,props:{code:"# под root\ncd \u002F\nwget http:\u002F\u002Fmirrors.evowise.com\u002Farchlinux\u002Fiso\u002Flatest\u002Farchlinux-bootstrap-2021.03.01-x86_64.tar.gz\ntar xzf \u002Farchlinux-bootstrap-*-x86_64.tar.gz\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:"# под root"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:m},children:[{type:b,value:"cd"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bp}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:aD}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"http:\u002F\u002Fmirrors.evowise.com\u002Farchlinux\u002Fiso\u002Flatest\u002Farchlinux-bootstrap-2021.03.01-x86_64.tar.gz"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"tar"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"xzf"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\u002Farchlinux-bootstrap-"}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:bq}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"-x86_64.tar.gz"}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Отмонтировать swap он 8G, форматировать его в нужную фс(btrfs\u002Fext4). В моем случае структура разделов."}]},{type:a,tag:ak,props:{},children:[{type:a,tag:H,props:{},children:[{type:b,value:"\u002Fdev\u002Fsda1 boot, точка монтирования \u002Fboot\u002Fefi."}]},{type:a,tag:H,props:{},children:[{type:b,value:"\u002Fdev\u002Fsda2 swap(8G), его использую для трансфера."}]},{type:a,tag:H,props:{},children:[{type:b,value:"\u002Fdev\u002Fsda3 root(39G). На данный момент я тут с Oracle linux, в конце тут будет Arch с lts ядром."}]}]},{type:a,tag:j,props:{code:"lsblk -f\nswapoff -a\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:X}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:I}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"swapoff"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:ar}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Теперь выполняем chroot в bootstrap, в нем выполняем дальнейшие действия. Его разворачиваем для доступа к pacstrap и arch-chroot, основная и единственная задача. Он сам смонтирует нужные бинды, но нужно еще выполнить pacman init и раскомментировать зеркала(первые 3 Worldwide "},{type:a,tag:D,props:{href:"https:\u002F\u002Fwiki.archlinux.org\u002Findex.php\u002FInstall_Arch_Linux_from_existing_Linux#Using_a_chroot_environment",rel:[G]},children:[{type:b,value:"Using_a_chroot_environment"}]},{type:b,value:W}]},{type:a,tag:j,props:{code:"nano \u002Froot.x86_64\u002Fetc\u002Fpacman.d\u002Fmirrorlist\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:J}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\u002Froot.x86_64\u002Fetc\u002Fpacman.d\u002Fmirrorlist"}]}]}]}]}]},{type:a,tag:j,props:{code:"ls \u002F\n\n\u002Froot.x86_64\u002Fbin\u002Farch-chroot \u002Froot.x86_64\n\npacman-key --init\npacman-key --populate\npacman -Syy\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:aE}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bp}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"\u002Froot.x86_64\u002Fbin\u002Farch-chroot"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\u002Froot.x86_64"}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:as}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:br}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:as}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:bs}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:aF}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:bt}]}]}]}]}]},{type:a,tag:x,props:{id:bu},children:[{type:b,value:bv}]},{type:a,tag:n,props:{},children:[{type:b,value:"Форматируем, создаем нужные директории, снапшоты, монтируем. Обратите внимание boot я не форматирую, а просто перемонтирую и удалю из него загрузчик \u002Fboot\u002Fefi\u002FEFI\u002Fredhat."}]},{type:a,tag:j,props:{code:"mkfs.btrfs -f -L \"root\" \u002Fdev\u002Fsda2\nmount \u002Fdev\u002Fsda2 \u002Fmnt\n\nbtrfs subvolume create \u002Fmnt\u002F@\nbtrfs subvolume create \u002Fmnt\u002F@home\nbtrfs subvolume create \u002Fmnt\u002F@snapshots\n\numount \u002Fmnt\n\nmount -o subvol=@,compress=lzo,relatime,space_cache,autodefrag \u002Fdev\u002Fsda2 \u002Fmnt\nmkdir -p \u002Fmnt\u002F{boot\u002Fefi,home,snapshots}\nmount -o subvol=@home,compress=lzo,relatime,space_cache,autodefrag \u002Fdev\u002Fsda2 \u002Fmnt\u002Fhome\nmount -o subvol=@snapshots,compress=lzo,relatime,space_cache,autodefrag \u002Fdev\u002Fsda2 \u002Fmnt\u002Fsnapshots\n\numount \u002Fdev\u002Fsda1\nmount \u002Fdev\u002Fsda1 \u002Fmnt\u002Fboot\u002Fefi\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:bw}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bx}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:Q}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:z}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:Y}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ab}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ac}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:by}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:Y}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ab}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ac}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bz}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:Y}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ab}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ac}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bA}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:Z}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:z}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:K}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bB}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:z}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:at}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bC}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:K}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bD}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aG}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:K}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bE}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bF}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:Z}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:M}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bG}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Разворачиваем будущую систему с нужными пакетами, некоторые из них очень важны. Генерируем fstab и выполняем еще один chroot(да-да)."}]},{type:a,tag:j,props:{code:"pacstrap \u002Fmnt base base-devel linux-lts linux-lts-headers btrfs-progs nano grub efibootmgr iproute2 iputils rng-tools open-iscsi arch-install-scripts pacman-contrib reflector openssh wget git rsync gnu-netcat pv unzip unrar p7zip zsh htop tmux psmisc procps-ng\ngenfstab -pU \u002Fmnt \u003E\u003E \u002Fmnt\u002Fetc\u002Ffstab\narch-chroot \u002Fmnt\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:bH}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:z}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aH}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bI}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"linux-lts"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"linux-lts-headers"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"btrfs-progs"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:J}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bJ}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"efibootmgr"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"iproute2"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"iputils"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"rng-tools"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"open-iscsi"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"arch-install-scripts"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"pacman-contrib"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:au}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bK}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aD}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bL}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aI}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bM}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bN}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bO}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bP}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bQ}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"zsh"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bR}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"tmux"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"psmisc"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"procps-ng"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:bS}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:bT}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:z}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:S}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aJ}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:aK}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:z}]}]}]}]}]},{type:a,tag:x,props:{id:bU},children:[{type:b,value:bV}]},{type:a,tag:n,props:{},children:[{type:b,value:"Проинициализируем pacman, отсортируем зеркала и включаем mitilib репозиторий."}]},{type:a,tag:j,props:{code:"reflector -a 12 -l 30 -f 30 -p https,http --sort rate --save \u002Fetc\u002Fpacman.d\u002Fmirrorlist\npacman-key --init\npacman-key --populate\n\nsed -i \"\u002F[multilib]\u002F,\u002FInclude\u002F\"'s\u002F^#\u002F\u002F' \u002Fetc\u002Fpacman.conf\npacman -Syy --noconfirm\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:au}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:ar}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"12"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:al}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:bW}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:bW}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"https,http"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:bX}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bY}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:bZ}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:b_}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:as}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:br}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:as}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:bs}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:b$}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:ca}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:cb}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:cc}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:aF}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:bt}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:cd}]}]}]}]}]},{type:a,tag:x,props:{id:ce},children:[{type:b,value:cf}]},{type:a,tag:n,props:{},children:[{type:b,value:"Назначим рут пароль, добавляем пользователя с нужными группами, включаем ему zsh. Назначаем пароль пользователю и включаем sudo."}]},{type:a,tag:j,props:{code:"usermod -p 123 root\n\nuseradd -m -g users -G \"log,network,storage,power,wheel\" -s \u002Fbin\u002Fzsh creio\nusermod -p 123 creio\necho \"%wheel ALL=(ALL) ALL\" \u003E\u003E \u002Fetc\u002Fsudoers\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:cg}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:ch}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aj}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:ci}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:cj}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:ck}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:cl}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:cm}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\"log,network,storage,power,wheel\""}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:av}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\u002Fbin\u002Fzsh"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:cn}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:cg}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:ch}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:cn}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:m},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:co}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:S}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:cp}]}]}]}]}]},{type:a,tag:x,props:{id:cq},children:[{type:b,value:cr}]},{type:a,tag:n,props:{},children:[{type:b,value:"Назначаем имя машины, часовой пояс, локали и русский шрифт в консоли."}]},{type:a,tag:j,props:{code:"echo cloud \u003E \u002Fetc\u002Fhostname\n\nln -svf \u002Fusr\u002Fshare\u002Fzoneinfo\u002FEurope\u002FMoscow \u002Fetc\u002Flocaltime\nhwclock --systohc --utc\n\necho \"en_US.UTF-8 UTF-8\" \u003E \u002Fetc\u002Flocale.gen\necho \"ru_RU.UTF-8 UTF-8\" \u003E\u003E \u002Fetc\u002Flocale.gen\nlocale-gen\n\necho \"LANG=ru_RU.UTF-8\" \u003E \u002Fetc\u002Flocale.conf\necho \"KEYMAP=ru\" \u003E \u002Fetc\u002Fvconsole.conf\necho \"FONT=cyr-sun16\" \u003E\u003E \u002Fetc\u002Fvconsole.conf\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:m},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"cloud"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:cs}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:aL}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:ct}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:cu}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:cv}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"hwclock"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"--systohc"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"--utc"}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:m},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:cw}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aw}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:m},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:cx}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:S}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aw}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:cy}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:m},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:cz}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:cA}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:m},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:cB}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ax}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:m},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:cC}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:S}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ax}]}]}]}]}]},{type:a,tag:x,props:{id:ay},children:[{type:b,value:cD}]},{type:a,tag:n,props:{},children:[{type:b,value:"Изменить строку HOOKS в файле \u002Fetc\u002Fmkinitcpio.conf, должно быть так. Важно! Не знаю почему, но с хуком udev отказывается стартовать init, поэтому обязательно замените его на systemd и удаляю fsck, так как btrfs."}]},{type:a,tag:j,props:{code:"HOOKS=(base systemd autodetect modconf block filesystems keyboard keymap)\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"HOOKS"}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"("}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aH}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" systemd autodetect modconf block filesystems keyboard keymap)"}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Обновить initramfs."}]},{type:a,tag:j,props:{code:"mkinitcpio -P\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:ay}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"-P"}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Если проебали с хуком, то попадете в rootfs и можно принудительно назначить инит и включить его."}]},{type:a,tag:j,props:{code:"ln -s \u002Flib\u002Fsystemd\u002Fsystemd \u002Fnew_root\u002Fbin\u002Finit\n\nexec switch_root \u002Fnew_root \u002Fbin\u002Finit\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:aL}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:av}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\u002Flib\u002Fsystemd\u002Fsystemd"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\u002Fnew_root\u002Fbin\u002Finit"}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:m},children:[{type:b,value:"exec"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"switch_root"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\u002Fnew_root"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\u002Fbin\u002Finit"}]}]}]}]}]},{type:a,tag:x,props:{id:cE},children:[{type:b,value:cF}]},{type:a,tag:j,props:{code:"cat \u003C\u003CEOF \u003E\u002Fetc\u002Fhosts\n127.0.0.1       localhost\n::1             localhost\n127.0.1.1       cloud.localdomain cloud\nEOF\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:ad}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:cG}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"EOF \u003E\u002Fetc\u002Fhosts"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:"127.0.0.1       localhost"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:"::1             localhost"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:"127.0.1.1       cloud.localdomain cloud"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:cH}]}]}]}]}]},{type:a,tag:x,props:{id:cI},children:[{type:b,value:cJ}]},{type:a,tag:j,props:{code:"cat \u003C\u003CEOF \u003E\u002Fetc\u002Fsystemd\u002Fnetwork\u002F20-ethernet.network\n[Match]\nName=en*\nName=eth*\n\n[Network]\nDHCP=yes\nEOF\n\nsystemctl enable systemd-networkd\nsystemctl enable systemd-resolved\n# Workaround for https:\u002F\u002Fbugs.archlinux.org\u002Ftask\u002F58355\nsystemctl enable rngd\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:ad}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:cG}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"EOF \u003E\u002Fetc\u002Fsystemd\u002Fnetwork\u002F20-ethernet.network"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:"[Match]"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:"Name=en*"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:"Name=eth*"}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:"[Network]"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:"DHCP=yes"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:cH}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"systemd-networkd"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"systemd-resolved"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:"# Workaround for https:\u002F\u002Fbugs.archlinux.org\u002Ftask\u002F58355"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"rngd"}]}]}]}]}]},{type:a,tag:x,props:{id:cK},children:[{type:b,value:cL}]},{type:a,tag:j,props:{code:"grub-install --target=x86_64-efi --efi-directory=\u002Fboot\u002Fefi\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:aM}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:cM}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:cN}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Grub.cfg приводим к такому виду, все остальное закомментировано(#)"}]},{type:a,tag:j,props:{code:"nano \u002Fetc\u002Fdefault\u002Fgrub\n\nGRUB_DEFAULT=0\nGRUB_TIMEOUT=0\nGRUB_DISTRIBUTOR=\"Arch\"\nGRUB_CMDLINE_LINUX_DEFAULT=\"console=tty1 console=ttyS0 nvme.shutdown_timeout=10 libiscsi.debug_libiscsi_eh=1 quiet\"\nGRUB_CMDLINE_LINUX=\"\"\nGRUB_PRELOAD_MODULES=\"part_gpt part_msdos\"\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:J}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:cO}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"GRUB_DEFAULT"}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:A}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"GRUB_TIMEOUT"}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:A}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"GRUB_DISTRIBUTOR"}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\"Arch\""}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"GRUB_CMDLINE_LINUX_DEFAULT"}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\"console=tty1 console=ttyS0 nvme.shutdown_timeout=10 libiscsi.debug_libiscsi_eh=1 quiet\""}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:cP}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\"\""}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"GRUB_PRELOAD_MODULES"}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\"part_gpt part_msdos\""}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Генерируем конфиг grub."}]},{type:a,tag:j,props:{code:"grub-mkconfig -o \u002Fboot\u002Fgrub\u002Fgrub.cfg\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:aN}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:K}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:az}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Удаляем дефолт загрузчик."}]},{type:a,tag:j,props:{code:"rm -rf \u002Fmnt\u002Fboot\u002Fefi\u002FEFI\u002Fredhat\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:cQ}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"-rf"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\u002Fmnt\u002Fboot\u002Fefi\u002FEFI\u002Fredhat"}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Так как мы снесли дефолтный загрузчик, нужно подсунуть нужный файл efi для автоматической загрузки."}]},{type:a,tag:j,props:{code:"echo \"EFIarchgrubx64.efi\" \u003E \u002Fboot\u002Fefi\u002Fstartup.nsh\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:m},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\"EFIarchgrubx64.efi\""}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:cR}]}]}]}]}]},{type:a,tag:x,props:{id:ae},children:[{type:b,value:cS}]},{type:a,tag:n,props:{},children:[{type:b,value:"Раскомментируем строки и приведем их к такому виду."}]},{type:a,tag:j,props:{code:"nano \u002Fetc\u002Fssh\u002Fsshd_config\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:J}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\u002Fetc\u002Fssh\u002Fsshd_config"}]}]}]}]}]},{type:a,tag:j,props:{code:"PermitRootLogin yes\nPubkeyAuthentication yes\nPasswordAuthentication yes\nUseDNS no\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"PermitRootLogin"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aO}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"PubkeyAuthentication"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aO}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"PasswordAuthentication"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aO}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"UseDNS"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"no"}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Включаем сервис."}]},{type:a,tag:j,props:{code:"systemctl enable sshd\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:cT}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Выходим из chroot раздела(sda2) "},{type:a,tag:L,props:{},children:[{type:b,value:aA}]},{type:b,value:". Отмантируем разделы."}]},{type:a,tag:j,props:{code:"umount -R \u002Fmnt\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:Z}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:aP}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:z}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"И еще раз exit выходим из archlinux-bootstrap(\u002Froot.x86_64)."}]},{type:a,tag:aa,props:{},children:[{type:a,tag:n,props:{},children:[{type:b,value:"Следующий шаг важен, он мне сильно помог в отладке, так как доступ получаем выше самой машины, очень удобно."}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Перейдите в нужный instance и создайте на вкладке Console Connection подключение ssh, импортируйте открытый ключid_rsa.pub. После активации подключения в меню(3 точки справа) скопируйте Copy Serial Console Connection for Linux\u002FMac данные, вставьте данные из буфера в новый терминал."}]},{type:a,tag:j,props:{code:"ssh -o ProxyCommand='ssh -W %h:%p -p 443 ocid1.instnection.oc1.eu-frankfurt-1.antheljtuhavnyqwertyrey@instance-console.eu-frankfurt-1.oraclecloud.com' ocid1.instance.oc1.eu-frankfurt-1.qwretfhjczsdfetrydfgdfsfd\n\n# прожать Enter\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:ae}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:K}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"ProxyCommand='ssh -W %h:%p -p 443 ocid1.instnection.oc1.eu-frankfurt-1.antheljtuhavnyqwertyrey@instance-console.eu-frankfurt-1.oraclecloud.com'"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"ocid1.instance.oc1.eu-frankfurt-1.qwretfhjczsdfetrydfgdfsfd"}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:"# прожать Enter"}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"В исходном терминале, перезагружаем машину."}]},{type:a,tag:j,props:{code:"systemctl reboot\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aQ}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"В терминале с "},{type:a,tag:L,props:{},children:[{type:b,value:cU}]},{type:b,value:" должны увидеть efi меню, которое выполнит скрипт "},{type:a,tag:L,props:{},children:[{type:b,value:cR}]},{type:b,value:"(5 секунд) и запустит grub, grub не увидим, так как он выставлен в 0."}]},{type:a,tag:af,props:{id:cV},children:[{type:b,value:cW}]},{type:a,tag:n,props:{},children:[{type:b,value:"Если что-то выполнили не так увидите "},{type:a,tag:L,props:{},children:[{type:b,value:"efishell\u003E"}]},{type:b,value:", некоторые команды."}]},{type:a,tag:j,props:{code:"# карта\nmap\n# меню\nbcfg boot dump\n# переход в раздел\nFS0:\n# посмотреть созданный efi файл\nls EFIarch\n# запустить\nEFIarchgrubx64.efi\n# выход в псевдографику\nexit\n# добавляет пунк, работает до ребута\nbcfg boot add 0 FS0:EFIarchgrubx64.efi \"Arch lts\"\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:"# карта"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"map"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:"# меню"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:cX}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aR}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"dump"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:"# переход в раздел"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"FS0:"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:"# посмотреть созданный efi файл"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:aE}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"EFIarch"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:"# запустить"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"EFIarchgrubx64.efi"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:"# выход в псевдографику"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:m},children:[{type:b,value:aA}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:"# добавляет пунк, работает до ребута"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:cX}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aR}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"add"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"FS0:EFIarchgrubx64.efi"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\"Arch lts\""}]}]}]}]}]},{type:a,tag:aa,props:{},children:[{type:a,tag:n,props:{},children:[{type:b,value:"Именно по причине того, что загрузчик слетает и используется \u002Fboot\u002Fefi\u002Fstartup.nsh, именно поэтому и не стартовал мой custom image о котором я говорил в начале."}]}]},{type:a,tag:x,props:{id:cY},children:[{type:b,value:cZ}]},{type:a,tag:n,props:{},children:[{type:b,value:"Если все нормально, копируем ключ в root-а и юзера, в моем случае creio."}]},{type:a,tag:j,props:{code:"cat .ssh\u002Fid_rsa.pub | ssh root@192.168.1.35 'mkdir -p ~\u002F.ssh && cat \u003E\u003E .ssh\u002Fauthorized_keys'\ncat .ssh\u002Fid_rsa.pub | ssh creio@192.168.1.35 'mkdir -p ~\u002F.ssh && cat \u003E\u003E .ssh\u002Fauthorized_keys'\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:ad}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:c_}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:c$}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:ae}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"root@192.168.1.35"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:da}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:ad}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:c_}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:c$}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:ae}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:db}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:da}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Выполняем вход."}]},{type:a,tag:j,props:{code:"ssh creio@192.168.1.35\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:ae}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:db}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Должны увидеть меню zsh, нажать 0."}]},{type:a,tag:x,props:{id:dc},children:[{type:b,value:dd}]},{type:a,tag:n,props:{},children:[{type:b,value:"Форматируем и монтируем sda3. Создаем снапшоты."}]},{type:a,tag:j,props:{code:"lsblk -f\nmkfs.btrfs -f -L \"root\" \u002Fdev\u002Fsda3\nmount \u002Fdev\u002Fsda3 \u002Fmnt\n\nbtrfs subvolume create \u002Fmnt\u002F@\nbtrfs subvolume create \u002Fmnt\u002F@home\nbtrfs subvolume create \u002Fmnt\u002F@snapshots\n\numount \u002Fmnt\n\nmount -o subvol=@,compress=lzo,relatime,space_cache,autodefrag \u002Fdev\u002Fsda3 \u002Fmnt\nmkdir -p \u002Fmnt\u002F{boot\u002Fefi,home,snapshots}\nmount -o subvol=@home,compress=lzo,relatime,space_cache,autodefrag \u002Fdev\u002Fsda3 \u002Fmnt\u002Fhome\nmount -o subvol=@snapshots,compress=lzo,relatime,space_cache,autodefrag \u002Fdev\u002Fsda3 \u002Fmnt\u002Fsnapshots\n\numount \u002Fdev\u002Fsda1\nmount \u002Fdev\u002Fsda1 \u002Fmnt\u002Fboot\u002Fefi\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:X}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:I}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:bw}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bx}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:am}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:am}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:z}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:Y}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ab}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ac}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:by}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:Y}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ab}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ac}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bz}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:Y}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ab}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ac}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bA}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:Z}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:z}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:K}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bB}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:am}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:z}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:at}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bC}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:K}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bD}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:am}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aG}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:K}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bE}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:am}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bF}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:Z}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:M}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bG}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Копируем текущий корень в \u002Fmnt."}]},{type:a,tag:j,props:{code:"rsync -cauv --info=stats2 --exclude={\"\u002Fdev\u002F*\",\"\u002Fproc\u002F*\",\"\u002Fsys\u002F*\",\"\u002Ftmp\u002F*\",\"\u002Frun\u002F*\",\"\u002Fmnt\u002F*\",\"\u002Fmedia\u002F*\",\"\u002Flost+found\",\"\u002Fvar\u002Flib\u002Fpacman\u002Fsync\u002F*\",\"\u002Fvar\u002Fcache\u002F*\",\"\u002Fvar\u002Ftmp\u002F*\"} \u002F* \u002Fmnt\u002F\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:aI}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"-cauv"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"--info=stats2"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"--exclude="}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"{"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\"\u002Fdev\u002F*\""}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\"\u002Fproc\u002F*\""}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\"\u002Fsys\u002F*\""}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\"\u002Ftmp\u002F*\""}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\"\u002Frun\u002F*\""}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\"\u002Fmnt\u002F*\""}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\"\u002Fmedia\u002F*\""}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\"\u002Flost+found\""}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\"\u002Fvar\u002Flib\u002Fpacman\u002Fsync\u002F*\""}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\"\u002Fvar\u002Fcache\u002F*\""}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\"\u002Fvar\u002Ftmp\u002F*\""}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"} \u002F"}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:bq}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" \u002Fmnt\u002F"}]}]}]}]}]},{type:a,tag:x,props:{id:de},children:[{type:b,value:df}]},{type:a,tag:n,props:{},children:[{type:b,value:"Узнаем UUID разделов."}]},{type:a,tag:j,props:{code:dg,language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:X}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:I}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Изменить fstab, nano \u002Fmnt\u002Fetc\u002Ffstab. Загрузчик не изменился, только UUID субволумов."}]},{type:a,tag:j,props:{code:"# \u002Fdev\u002Fsda1\nUUID=2138-EC84                               \u002Fboot\u002Fefi      vfat    defaults  0 0\n\n# \u002Fdev\u002Fsda3\nUUID=39b2a28d-3890-425b-8152-fed18a73fdcd    \u002F              btrfs   subvol=@,defaults,noatime,space_cache,autodefrag 0 0\n\n# \u002Fdev\u002Fsda3\nUUID=39b2a28d-3890-425b-8152-fed18a73fdcd    \u002Fhome          btrfs   subvol=@home,defaults,noatime,space_cache,autodefrag 0 0\n\n# \u002Fdev\u002Fsda3\nUUID=39b2a28d-3890-425b-8152-fed18a73fdcd    \u002Fsnapshots     btrfs   subvol=@snapshots,defaults,noatime,space_cache,autodefrag 0 0\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:"# \u002Fdev\u002Fsda1"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:ag}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"2138"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"-EC84"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"                               \u002Fboot\u002Fefi      vfat    defaults  "}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:A}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:aS}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:ag}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aT}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:aU}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aV}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:aW}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aX}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"    \u002F              btrfs   subvol"}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"@,defaults,noatime,space_cache,autodefrag"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:A}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:aS}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:ag}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aT}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:aU}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aV}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:aW}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aX}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"    \u002Fhome          btrfs   subvol"}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"@home,defaults,noatime,space_cache,autodefrag"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:A}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:aS}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:ag}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aT}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:aU}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aV}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:aW}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aX}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"    \u002Fsnapshots     btrfs   subvol"}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"@snapshots,defaults,noatime,space_cache,autodefrag"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:A}]}]}]}]}]},{type:a,tag:x,props:{id:dh},children:[{type:b,value:di}]},{type:a,tag:j,props:{code:"arch-chroot \u002Fmnt\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:aK}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:z}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Переустановим и сконфигурируем grub."}]},{type:a,tag:j,props:{code:"grub-install --target=x86_64-efi --efi-directory=\u002Fboot\u002Fefi\n\ngrub-mkconfig -o \u002Fboot\u002Fgrub\u002Fgrub.cfg\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:aM}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:cM}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:cN}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:aN}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:K}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:az}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Посмотрим на правильность UUID. Везде должен быть id sda3."}]},{type:a,tag:j,props:{code:"cat \u002Fboot\u002Fgrub\u002Fgrub.cfg\n\nlsblk -f\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:ad}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:az}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:X}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:I}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Выходим из chroot, отмонтируем, ребут."}]},{type:a,tag:j,props:{code:"exit\numount -R \u002Fmnt\nsystemctl reboot\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:m},children:[{type:b,value:aA}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:Z}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:aP}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:z}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aQ}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Опять, можем запустить "},{type:a,tag:L,props:{},children:[{type:b,value:cU}]},{type:b,value:"(прожать Enter) и наблюдать за работой efi, если все ровно, выполняем вход. Теперь можно отформатировать sda2 в swap и подключить его в fstab."}]},{type:a,tag:j,props:{code:"mkswap \u002Fdev\u002Fsda2\nswapon \u002Fdev\u002Fsda2\nswapon --show\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:aY}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:Q}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:aB}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:Q}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:aB}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"--show"}]}]}]}]}]},{type:a,tag:j,props:{code:"lsblk -f\n\nnano \u002Fetc\u002Ffstab\n\n# добавить в конец с новой строки\n# \u002Fdev\u002Fsda2\nUUID=6a1059e2-6fd0-4894-bb14-53ff59754145    none           swap    defaults    0 0\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:X}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:I}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:J}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aZ}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:"# добавить в конец с новой строки"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:"# \u002Fdev\u002Fsda2"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:ag}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"6a1059e2-6fd0-"}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"4894"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"-bb14-53ff59754145"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"    none           swap    defaults    "}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:A}]}]}]}]}]},{type:a,tag:x,props:{id:dj},children:[{type:b,value:dk}]},{type:a,tag:n,props:{},children:[{type:b,value:"Отредактируйте файл "},{type:a,tag:L,props:{},children:[{type:b,value:"\u002Fetc\u002Fiscsi\u002Fiscsid.conf"}]},{type:b,value:", как указано в help "},{type:a,tag:D,props:{href:"https:\u002F\u002Fdocs.oracle.com\u002Fen-us\u002Fiaas\u002FContent\u002FBlock\u002FConcepts\u002Fiscsiinformation.htm",rel:[G]},children:[{type:b,value:"iscsiinformation.htm"}]},{type:b,value:". На вкладке boot volumes можно создать дополнительный диск, клонировать существующий. После этого добавить на машине в автостарт и запустить сервис."}]},{type:a,tag:j,props:{code:"sudo systemctl enable --now iscsid\n# включаем авторизацию\nsudo systemctl enable iscsi\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"--now"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"iscsid"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:"# включаем авторизацию"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"iscsi"}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Зайти в свой Instances и в левом меню на вкладку Attached Block Volumes, присоединить клонированный диск, когда он перейдет в состояние Attached в правом меню открыть пункт iSCSI Commands & Information. Скопировать 3 команды(iscsiadm) на подключение и выполнить их на своей машине(по строчно) от пользователя."}]},{type:a,tag:n,props:{},children:[{type:b,value:"В поле ниже, соответственно команды на отключение."}]},{type:a,tag:j,props:{code:dg,language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:X}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:I}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Форматируем данный диск на свое усмотрение и прописываем, если нужно в fstab."}]},{type:a,tag:j,props:{code:"# создаем таблицу и раздел\u002Fразделы\nsudo cfdisk -z \u002Fdev\u002Fsdb\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:"# создаем таблицу и раздел\u002Fразделы"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:dl}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"-z"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\u002Fdev\u002Fsdb"}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Я выбрал gpt, затем создал раздел по умолчанию на все пространство(46,6G), enter - enter - enter, курсор вправо(записать) - yes - enter, курсор влево(выход). Форматируем в ext4 с меткой files."}]},{type:a,tag:j,props:{code:"sudo mkfs.ext4 \u002Fdev\u002Fsdb1 -L files\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:a_}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\u002Fdev\u002Fsdb1"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"files"}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Добавляю в fstab."}]},{type:a,tag:j,props:{code:"sudo mkdir -p \u002Fmedia\u002Ffiles\nlsblk -f\nsudo nano \u002Fetc\u002Ffstab\n\n# \u002Fdev\u002Fsdb1\nUUID=702c830e-efb9-403d-bdfc-b3a969d44b1f    \u002Fmedia\u002Ffiles   ext4    defaults,_netdev,x-systemd.requires=iscsid.service  0 1\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:at}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:a$}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:X}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:I}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:J}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aZ}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:"# \u002Fdev\u002Fsdb1"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:ag}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"702c830e-efb9-403d-bdfc-b3a969d44b1f"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"    \u002Fmedia\u002Ffiles   ext4    defaults,_netdev,x-systemd.requires"}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"iscsid.service"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"  "}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"1"}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Перезагружаюсь и вижу по пути "},{type:a,tag:L,props:{},children:[{type:b,value:a$}]},{type:b,value:" чистый раздел, под любые нужды."}]},{type:a,tag:j,props:{code:"sudo systemctl reboot\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aQ}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Дадим полные права в директорию для юзера."}]},{type:a,tag:j,props:{code:"sudo chown -R $(whoami):users \u002Fmedia\u002Ffiles\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"chown"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:aP}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"$("}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:"whoami"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"):users"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:a$}]}]}]}]}]},{type:a,tag:aa,props:{},children:[{type:a,tag:n,props:{},children:[{type:b,value:"Вы наверно догадались, что можно было сразу подключить второй диск и развернуть на него, тем самым опустить момент с переносом раздела(rsync), я это специально сделал, чтобы показать больше."}]}]},{type:a,tag:x,props:{id:dm},children:[{type:b,value:dn}]},{type:a,tag:af,props:{id:do0},children:[{type:b,value:dp}]},{type:a,tag:j,props:{code:"sudo nano \u002Fetc\u002Fsystemd\u002Fjournald.conf\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:J}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\u002Fetc\u002Fsystemd\u002Fjournald.conf"}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Раскомментировать и изменить строку."}]},{type:a,tag:j,props:{code:"SystemMaxUse=100M\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"SystemMaxUse"}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"100M"}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Перезапустите сервис."}]},{type:a,tag:j,props:{code:"sudo systemctl restart systemd-journald.service\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"restart"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"systemd-journald.service"}]}]}]}]}]},{type:a,tag:af,props:{id:dq},children:[{type:b,value:dr}]},{type:a,tag:j,props:{code:"df -h \u002Ftmp\n\nsudo mount -o remount,size=2G \u002Ftmp\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"df"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:ds}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:dt}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:K}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"remount,size=2G"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:dt}]}]}]}]}]},{type:a,tag:af,props:{id:an},children:[{type:b,value:du}]},{type:a,tag:n,props:{},children:[{type:b,value:"Это полезно при обновлении ядра, можно очень быстро перезагрузить его, не дожидаясь завершения всего процесса загрузки BIOS. Наглядно видно, при доступном обновление ядра "},{type:a,tag:D,props:{href:"https:\u002F\u002Fwiki.archlinux.org\u002Findex.php\u002FKexec",rel:[G]},children:[{type:b,value:"wiki.archlinux.org\u002Findex.php\u002FKexec"}]},{type:b,value:W}]},{type:a,tag:j,props:{code:"yay -S kexec-tools\n# версия ядра\nuname -a\n# полное обновление\nyay -Syyuu\n# загрузка нового ядра\nsudo kexec -l \u002Fboot\u002Fvmlinuz-linux-lts --initrd=\u002Fboot\u002Finitramfs-linux-lts.img --reuse-cmdline\n# частичный ребут\nsudo systemctl kexec\n# справка\nsudo kexec -h\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:dv}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:dw}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"kexec-tools"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:"# версия ядра"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"uname"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:ar}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:"# полное обновление"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:dv}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"-Syyuu"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:"# загрузка нового ядра"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:an}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:al}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"\u002Fboot\u002Fvmlinuz-linux-lts"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"--initrd=\u002Fboot\u002Finitramfs-linux-lts.img"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"--reuse-cmdline"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:"# частичный ребут"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:an}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:w},children:[{type:b,value:"# справка"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:an}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:ds}]}]}]}]}]},{type:a,tag:af,props:{id:dx},children:[{type:b,value:dy}]},{type:a,tag:n,props:{},children:[{type:b,value:"Можно отключить раздел swap и использовать файл на 4G в btrfs."}]},{type:a,tag:j,props:{code:"truncate -s 0 \u002Fswapfile\nchattr +C \u002Fswapfile\nbtrfs property set \u002Fswapfile compression none\nfallocate \u002Fswapfile -l4g\nchmod 600 \u002Fswapfile\nmkswap \u002Fswapfile\nlsattr \u002Fswapfile\nswapon \u002Fswapfile\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"truncate"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:av}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:T}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"chattr"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"+C"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:T}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:Y}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"property"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"set"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:T}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"compression"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:dz}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"fallocate"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:T}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"-l4g"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"chmod"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:"600"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:T}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:aY}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:T}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"lsattr"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:T}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:aB}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:T}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Закомментировать раздел swap и добавить строку с файлом."}]},{type:a,tag:j,props:{code:"sudo nano \u002Fetc\u002Ffstab\n\n\u002Fswapfile      none      swap      defaults    0 0\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:J}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:aZ}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:T}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:ba}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:dz}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:ba}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bb}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:ba}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"defaults"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"    "}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:m},children:[{type:b,value:A}]}]}]}]}]},{type:a,tag:af,props:{id:dA},children:[{type:b,value:dB}]},{type:a,tag:ak,props:{},children:[{type:a,tag:H,props:{},children:[{type:a,tag:D,props:{href:"\u002Fposts\u002Fzsh-config"},children:[{type:b,value:"Настройка zsh"}]}]},{type:a,tag:H,props:{},children:[{type:a,tag:D,props:{href:"https:\u002F\u002Fgithub.com\u002Fcreio\u002Fdots",rel:[G]},children:[{type:b,value:"Еще некоторые конфиги и скрипты в моем репозитории"}]}]},{type:a,tag:H,props:{},children:[{type:a,tag:D,props:{href:"\u002Fposts\u002Fvpn"},children:[{type:b,value:"VPN сервер в Linux"}]}]}]},{type:a,tag:x,props:{id:dC},children:[{type:b,value:dD}]},{type:a,tag:n,props:{},children:[{type:b,value:"Таким способом можно переделать любую систему и практически на любом облачном решении, главное знать детали загрузки и хорошо бы иметь ssh подключение выше, как тут (Console connection), или некий режим восстановления. Если Вам понравился мой бред:) по этому поводу, то поблагодарить меня можно тут."}]},{type:a,tag:ak,props:{},children:[{type:a,tag:H,props:{},children:[{type:a,tag:D,props:{href:"https:\u002F\u002Fctlos.github.io\u002Fdonat\u002F",rel:[G]},children:[{type:b,value:"ctlos.github.io\u002Fdonat"}]}]},{type:a,tag:H,props:{},children:[{type:b,value:"Вступай в чат "},{type:a,tag:D,props:{href:"https:\u002F\u002Ftelegram.me\u002Fctlos",rel:[G]},children:[{type:b,value:"@ctlos"}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Всем Добра."}]},{type:a,tag:dE,children:[{type:b,value:".ct-a42183{color:#FF7B72}\n.ct-4ab3b6{color:#8B949E}\n.ct-6d4554{color:#A5D6FF}\n.ct-1c5b6c{color:#79C0FF}\n.ct-54bd9b{color:#C9D1D9}\n.ct-4705d5{color:#FFA657}"}]}],toc:{title:o,searchDepth:v,depth:v,links:[{id:bj,depth:v,text:bk},{id:bl,depth:v,text:bm},{id:bn,depth:v,text:bo},{id:bu,depth:v,text:bv},{id:bU,depth:v,text:bV},{id:ce,depth:v,text:cf},{id:cq,depth:v,text:cr},{id:ay,depth:v,text:cD},{id:cE,depth:v,text:cF},{id:cI,depth:v,text:cJ},{id:cK,depth:v,text:cL},{id:ae,depth:v,text:cS,children:[{id:cV,depth:ah,text:cW}]},{id:cY,depth:v,text:cZ},{id:dc,depth:v,text:dd},{id:de,depth:v,text:df},{id:dh,depth:v,text:di},{id:dj,depth:v,text:dk},{id:dm,depth:v,text:dn,children:[{id:do0,depth:ah,text:dp},{id:dq,depth:ah,text:dr},{id:an,depth:ah,text:du},{id:dx,depth:ah,text:dy},{id:dA,depth:ah,text:dB}]},{id:dC,depth:v,text:dD}]}},_type:dF,_id:"content:posts:oci.md",_source:dG,_file:"posts\u002Foci.md",_extension:dH},{_path:"\u002Fposts\u002Farch-lvm-luks",_dir:bg,_draft:$,_partial:$,_locale:o,_empty:$,title:"Установка Arch Linux на зашифрованный раздел, LVM на LUKS",description:dI,date:"2020-03-23T00:00:00.000Z",type:bh,tags:[bi,"crypt"],body:{type:aj,children:[{type:a,tag:n,props:{},children:[{type:b,value:dI}]},{type:a,tag:j,props:{code:"loadkeys ru\nsetfont cyr-sun16\ntimedatectl set-ntp true\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:"loadkeys"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"ru"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:"setfont"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"cyr-sun16"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:dJ}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:dK}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:dL}]}]}]}]}]},{type:a,tag:x,props:{id:dM},children:[{type:b,value:dN}]},{type:a,tag:n,props:{},children:[{type:b,value:"Создаем таблицу на диске MBR(DOS) и 2 первичных раздела."}]},{type:a,tag:ak,props:{},children:[{type:a,tag:H,props:{},children:[{type:b,value:"LUKS под root, swap, home"}]},{type:a,tag:H,props:{},children:[{type:b,value:"boot 512M, выставляем флаг boot"}]}]},{type:a,tag:j,props:{code:"cfdisk\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:dl}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Шифруем, открываем раздел. Создаем контейнер."}]},{type:a,tag:j,props:{code:"# подтверждаем YES\ncryptsetup -y luksFormat --type luks2 \u002Fdev\u002Fsda1\ncryptsetup open \u002Fdev\u002Fsda1 cryptlvm\n\npvcreate \u002Fdev\u002Fmapper\u002Fcryptlvm\nvgcreate lvarch \u002Fdev\u002Fmapper\u002Fcryptlvm\n\nls -l \u002Fdev\u002Fmapper\u002Fcryptlvm\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:_},children:[{type:b,value:"# подтверждаем YES"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:ai}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:"-y"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"luksFormat"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:"--type"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"luks2"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:M}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:ai}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"open"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:dO}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:"pvcreate"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bc}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:"vgcreate"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:ao}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bc}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:aE}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:al}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bc}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Создаём разделы lvm."}]},{type:a,tag:j,props:{code:"lvcreate -L 4G -n swap lvarch\nlvcreate -L 25G -n root lvarch\nlvcreate -l 100%FREE -n home lvarch\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:bd}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"4G"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:aC}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bb}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:ao}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:bd}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"25G"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:aC}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:aj}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:ao}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:bd}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:al}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:"100"}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"%FREE"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:aC}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:dP}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:ao}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Форматируем и включаем swap."}]},{type:a,tag:j,props:{code:"mkfs.ext2 -L boot \u002Fdev\u002Fsda2\nmkfs.ext4 -L root \u002Fdev\u002Flvarch\u002Froot\nmkfs.ext4 -L home \u002Fdev\u002Flvarch\u002Fhome\nmkswap -L swap \u002Fdev\u002Flvarch\u002Fswap\nswapon \u002Fdev\u002Flvarch\u002Fswap\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:"mkfs.ext2"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:aR}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:Q}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:a_}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:aj}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:dQ}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:a_}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:dP}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:dR}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:aY}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bb}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:dS}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:aB}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:dS}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Монтируем и создаем директории."}]},{type:a,tag:j,props:{code:"mount \u002Fdev\u002Flvarch\u002Froot \u002Fmnt\nmkdir \u002Fmnt\u002F{home,boot}\nmount \u002Fdev\u002Flvarch\u002Fhome \u002Fmnt\u002Fhome\nmount \u002Fdev\u002Fsda2 \u002Fmnt\u002Fboot\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:dQ}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:z}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:at}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"\u002Fmnt\u002F{home,boot}"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:dR}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:aG}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"\u002Fmnt\u002Fboot"}]}]}]}]}]},{type:a,tag:x,props:{id:dT},children:[{type:b,value:dU}]},{type:a,tag:n,props:{},children:[{type:b,value:"Установка базовой системы и необходимых пакетов."}]},{type:a,tag:j,props:{code:"pacstrap \u002Fmnt base base-devel linux linux-headers linux-firmware lvm2 nano networkmanager bash-completion reflector htop openssh curl wget git rsync unzip unrar p7zip gnu-netcat pv\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:bH}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:z}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:aH}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bI}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:dV}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"linux-headers"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"linux-firmware"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"lvm2"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:J}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"networkmanager"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"bash-completion"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:au}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bR}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bK}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"curl"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:aD}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bL}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:aI}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bO}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bP}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bQ}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bM}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bN}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Генерируем и правим, если нужно fstab, выполняем chroot."}]},{type:a,tag:j,props:{code:"genfstab -pU \u002Fmnt \u003E\u003E \u002Fmnt\u002Fetc\u002Ffstab\ncat \u002Fmnt\u002Fetc\u002Ffstab\n\narch-chroot \u002Fmnt\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:bS}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:bT}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:z}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:O},children:[{type:b,value:S}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:aJ}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:ad}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:aJ}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:aK}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:z}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Включаем multilib и сортируем зеркала."}]},{type:a,tag:j,props:{code:"sed -i \"\u002F[multilib]\u002F,\u002FInclude\u002F\"'s\u002F^#\u002F\u002F' \u002Fetc\u002Fpacman.conf\n\nreflector -c \"Russia\" -c \"Belarus\" -c \"Ukraine\" -c \"Poland\" -f 20 -l 20 -p https -p http -n 20 --save \u002Fetc\u002Fpacman.d\u002Fmirrorlist --sort rate\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:b$}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:ca}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:cb}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:cc}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:au}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:ap}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"\"Russia\""}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:ap}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"\"Belarus\""}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:ap}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"\"Ukraine\""}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:ap}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"\"Poland\""}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:be}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:al}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:be}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"https"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"http"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:aC}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:be}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:bZ}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:b_}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:bX}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bY}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Пароль root."}]},{type:a,tag:j,props:{code:"passwd\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:dW}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Создаем пользователя st в нужных группах, назначаем пароль и включаем sudo."}]},{type:a,tag:j,props:{code:"useradd -m -g users -G \"adm,audio,log,network,rfkill,scanner,storage,optical,power,wheel\" -s \u002Fbin\u002Fbash -c \"Alex Creio\" st\n\npasswd st\n\necho \"%wheel ALL=(ALL) ALL\" \u003E\u003E \u002Fetc\u002Fsudoers\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:ci}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:cj}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:ck}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:cl}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:cm}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"\"adm,audio,log,network,rfkill,scanner,storage,optical,power,wheel\""}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:av}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"\u002Fbin\u002Fbash"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:ap}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"\"Alex Creio\""}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:dX}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:dW}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:dX}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:co}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:O},children:[{type:b,value:S}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:cp}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Назначаем hostname: имя машины и часовой пояс, время."}]},{type:a,tag:j,props:{code:"echo \"ctlos\" \u003E \u002Fetc\u002Fhostname\nln -svf \u002Fusr\u002Fshare\u002Fzoneinfo\u002FEurope\u002FMoscow \u002Fetc\u002Flocaltime\ntimedatectl set-ntp true\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"\"ctlos\""}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:O},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:cs}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:aL}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:ct}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:cu}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:cv}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:dJ}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:dK}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:dL}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Генерируем локали и включаем русский язык системы."}]},{type:a,tag:j,props:{code:"echo \"en_US.UTF-8 UTF-8\" \u003E \u002Fetc\u002Flocale.gen\necho \"ru_RU.UTF-8 UTF-8\" \u003E\u003E \u002Fetc\u002Flocale.gen\nlocale-gen\necho \"LANG=ru_RU.UTF-8\" \u003E \u002Fetc\u002Flocale.conf\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:cw}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:O},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:aw}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:cx}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:O},children:[{type:b,value:S}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:aw}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:cy}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:cz}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:O},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:cA}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Добавляем поддержку ru в консоле."}]},{type:a,tag:j,props:{code:"echo \"KEYMAP=ru\" \u003E\u003E \u002Fetc\u002Fvconsole.conf\necho \"FONT=cyr-sun16\" \u003E\u003E \u002Fetc\u002Fvconsole.conf\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:cB}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:O},children:[{type:b,value:S}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:ax}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:cC}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:O},children:[{type:b,value:S}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:ax}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Добавляем хуки (порядок важен) и создаем загрузочный образ."}]},{type:a,tag:j,props:{code:"### добавить keyboard keymap encrypt lvm2\n# HOOKS=(base udev autodetect keyboard keymap modconf block encrypt lvm2 filesystems fsck)\nnano \u002Fetc\u002Fmkinitcpio.conf\n\nmkinitcpio -p linux\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:_},children:[{type:b,value:"### добавить keyboard keymap encrypt lvm2"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:_},children:[{type:b,value:"# HOOKS=(base udev autodetect keyboard keymap modconf block encrypt lvm2 filesystems fsck)"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:J}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"\u002Fetc\u002Fmkinitcpio.conf"}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:ay}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:dV}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Устанавливаем Grub."}]},{type:a,tag:j,props:{code:"pacman -S --noconfirm --needed grub\ngrub-install \u002Fdev\u002Fsda\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:aF}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:dw}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:cd}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:"--needed"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bJ}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:aM}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"\u002Fdev\u002Fsda"}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Настраиваем и конфигурируем grub."}]},{type:a,tag:j,props:{code:"## узнаём UUID\nblkid \u002Fdev\u002Fsda1\n# \u002Fdev\u002Fsda1: UUID=\"c0868972-f314-48e1-9be5-3584826dbd64\" TYPE=\"crypto_LUKS\" PARTUUID=\"bbb93e39-01\"\n\nnano \u002Fetc\u002Fdefault\u002Fgrub\n\n## Прописываем команду для старта и включаем.\nGRUB_CMDLINE_LINUX=\"cryptdevice=UUID=c0868972-f314-48e1-9be5-3584826dbd64:cryptlvm root=\u002Fdev\u002Flvarch\u002Froot\"\nGRUB_ENABLE_CRYPTODISK=y\n\n## конфигурируем\ngrub-mkconfig -o \u002Fboot\u002Fgrub\u002Fgrub.cfg\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:_},children:[{type:b,value:"## узнаём UUID"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:"blkid"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:M}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:_},children:[{type:b,value:"# \u002Fdev\u002Fsda1: UUID=\"c0868972-f314-48e1-9be5-3584826dbd64\" TYPE=\"crypto_LUKS\" PARTUUID=\"bbb93e39-01\""}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:J}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:cO}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:_},children:[{type:b,value:"## Прописываем команду для старта и включаем."}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:cP}]},{type:a,tag:c,props:{class:O},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"\"cryptdevice=UUID=c0868972-f314-48e1-9be5-3584826dbd64:cryptlvm root=\u002Fdev\u002Flvarch\u002Froot\""}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:"GRUB_ENABLE_CRYPTODISK"}]},{type:a,tag:c,props:{class:O},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"y"}]}]},{type:a,tag:f,props:{class:g},children:[]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:_},children:[{type:b,value:"## конфигурируем"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:aN}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:K}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:az}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Включаем необходимые сервисы."}]},{type:a,tag:j,props:{code:"systemctl enable NetworkManager\nsystemctl enable sshd\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"NetworkManager"}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:cT}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Выходим из chroot, отмонтируем разделы и закроем контейнер."}]},{type:a,tag:j,props:{code:"exit\numount -Rf \u002Fmnt\nvgchange -a n lvarch\ncryptsetup close cryptlvm\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:aA}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:Z}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:"-Rf"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:z}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:"vgchange"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:ar}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"n"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:ao}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:ai}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"close"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:dO}]}]}]}]}]},{type:a,tag:x,props:{id:dY},children:[{type:b,value:dZ}]},{type:a,tag:n,props:{},children:[{type:b,value:"Просмотр информации."}]},{type:a,tag:j,props:{code:"cryptsetup luksDump \u002Fdev\u002Fsda1\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:ai}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"luksDump"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:M}]}]}]}]}]},{type:a,tag:aa,props:{},children:[{type:a,tag:n,props:{},children:[{type:b,value:"Обязательно создайте backup заголовка."}]}]},{type:a,tag:j,props:{code:"cryptsetup luksHeaderBackup \u002Fdev\u002Fsda1 --header-backup-file luksheader.bac\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:ai}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"luksHeaderBackup"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:d_}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:aq}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Шифруем."}]},{type:a,tag:j,props:{code:"openssl enc -aes-256-cbc -salt -in luksheader.bac -out luksheader.bac.enc\nrm luksheader.bac\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:d$}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:ea}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:eb}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:"-salt"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:ec}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:aq}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:ed}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bf}]}]},{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:cQ}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:aq}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Расшифровываем."}]},{type:a,tag:j,props:{code:"openssl enc -d -aes-256-cbc -in luksheader.bac.enc -out luksheader.bac\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:d$}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:ea}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:"-d"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:eb}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:ec}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:bf}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:ed}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:aq}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Восстанавливаем, подтверждаем: YES."}]},{type:a,tag:j,props:{code:"cryptsetup luksHeaderRestore --header-backup-file luksheader.bac \u002Fdev\u002Fsda1\n",language:p,meta:q},children:[{type:a,tag:r,props:{},children:[{type:a,tag:j,props:{__ignoreMap:o},children:[{type:a,tag:f,props:{class:g},children:[{type:a,tag:c,props:{class:t},children:[{type:b,value:ai}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:"luksHeaderRestore"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:s},children:[{type:b,value:d_}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:aq}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:d}]},{type:a,tag:c,props:{class:k},children:[{type:b,value:M}]}]}]}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Сохраняем в надёжное место "},{type:a,tag:L,props:{},children:[{type:b,value:bf}]},{type:b,value:", например на usb."}]},{type:a,tag:n,props:{},children:[{type:a,tag:D,props:{href:"https:\u002F\u002Fwww.youtube.com\u002Fwatch?v=sGIrre2OVt4&t=238s",rel:[G]},children:[{type:b,value:"Стеганографируем и в публичный доступ (video)"}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"Profit!"}]},{type:a,tag:dE,children:[{type:b,value:".ct-7f0f29{color:#FF7B72}\n.ct-1c9eee{color:#8B949E}\n.ct-cf3b85{color:#79C0FF}\n.ct-b17eb1{color:#A5D6FF}\n.ct-6f398b{color:#C9D1D9}\n.ct-6bd3f7{color:#FFA657}"}]}],toc:{title:o,searchDepth:v,depth:v,links:[{id:dM,depth:v,text:dN},{id:dT,depth:v,text:dU},{id:dY,depth:v,text:dZ}]}},_type:dF,_id:"content:posts:arch-lvm-luks.md",_source:dG,_file:"posts\u002Farch-lvm-luks.md",_extension:dH}]},prerenderedAt:1682084468538}}("element","text","span"," ","ct-54bd9b","div","line","ct-6d4554","ct-6f398b","code","ct-b17eb1","ct-4705d5","ct-1c5b6c","p","","bash",null,"pre","ct-cf3b85","ct-6bd3f7","ct-a42183",2,"ct-4ab3b6","h2","=","\u002Fmnt","0","echo","sudo","a","mount","systemctl","nofollow","li","-f","nano","-o","code-inline","\u002Fdev\u002Fsda1",",","ct-7f0f29","-L","\u002Fdev\u002Fsda2","-p","\u003E\u003E","\u002Fswapfile","\u003E","enable",".","lsblk","btrfs","umount","ct-1c9eee",false,"blockquote","subvolume","create","cat","ssh","h3","UUID",3,"cryptsetup","root","ul","-l","\u002Fdev\u002Fsda3","kexec","lvarch","-c","luksheader.bac","-a","pacman-key","mkdir","reflector","-s","\u002Fetc\u002Flocale.gen","\u002Fetc\u002Fvconsole.conf","mkinitcpio","\u002Fboot\u002Fgrub\u002Fgrub.cfg","exit","swapon","-n","wget","ls","pacman","\u002Fmnt\u002Fhome","base","rsync","\u002Fmnt\u002Fetc\u002Ffstab","arch-chroot","ln","grub-install","grub-mkconfig","yes","-R","reboot","boot","# \u002Fdev\u002Fsda3","39b2a28d-","3890","-425b-","8152","-fed18a73fdcd","mkswap","\u002Fetc\u002Ffstab","mkfs.ext4","\u002Fmedia\u002Ffiles","      ","swap","\u002Fdev\u002Fmapper\u002Fcryptlvm","lvcreate","20","luksheader.bac.enc","posts","post","archlinux","генерация-ключей","Генерация ключей","oracle-cloud","Oracle Cloud","arch-bootstrap","Arch bootstrap","\u002F","*","--init","--populate","-Syy","монтирование-pacstrap","Монтирование pacstrap","mkfs.btrfs","\"root\"","\u002Fmnt\u002F@","\u002Fmnt\u002F@home","\u002Fmnt\u002F@snapshots","subvol=@,compress=lzo,relatime,space_cache,autodefrag","\u002Fmnt\u002F{boot\u002Fefi,home,snapshots}","subvol=@home,compress=lzo,relatime,space_cache,autodefrag","subvol=@snapshots,compress=lzo,relatime,space_cache,autodefrag","\u002Fmnt\u002Fsnapshots","\u002Fmnt\u002Fboot\u002Fefi","pacstrap","base-devel","grub","openssh","git","gnu-netcat","pv","unzip","unrar","p7zip","htop","genfstab","-pU","init-pacman","Init pacman","30","--sort","rate","--save","\u002Fetc\u002Fpacman.d\u002Fmirrorlist","sed","-i","\"\u002F[multilib]\u002F,\u002FInclude\u002F\"'s\u002F^#\u002F\u002F'","\u002Fetc\u002Fpacman.conf","--noconfirm","добавление-пользователя","Добавление пользователя","usermod","123","useradd","-m","-g","users","-G","creio","\"%wheel ALL=(ALL) ALL\"","\u002Fetc\u002Fsudoers","системные-настройки","Системные настройки","\u002Fetc\u002Fhostname","-svf","\u002Fusr\u002Fshare\u002Fzoneinfo\u002FEurope\u002FMoscow","\u002Fetc\u002Flocaltime","\"en_US.UTF-8 UTF-8\"","\"ru_RU.UTF-8 UTF-8\"","locale-gen","\"LANG=ru_RU.UTF-8\"","\u002Fetc\u002Flocale.conf","\"KEYMAP=ru\"","\"FONT=cyr-sun16\"","Mkinitcpio","создаем-hosts","Создаем hosts","\u003C\u003C","EOF","включаем-интернет","Включаем интернет","устанавливаем-grub","Устанавливаем grub","--target=x86_64-efi","--efi-directory=\u002Fboot\u002Fefi","\u002Fetc\u002Fdefault\u002Fgrub","GRUB_CMDLINE_LINUX","rm","\u002Fboot\u002Fefi\u002Fstartup.nsh","Ssh","sshd","ssh -o ProxyCommand","efishell","Efishell","bcfg","авторизация","Авторизация",".ssh\u002Fid_rsa.pub","|","'mkdir -p ~\u002F.ssh && cat \u003E\u003E .ssh\u002Fauthorized_keys'","creio@192.168.1.35","перенос","Перенос","fstab","Fstab","lsblk -f\n","chroot","Chroot","дополнительный-диск","Дополнительный диск","cfdisk","рекомендации","Рекомендации","уменьшение-журнала-systemd","Уменьшение журнала Systemd","увеличить-tmp","Увеличить \u002Ftmp","-h","\u002Ftmp","Kexec","yay","-S","swapfile","Swapfile","none","ссылки","Ссылки","итог","Итог","style","markdown","content","md","Грузимся из под live-usb, устанавливаем ru язык и время.","timedatectl","set-ntp","true","подготовка-к-установке","Подготовка к установке","cryptlvm","home","\u002Fdev\u002Flvarch\u002Froot","\u002Fdev\u002Flvarch\u002Fhome","\u002Fdev\u002Flvarch\u002Fswap","установка-и-настройка","Установка и настройка","linux","passwd","st","резервное-копирование-luksheader","Резервное копирование luksHeader","--header-backup-file","openssl","enc","-aes-256-cbc","-in","-out"))