{"_path":"/posts/arch-lvm-luks","_dir":"posts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Установка Arch Linux на зашифрованный раздел, LVM на LUKS","description":"Грузимся из под live-usb, устанавливаем ru язык и время.","date":"2020-03-23T00:00:00.000Z","type":"post","tags":["archlinux","crypt"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Грузимся из под live-usb, устанавливаем ru язык и время."}]},{"type":"element","tag":"code","props":{"code":"loadkeys ru\nsetfont cyr-sun16\ntimedatectl set-ntp true\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"loadkeys"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"ru"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"setfont"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"cyr-sun16"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"timedatectl"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"set-ntp"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"true"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"подготовка-к-установке"},"children":[{"type":"text","value":"Подготовка к установке"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Создаем таблицу на диске MBR(DOS) и 2 первичных раздела."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"LUKS под root, swap, home"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"boot 512M, выставляем флаг boot"}]}]},{"type":"element","tag":"code","props":{"code":"cfdisk\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"cfdisk"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Шифруем, открываем раздел. Создаем контейнер."}]},{"type":"element","tag":"code","props":{"code":"# подтверждаем YES\ncryptsetup -y luksFormat --type luks2 /dev/sda1\ncryptsetup open /dev/sda1 cryptlvm\n\npvcreate /dev/mapper/cryptlvm\nvgcreate lvarch /dev/mapper/cryptlvm\n\nls -l /dev/mapper/cryptlvm\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-586243"},"children":[{"type":"text","value":"# подтверждаем YES"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"cryptsetup"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-y"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"luksFormat"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"--type"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"luks2"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/dev/sda1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"cryptsetup"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"open"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/dev/sda1"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"cryptlvm"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"pvcreate"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/dev/mapper/cryptlvm"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"vgcreate"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"lvarch"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/dev/mapper/cryptlvm"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"ls"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-l"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/dev/mapper/cryptlvm"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Создаём разделы lvm."}]},{"type":"element","tag":"code","props":{"code":"lvcreate -L 4G -n swap lvarch\nlvcreate -L 25G -n root lvarch\nlvcreate -l 100%FREE -n home lvarch\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"lvcreate"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"4G"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-n"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"swap"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"lvarch"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"lvcreate"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"25G"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-n"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"root"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"lvarch"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"lvcreate"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-l"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"100"}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"%FREE"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-n"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"home"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"lvarch"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Форматируем и включаем swap."}]},{"type":"element","tag":"code","props":{"code":"mkfs.ext2 -L boot /dev/sda2\nmkfs.ext4 -L root /dev/lvarch/root\nmkfs.ext4 -L home /dev/lvarch/home\nmkswap -L swap /dev/lvarch/swap\nswapon /dev/lvarch/swap\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"mkfs.ext2"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"boot"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/dev/sda2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"mkfs.ext4"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"root"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/dev/lvarch/root"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"mkfs.ext4"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"home"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/dev/lvarch/home"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"mkswap"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"swap"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/dev/lvarch/swap"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"swapon"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/dev/lvarch/swap"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Монтируем и создаем директории."}]},{"type":"element","tag":"code","props":{"code":"mount /dev/lvarch/root /mnt\nmkdir /mnt/{home,boot}\nmount /dev/lvarch/home /mnt/home\nmount /dev/sda2 /mnt/boot\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/dev/lvarch/root"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/mnt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/mnt/{home,boot}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/dev/lvarch/home"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/mnt/home"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/dev/sda2"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/mnt/boot"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"установка-и-настройка"},"children":[{"type":"text","value":"Установка и настройка"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Установка базовой системы и необходимых пакетов."}]},{"type":"element","tag":"code","props":{"code":"pacstrap /mnt base base-devel linux linux-headers linux-firmware lvm2 nano networkmanager bash-completion reflector htop openssh curl wget git rsync unzip unrar p7zip gnu-netcat pv\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"pacstrap"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/mnt"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"base"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"base-devel"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"linux"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"linux-headers"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"linux-firmware"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"lvm2"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"networkmanager"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"bash-completion"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"reflector"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"htop"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"openssh"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"wget"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"rsync"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"unzip"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"unrar"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"p7zip"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"gnu-netcat"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"pv"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Генерируем и правим, если нужно fstab, выполняем chroot."}]},{"type":"element","tag":"code","props":{"code":"genfstab -pU /mnt >> /mnt/etc/fstab\ncat /mnt/etc/fstab\n\narch-chroot /mnt\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"genfstab"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-pU"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/mnt"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-57b43a"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/mnt/etc/fstab"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/mnt/etc/fstab"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"arch-chroot"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/mnt"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Включаем multilib и сортируем зеркала."}]},{"type":"element","tag":"code","props":{"code":"sed -i \"/[multilib]/,/Include/\"'s/^#//' /etc/pacman.conf\n\nreflector -c \"Russia\" -c \"Belarus\" -c \"Ukraine\" -c \"Poland\" -f 20 -l 20 -p https -p http -n 20 --save /etc/pacman.d/mirrorlist --sort rate\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"sed"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-i"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"\"/[multilib]/,/Include/\"'s/^#//'"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/etc/pacman.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"reflector"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"\"Russia\""}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"\"Belarus\""}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"\"Ukraine\""}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"\"Poland\""}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-f"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-l"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"https"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"http"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-n"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"--save"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/etc/pacman.d/mirrorlist"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"--sort"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"rate"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Пароль root."}]},{"type":"element","tag":"code","props":{"code":"passwd\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"passwd"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Создаем пользователя st в нужных группах, назначаем пароль и включаем sudo."}]},{"type":"element","tag":"code","props":{"code":"useradd -m -g users -G \"adm,audio,log,network,rfkill,scanner,storage,optical,power,wheel\" -s /bin/bash -c \"Alex Creio\" st\n\npasswd st\n\necho \"%wheel ALL=(ALL) ALL\" >> /etc/sudoers\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"useradd"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-m"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-g"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"users"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-G"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"\"adm,audio,log,network,rfkill,scanner,storage,optical,power,wheel\""}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-s"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/bin/bash"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"\"Alex Creio\""}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"st"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"passwd"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"st"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"\"%wheel ALL=(ALL) ALL\""}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-57b43a"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/etc/sudoers"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Назначаем hostname: имя машины и часовой пояс, время."}]},{"type":"element","tag":"code","props":{"code":"echo \"ctlos\" > /etc/hostname\nln -svf /usr/share/zoneinfo/Europe/Moscow /etc/localtime\ntimedatectl set-ntp true\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"\"ctlos\""}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-57b43a"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/etc/hostname"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"ln"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-svf"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/usr/share/zoneinfo/Europe/Moscow"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/etc/localtime"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"timedatectl"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"set-ntp"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"true"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Генерируем локали и включаем русский язык системы."}]},{"type":"element","tag":"code","props":{"code":"echo \"en_US.UTF-8 UTF-8\" > /etc/locale.gen\necho \"ru_RU.UTF-8 UTF-8\" >> /etc/locale.gen\nlocale-gen\necho \"LANG=ru_RU.UTF-8\" > /etc/locale.conf\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"\"en_US.UTF-8 UTF-8\""}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-57b43a"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/etc/locale.gen"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"\"ru_RU.UTF-8 UTF-8\""}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-57b43a"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/etc/locale.gen"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"locale-gen"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"\"LANG=ru_RU.UTF-8\""}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-57b43a"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/etc/locale.conf"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Добавляем поддержку ru в консоле."}]},{"type":"element","tag":"code","props":{"code":"echo \"KEYMAP=ru\" >> /etc/vconsole.conf\necho \"FONT=cyr-sun16\" >> /etc/vconsole.conf\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"\"KEYMAP=ru\""}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-57b43a"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/etc/vconsole.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"\"FONT=cyr-sun16\""}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-57b43a"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/etc/vconsole.conf"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Добавляем хуки (порядок важен) и создаем загрузочный образ."}]},{"type":"element","tag":"code","props":{"code":"### добавить keyboard keymap encrypt lvm2\n# HOOKS=(base udev autodetect keyboard keymap modconf block encrypt lvm2 filesystems fsck)\nnano /etc/mkinitcpio.conf\n\nmkinitcpio -p linux\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-586243"},"children":[{"type":"text","value":"### добавить keyboard keymap encrypt lvm2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-586243"},"children":[{"type":"text","value":"# HOOKS=(base udev autodetect keyboard keymap modconf block encrypt lvm2 filesystems fsck)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/etc/mkinitcpio.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"mkinitcpio"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"linux"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Устанавливаем Grub."}]},{"type":"element","tag":"code","props":{"code":"pacman -S --noconfirm --needed grub\ngrub-install /dev/sda\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"pacman"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"--noconfirm"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"--needed"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"grub"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"grub-install"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/dev/sda"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Настраиваем и конфигурируем grub."}]},{"type":"element","tag":"code","props":{"code":"## узнаём UUID\nblkid /dev/sda1\n# /dev/sda1: UUID=\"c0868972-f314-48e1-9be5-3584826dbd64\" TYPE=\"crypto_LUKS\" PARTUUID=\"bbb93e39-01\"\n\nnano /etc/default/grub\n\n## Прописываем команду для старта и включаем.\nGRUB_CMDLINE_LINUX=\"cryptdevice=UUID=c0868972-f314-48e1-9be5-3584826dbd64:cryptlvm root=/dev/lvarch/root\"\nGRUB_ENABLE_CRYPTODISK=y\n\n## конфигурируем\ngrub-mkconfig -o /boot/grub/grub.cfg\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-586243"},"children":[{"type":"text","value":"## узнаём UUID"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"blkid"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/dev/sda1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-586243"},"children":[{"type":"text","value":"# /dev/sda1: UUID=\"c0868972-f314-48e1-9be5-3584826dbd64\" TYPE=\"crypto_LUKS\" PARTUUID=\"bbb93e39-01\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/etc/default/grub"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-586243"},"children":[{"type":"text","value":"## Прописываем команду для старта и включаем."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":"GRUB_CMDLINE_LINUX"}]},{"type":"element","tag":"span","props":{"class":"ct-57b43a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"\"cryptdevice=UUID=c0868972-f314-48e1-9be5-3584826dbd64:cryptlvm root=/dev/lvarch/root\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":"GRUB_ENABLE_CRYPTODISK"}]},{"type":"element","tag":"span","props":{"class":"ct-57b43a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"y"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-586243"},"children":[{"type":"text","value":"## конфигурируем"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"grub-mkconfig"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/boot/grub/grub.cfg"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Включаем необходимые сервисы."}]},{"type":"element","tag":"code","props":{"code":"systemctl enable NetworkManager\nsystemctl enable sshd\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"NetworkManager"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"sshd"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Выходим из chroot, отмонтируем разделы и закроем контейнер."}]},{"type":"element","tag":"code","props":{"code":"exit\numount -Rf /mnt\nvgchange -a n lvarch\ncryptsetup close cryptlvm\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"exit"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"umount"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-Rf"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/mnt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"vgchange"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-a"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"lvarch"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"cryptsetup"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"close"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"cryptlvm"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"резервное-копирование-luksheader"},"children":[{"type":"text","value":"Резервное копирование luksHeader"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Просмотр информации."}]},{"type":"element","tag":"code","props":{"code":"cryptsetup luksDump /dev/sda1\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"cryptsetup"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"luksDump"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/dev/sda1"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Обязательно создайте backup заголовка."}]}]},{"type":"element","tag":"code","props":{"code":"cryptsetup luksHeaderBackup /dev/sda1 --header-backup-file luksheader.bac\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"cryptsetup"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"luksHeaderBackup"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/dev/sda1"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"--header-backup-file"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"luksheader.bac"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Шифруем."}]},{"type":"element","tag":"code","props":{"code":"openssl enc -aes-256-cbc -salt -in luksheader.bac -out luksheader.bac.enc\nrm luksheader.bac\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"openssl"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"enc"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-aes-256-cbc"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-salt"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-in"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"luksheader.bac"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-out"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"luksheader.bac.enc"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"rm"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"luksheader.bac"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Расшифровываем."}]},{"type":"element","tag":"code","props":{"code":"openssl enc -d -aes-256-cbc -in luksheader.bac.enc -out luksheader.bac\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"openssl"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"enc"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-d"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-aes-256-cbc"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-in"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"luksheader.bac.enc"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"-out"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"luksheader.bac"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Восстанавливаем, подтверждаем: YES."}]},{"type":"element","tag":"code","props":{"code":"cryptsetup luksHeaderRestore --header-backup-file luksheader.bac /dev/sda1\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-980988"},"children":[{"type":"text","value":"cryptsetup"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"luksHeaderRestore"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-19fcfc"},"children":[{"type":"text","value":"--header-backup-file"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"luksheader.bac"}]},{"type":"element","tag":"span","props":{"class":"ct-e4a2f8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e33bcd"},"children":[{"type":"text","value":"/dev/sda1"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Сохраняем в надёжное место "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"luksheader.bac.enc"}]},{"type":"text","value":", например на usb."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.youtube.com/watch?v=sGIrre2OVt4&t=238s","rel":["nofollow"]},"children":[{"type":"text","value":"Стеганографируем и в публичный доступ (video)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Profit!"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-57b43a{color:#FF7B72}\n.ct-586243{color:#8B949E}\n.ct-19fcfc{color:#79C0FF}\n.ct-e33bcd{color:#A5D6FF}\n.ct-e4a2f8{color:#C9D1D9}\n.ct-980988{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"подготовка-к-установке","depth":2,"text":"Подготовка к установке"},{"id":"установка-и-настройка","depth":2,"text":"Установка и настройка"},{"id":"резервное-копирование-luksheader","depth":2,"text":"Резервное копирование luksHeader"}]}},"_type":"markdown","_id":"content:posts:arch-lvm-luks.md","_source":"content","_file":"posts/arch-lvm-luks.md","_extension":"md"}