{"_path":"/posts/oci","_dir":"posts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Установка Arch Linux в Oracle Cloud","description":"","date":"2021-03-22T00:00:00.000Z","type":"post","tags":["archlinux"],"body":{"type":"root","children":[{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"PS: У меня забанили аккаунт без предупреждения :)."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Существует такое предложение от Oracle Cloud, можно получить 2 сервера в минимальной комплектации навсегда и первые 30 дней тестирования более широкого функционала, нужно привязать карту с которой спишут примерно 1 евро(мне вернули практически сразу) и телефон. Доступные дистрибутивы на free тарифе: ubuntu, centos, oracle linux "},{"type":"element","tag":"a","props":{"href":"https://www.oracle.com/cloud/free/","rel":["nofollow"]},"children":[{"type":"text","value":"oracle.com/cloud/free/"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"После того, как я немного потрогал их кабинет задался целью развернуть у них Arch Linux, доступного образа у них нет, но я знаю о таком замечательном инструменте, как packer, все мои попытки запустить собранные packer-ом образы были не удачны. Образы практически на 100% уверен были в порядке, но я не знал как у них устроен efi загрузчик и не сообразил использовать Console Connection, об этом будет ниже "},{"type":"element","tag":"a","props":{"href":"https://www.packer.io/docs","rel":["nofollow"]},"children":[{"type":"text","value":"www.packer.io/docs"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Для тех кому интересно, как залить туда custom image. В меню, Object storage - Bucket, создайте bucket, а в него загрузите образ. После этого в меню, Custom Images можно импортировать файл из бакета и уже из него создать Instance(машину)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Спустя примерно месяц я решил еще раз попробовать это провернуть, но доступ к функционалу Custom Images был закрыт, но я размотал его немного иначе."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Интерфейс, практически везде есть сноски на документацию, которую можно перевести и детальней узнать о работе. Собственно так я и знакомился с функционалом кабинета, методом тыка. На данный момент он мне даже кажется весьма удобным."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"После создания машины(не важно какой), если в ней присутствует Файрвол, то открыть порты в нем мало, нужно еще открыть их в Default Security List. В меню, Networking - Virtual Cloud Networks - vcn-id - Security Lists - Default Security List vor vcn-id, иначе порты не будут доступны. Простыми словами их нужно открыть, как в Default Security List, так и на самой машине, при наличии Файрвола."}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://stackoverflow.com/questions/54794217/opening-port-80-on-oracle-cloud-infrastructure-compute-node","rel":["nofollow"]},"children":[{"type":"text","value":"stackoverflow.com"}]}]}]},{"type":"element","tag":"h2","props":{"id":"генерация-ключей"},"children":[{"type":"text","value":"Генерация ключей"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Локально создайте ssh ключи, если еще не сделали этого."}]},{"type":"element","tag":"code","props":{"code":"ssh-keygen -t rsa -b 4096 -C \"ctlos@protonmail.com\"\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"ssh-keygen"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"rsa"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-b"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"4096"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-C"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"ctlos@protonmail.com\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ключи упадут в "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/.ssh"}]},{"type":"text","value":". При создании instance(машины), импортируйте публичный ключ "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"id_rsa.pub"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"oracle-cloud"},"children":[{"type":"text","value":"Oracle Cloud"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Создать минимальную машинку free, oracle linux 7.9, именно в ней будет swap раздел на 8G, который мы будем использовать для трансфера. Я не трогал настройки по умолчанию при создании. Авторизуемся на машине по ssh."}]},{"type":"element","tag":"h2","props":{"id":"arch-bootstrap"},"children":[{"type":"text","value":"Arch bootstrap"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Методы описаны в вики archlinux "},{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/Install_Arch_Linux_from_existing_Linux#Method_A:_Using_the_bootstrap_image_(recommended)","rel":["nofollow"]},"children":[{"type":"text","value":"wiki.archlinux.org"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Копируем ссылку на bootstrap .tar.gz. Скачиваем и раскрываем архив в корень "},{"type":"element","tag":"a","props":{"href":"http://mirrors.evowise.com/archlinux/iso/latest/","rel":["nofollow"]},"children":[{"type":"text","value":"http://mirrors.evowise.com/"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"# под root\ncd /\nwget http://mirrors.evowise.com/archlinux/iso/latest/archlinux-bootstrap-2021.03.01-x86_64.tar.gz\ntar xzf /archlinux-bootstrap-*-x86_64.tar.gz\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# под root"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"wget"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"http://mirrors.evowise.com/archlinux/iso/latest/archlinux-bootstrap-2021.03.01-x86_64.tar.gz"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"tar"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"xzf"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/archlinux-bootstrap-"}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"-x86_64.tar.gz"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Отмонтировать swap он 8G, форматировать его в нужную фс(btrfs/ext4). В моем случае структура разделов."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"/dev/sda1 boot, точка монтирования /boot/efi."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"/dev/sda2 swap(8G), его использую для трансфера."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"/dev/sda3 root(39G). На данный момент я тут с Oracle linux, в конце тут будет Arch с lts ядром."}]}]},{"type":"element","tag":"code","props":{"code":"lsblk -f\nswapoff -a\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"lsblk"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-f"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"swapoff"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-a"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Теперь выполняем chroot в bootstrap, в нем выполняем дальнейшие действия. Его разворачиваем для доступа к pacstrap и arch-chroot, основная и единственная задача. Он сам смонтирует нужные бинды, но нужно еще выполнить pacman init и раскомментировать зеркала(первые 3 Worldwide "},{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/Install_Arch_Linux_from_existing_Linux#Using_a_chroot_environment","rel":["nofollow"]},"children":[{"type":"text","value":"Using_a_chroot_environment"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"nano /root.x86_64/etc/pacman.d/mirrorlist\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/root.x86_64/etc/pacman.d/mirrorlist"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"ls /\n\n/root.x86_64/bin/arch-chroot /root.x86_64\n\npacman-key --init\npacman-key --populate\npacman -Syy\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"ls"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"/root.x86_64/bin/arch-chroot"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/root.x86_64"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"pacman-key"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"--init"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"pacman-key"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"--populate"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"pacman"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-Syy"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"монтирование-pacstrap"},"children":[{"type":"text","value":"Монтирование pacstrap"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Форматируем, создаем нужные директории, снапшоты, монтируем. Обратите внимание boot я не форматирую, а просто перемонтирую и удалю из него загрузчик /boot/efi/EFI/redhat."}]},{"type":"element","tag":"code","props":{"code":"mkfs.btrfs -f -L \"root\" /dev/sda2\nmount /dev/sda2 /mnt\n\nbtrfs subvolume create /mnt/@\nbtrfs subvolume create /mnt/@home\nbtrfs subvolume create /mnt/@snapshots\n\numount /mnt\n\nmount -o subvol=@,compress=lzo,relatime,space_cache,autodefrag /dev/sda2 /mnt\nmkdir -p /mnt/{boot/efi,home,snapshots}\nmount -o subvol=@home,compress=lzo,relatime,space_cache,autodefrag /dev/sda2 /mnt/home\nmount -o subvol=@snapshots,compress=lzo,relatime,space_cache,autodefrag /dev/sda2 /mnt/snapshots\n\numount /dev/sda1\nmount /dev/sda1 /mnt/boot/efi\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"mkfs.btrfs"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-f"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"root\""}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/dev/sda2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/dev/sda2"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"btrfs"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"subvolume"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt/@"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"btrfs"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"subvolume"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt/@home"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"btrfs"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"subvolume"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt/@snapshots"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"umount"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"subvol=@,compress=lzo,relatime,space_cache,autodefrag"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/dev/sda2"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt/{boot/efi,home,snapshots}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"subvol=@home,compress=lzo,relatime,space_cache,autodefrag"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/dev/sda2"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt/home"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"subvol=@snapshots,compress=lzo,relatime,space_cache,autodefrag"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/dev/sda2"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt/snapshots"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"umount"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/dev/sda1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/dev/sda1"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt/boot/efi"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Разворачиваем будущую систему с нужными пакетами, некоторые из них очень важны. Генерируем fstab и выполняем еще один chroot(да-да)."}]},{"type":"element","tag":"code","props":{"code":"pacstrap /mnt base base-devel linux-lts linux-lts-headers btrfs-progs nano grub efibootmgr iproute2 iputils rng-tools open-iscsi arch-install-scripts pacman-contrib reflector openssh wget git rsync gnu-netcat pv unzip unrar p7zip zsh htop tmux psmisc procps-ng\ngenfstab -pU /mnt >> /mnt/etc/fstab\narch-chroot /mnt\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"pacstrap"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"base"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"base-devel"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"linux-lts"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"linux-lts-headers"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"btrfs-progs"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"grub"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"efibootmgr"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"iproute2"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"iputils"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"rng-tools"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"open-iscsi"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"arch-install-scripts"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"pacman-contrib"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"reflector"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"openssh"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"wget"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"rsync"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"gnu-netcat"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"pv"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"unzip"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"unrar"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"p7zip"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"zsh"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"htop"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"tmux"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"psmisc"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"procps-ng"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"genfstab"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-pU"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt/etc/fstab"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"arch-chroot"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"init-pacman"},"children":[{"type":"text","value":"Init pacman"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Проинициализируем pacman, отсортируем зеркала и включаем mitilib репозиторий."}]},{"type":"element","tag":"code","props":{"code":"reflector -a 12 -l 30 -f 30 -p https,http --sort rate --save /etc/pacman.d/mirrorlist\npacman-key --init\npacman-key --populate\n\nsed -i \"/[multilib]/,/Include/\"'s/^#//' /etc/pacman.conf\npacman -Syy --noconfirm\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"reflector"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-a"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"12"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-l"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"30"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-f"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"30"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"https,http"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"--sort"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"rate"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"--save"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/etc/pacman.d/mirrorlist"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"pacman-key"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"--init"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"pacman-key"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"--populate"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"sed"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-i"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"/[multilib]/,/Include/\"'s/^#//'"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/etc/pacman.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"pacman"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-Syy"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"--noconfirm"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"добавление-пользователя"},"children":[{"type":"text","value":"Добавление пользователя"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Назначим рут пароль, добавляем пользователя с нужными группами, включаем ему zsh. Назначаем пароль пользователю и включаем sudo."}]},{"type":"element","tag":"code","props":{"code":"usermod -p 123 root\n\nuseradd -m -g users -G \"log,network,storage,power,wheel\" -s /bin/zsh creio\nusermod -p 123 creio\necho \"%wheel ALL=(ALL) ALL\" >> /etc/sudoers\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"usermod"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"123"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"root"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"useradd"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-m"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-g"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"users"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-G"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"log,network,storage,power,wheel\""}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-s"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/bin/zsh"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"creio"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"usermod"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"123"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"creio"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"%wheel ALL=(ALL) ALL\""}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/etc/sudoers"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"системные-настройки"},"children":[{"type":"text","value":"Системные настройки"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Назначаем имя машины, часовой пояс, локали и русский шрифт в консоли."}]},{"type":"element","tag":"code","props":{"code":"echo cloud > /etc/hostname\n\nln -svf /usr/share/zoneinfo/Europe/Moscow /etc/localtime\nhwclock --systohc --utc\n\necho \"en_US.UTF-8 UTF-8\" > /etc/locale.gen\necho \"ru_RU.UTF-8 UTF-8\" >> /etc/locale.gen\nlocale-gen\n\necho \"LANG=ru_RU.UTF-8\" > /etc/locale.conf\necho \"KEYMAP=ru\" > /etc/vconsole.conf\necho \"FONT=cyr-sun16\" >> /etc/vconsole.conf\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"cloud"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/etc/hostname"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"ln"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-svf"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/usr/share/zoneinfo/Europe/Moscow"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/etc/localtime"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"hwclock"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"--systohc"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"--utc"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"en_US.UTF-8 UTF-8\""}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/etc/locale.gen"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"ru_RU.UTF-8 UTF-8\""}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/etc/locale.gen"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"locale-gen"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"LANG=ru_RU.UTF-8\""}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/etc/locale.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"KEYMAP=ru\""}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/etc/vconsole.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"FONT=cyr-sun16\""}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/etc/vconsole.conf"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"mkinitcpio"},"children":[{"type":"text","value":"Mkinitcpio"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Изменить строку HOOKS в файле /etc/mkinitcpio.conf, должно быть так. Важно! Не знаю почему, но с хуком udev отказывается стартовать init, поэтому обязательно замените его на systemd и удаляю fsck, так как btrfs."}]},{"type":"element","tag":"code","props":{"code":"HOOKS=(base systemd autodetect modconf block filesystems keyboard keymap)\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"HOOKS"}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"base"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" systemd autodetect modconf block filesystems keyboard keymap)"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Обновить initramfs."}]},{"type":"element","tag":"code","props":{"code":"mkinitcpio -P\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"mkinitcpio"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-P"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Если проебали с хуком, то попадете в rootfs и можно принудительно назначить инит и включить его."}]},{"type":"element","tag":"code","props":{"code":"ln -s /lib/systemd/systemd /new_root/bin/init\n\nexec switch_root /new_root /bin/init\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"ln"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-s"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/lib/systemd/systemd"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/new_root/bin/init"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"exec"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"switch_root"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/new_root"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/bin/init"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"создаем-hosts"},"children":[{"type":"text","value":"Создаем hosts"}]},{"type":"element","tag":"code","props":{"code":"cat <<EOF >/etc/hosts\n127.0.0.1       localhost\n::1             localhost\n127.0.1.1       cloud.localdomain cloud\nEOF\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"EOF >/etc/hosts"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"127.0.0.1       localhost"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"::1             localhost"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"127.0.1.1       cloud.localdomain cloud"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"EOF"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"включаем-интернет"},"children":[{"type":"text","value":"Включаем интернет"}]},{"type":"element","tag":"code","props":{"code":"cat <<EOF >/etc/systemd/network/20-ethernet.network\n[Match]\nName=en*\nName=eth*\n\n[Network]\nDHCP=yes\nEOF\n\nsystemctl enable systemd-networkd\nsystemctl enable systemd-resolved\n# Workaround for https://bugs.archlinux.org/task/58355\nsystemctl enable rngd\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"EOF >/etc/systemd/network/20-ethernet.network"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"[Match]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"Name=en*"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"Name=eth*"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"[Network]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"DHCP=yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"EOF"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"systemd-networkd"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"systemd-resolved"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# Workaround for https://bugs.archlinux.org/task/58355"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"rngd"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"устанавливаем-grub"},"children":[{"type":"text","value":"Устанавливаем grub"}]},{"type":"element","tag":"code","props":{"code":"grub-install --target=x86_64-efi --efi-directory=/boot/efi\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"grub-install"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"--target=x86_64-efi"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"--efi-directory=/boot/efi"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Grub.cfg приводим к такому виду, все остальное закомментировано(#)"}]},{"type":"element","tag":"code","props":{"code":"nano /etc/default/grub\n\nGRUB_DEFAULT=0\nGRUB_TIMEOUT=0\nGRUB_DISTRIBUTOR=\"Arch\"\nGRUB_CMDLINE_LINUX_DEFAULT=\"console=tty1 console=ttyS0 nvme.shutdown_timeout=10 libiscsi.debug_libiscsi_eh=1 quiet\"\nGRUB_CMDLINE_LINUX=\"\"\nGRUB_PRELOAD_MODULES=\"part_gpt part_msdos\"\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/etc/default/grub"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"GRUB_DEFAULT"}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"GRUB_TIMEOUT"}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"GRUB_DISTRIBUTOR"}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"Arch\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"GRUB_CMDLINE_LINUX_DEFAULT"}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"console=tty1 console=ttyS0 nvme.shutdown_timeout=10 libiscsi.debug_libiscsi_eh=1 quiet\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"GRUB_CMDLINE_LINUX"}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"GRUB_PRELOAD_MODULES"}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"part_gpt part_msdos\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Генерируем конфиг grub."}]},{"type":"element","tag":"code","props":{"code":"grub-mkconfig -o /boot/grub/grub.cfg\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"grub-mkconfig"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/boot/grub/grub.cfg"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Удаляем дефолт загрузчик."}]},{"type":"element","tag":"code","props":{"code":"rm -rf /mnt/boot/efi/EFI/redhat\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"rm"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-rf"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt/boot/efi/EFI/redhat"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Так как мы снесли дефолтный загрузчик, нужно подсунуть нужный файл efi для автоматической загрузки."}]},{"type":"element","tag":"code","props":{"code":"echo \"EFIarchgrubx64.efi\" > /boot/efi/startup.nsh\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"EFIarchgrubx64.efi\""}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/boot/efi/startup.nsh"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"ssh"},"children":[{"type":"text","value":"Ssh"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Раскомментируем строки и приведем их к такому виду."}]},{"type":"element","tag":"code","props":{"code":"nano /etc/ssh/sshd_config\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/etc/ssh/sshd_config"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"PermitRootLogin yes\nPubkeyAuthentication yes\nPasswordAuthentication yes\nUseDNS no\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"PermitRootLogin"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"PubkeyAuthentication"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"PasswordAuthentication"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"UseDNS"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"no"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Включаем сервис."}]},{"type":"element","tag":"code","props":{"code":"systemctl enable sshd\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"sshd"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Выходим из chroot раздела(sda2) "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"exit"}]},{"type":"text","value":". Отмантируем разделы."}]},{"type":"element","tag":"code","props":{"code":"umount -R /mnt\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"umount"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-R"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"И еще раз exit выходим из archlinux-bootstrap(/root.x86_64)."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Следующий шаг важен, он мне сильно помог в отладке, так как доступ получаем выше самой машины, очень удобно."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Перейдите в нужный instance и создайте на вкладке Console Connection подключение ssh, импортируйте открытый ключid_rsa.pub. После активации подключения в меню(3 точки справа) скопируйте Copy Serial Console Connection for Linux/Mac данные, вставьте данные из буфера в новый терминал."}]},{"type":"element","tag":"code","props":{"code":"ssh -o ProxyCommand='ssh -W %h:%p -p 443 ocid1.instnection.oc1.eu-frankfurt-1.antheljtuhavnyqwertyrey@instance-console.eu-frankfurt-1.oraclecloud.com' ocid1.instance.oc1.eu-frankfurt-1.qwretfhjczsdfetrydfgdfsfd\n\n# прожать Enter\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"ssh"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"ProxyCommand='ssh -W %h:%p -p 443 ocid1.instnection.oc1.eu-frankfurt-1.antheljtuhavnyqwertyrey@instance-console.eu-frankfurt-1.oraclecloud.com'"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"ocid1.instance.oc1.eu-frankfurt-1.qwretfhjczsdfetrydfgdfsfd"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# прожать Enter"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В исходном терминале, перезагружаем машину."}]},{"type":"element","tag":"code","props":{"code":"systemctl reboot\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"reboot"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В терминале с "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ssh -o ProxyCommand"}]},{"type":"text","value":" должны увидеть efi меню, которое выполнит скрипт "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/boot/efi/startup.nsh"}]},{"type":"text","value":"(5 секунд) и запустит grub, grub не увидим, так как он выставлен в 0."}]},{"type":"element","tag":"h3","props":{"id":"efishell"},"children":[{"type":"text","value":"Efishell"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Если что-то выполнили не так увидите "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"efishell>"}]},{"type":"text","value":", некоторые команды."}]},{"type":"element","tag":"code","props":{"code":"# карта\nmap\n# меню\nbcfg boot dump\n# переход в раздел\nFS0:\n# посмотреть созданный efi файл\nls EFIarch\n# запустить\nEFIarchgrubx64.efi\n# выход в псевдографику\nexit\n# добавляет пунк, работает до ребута\nbcfg boot add 0 FS0:EFIarchgrubx64.efi \"Arch lts\"\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# карта"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"map"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# меню"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"bcfg"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"boot"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"dump"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# переход в раздел"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"FS0:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# посмотреть созданный efi файл"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"ls"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"EFIarch"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# запустить"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"EFIarchgrubx64.efi"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# выход в псевдографику"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"exit"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# добавляет пунк, работает до ребута"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"bcfg"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"boot"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"FS0:EFIarchgrubx64.efi"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"Arch lts\""}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Именно по причине того, что загрузчик слетает и используется /boot/efi/startup.nsh, именно поэтому и не стартовал мой custom image о котором я говорил в начале."}]}]},{"type":"element","tag":"h2","props":{"id":"авторизация"},"children":[{"type":"text","value":"Авторизация"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Если все нормально, копируем ключ в root-а и юзера, в моем случае creio."}]},{"type":"element","tag":"code","props":{"code":"cat .ssh/id_rsa.pub | ssh root@192.168.1.35 'mkdir -p ~/.ssh && cat >> .ssh/authorized_keys'\ncat .ssh/id_rsa.pub | ssh creio@192.168.1.35 'mkdir -p ~/.ssh && cat >> .ssh/authorized_keys'\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":".ssh/id_rsa.pub"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"ssh"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"root@192.168.1.35"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"'mkdir -p ~/.ssh && cat >> .ssh/authorized_keys'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":".ssh/id_rsa.pub"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"ssh"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"creio@192.168.1.35"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"'mkdir -p ~/.ssh && cat >> .ssh/authorized_keys'"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Выполняем вход."}]},{"type":"element","tag":"code","props":{"code":"ssh creio@192.168.1.35\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"ssh"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"creio@192.168.1.35"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Должны увидеть меню zsh, нажать 0."}]},{"type":"element","tag":"h2","props":{"id":"перенос"},"children":[{"type":"text","value":"Перенос"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Форматируем и монтируем sda3. Создаем снапшоты."}]},{"type":"element","tag":"code","props":{"code":"lsblk -f\nmkfs.btrfs -f -L \"root\" /dev/sda3\nmount /dev/sda3 /mnt\n\nbtrfs subvolume create /mnt/@\nbtrfs subvolume create /mnt/@home\nbtrfs subvolume create /mnt/@snapshots\n\numount /mnt\n\nmount -o subvol=@,compress=lzo,relatime,space_cache,autodefrag /dev/sda3 /mnt\nmkdir -p /mnt/{boot/efi,home,snapshots}\nmount -o subvol=@home,compress=lzo,relatime,space_cache,autodefrag /dev/sda3 /mnt/home\nmount -o subvol=@snapshots,compress=lzo,relatime,space_cache,autodefrag /dev/sda3 /mnt/snapshots\n\numount /dev/sda1\nmount /dev/sda1 /mnt/boot/efi\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"lsblk"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-f"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"mkfs.btrfs"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-f"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"root\""}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/dev/sda3"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/dev/sda3"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"btrfs"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"subvolume"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt/@"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"btrfs"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"subvolume"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt/@home"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"btrfs"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"subvolume"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt/@snapshots"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"umount"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"subvol=@,compress=lzo,relatime,space_cache,autodefrag"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/dev/sda3"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt/{boot/efi,home,snapshots}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"subvol=@home,compress=lzo,relatime,space_cache,autodefrag"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/dev/sda3"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt/home"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"subvol=@snapshots,compress=lzo,relatime,space_cache,autodefrag"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/dev/sda3"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt/snapshots"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"umount"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/dev/sda1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/dev/sda1"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt/boot/efi"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Копируем текущий корень в /mnt."}]},{"type":"element","tag":"code","props":{"code":"rsync -cauv --info=stats2 --exclude={\"/dev/*\",\"/proc/*\",\"/sys/*\",\"/tmp/*\",\"/run/*\",\"/mnt/*\",\"/media/*\",\"/lost+found\",\"/var/lib/pacman/sync/*\",\"/var/cache/*\",\"/var/tmp/*\"} /* /mnt/\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"rsync"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-cauv"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"--info=stats2"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"--exclude="}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"/dev/*\""}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"/proc/*\""}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"/sys/*\""}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"/tmp/*\""}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"/run/*\""}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"/mnt/*\""}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"/media/*\""}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"/lost+found\""}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"/var/lib/pacman/sync/*\""}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"/var/cache/*\""}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"\"/var/tmp/*\""}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"} /"}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" /mnt/"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"fstab"},"children":[{"type":"text","value":"Fstab"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Узнаем UUID разделов."}]},{"type":"element","tag":"code","props":{"code":"lsblk -f\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"lsblk"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-f"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Изменить fstab, nano /mnt/etc/fstab. Загрузчик не изменился, только UUID субволумов."}]},{"type":"element","tag":"code","props":{"code":"# /dev/sda1\nUUID=2138-EC84                               /boot/efi      vfat    defaults  0 0\n\n# /dev/sda3\nUUID=39b2a28d-3890-425b-8152-fed18a73fdcd    /              btrfs   subvol=@,defaults,noatime,space_cache,autodefrag 0 0\n\n# /dev/sda3\nUUID=39b2a28d-3890-425b-8152-fed18a73fdcd    /home          btrfs   subvol=@home,defaults,noatime,space_cache,autodefrag 0 0\n\n# /dev/sda3\nUUID=39b2a28d-3890-425b-8152-fed18a73fdcd    /snapshots     btrfs   subvol=@snapshots,defaults,noatime,space_cache,autodefrag 0 0\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# /dev/sda1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"UUID"}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"2138"}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"-EC84"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"                               /boot/efi      vfat    defaults  "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# /dev/sda3"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"UUID"}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"39b2a28d-"}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"3890"}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"-425b-"}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"8152"}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"-fed18a73fdcd"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"    /              btrfs   subvol"}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"@,defaults,noatime,space_cache,autodefrag"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# /dev/sda3"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"UUID"}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"39b2a28d-"}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"3890"}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"-425b-"}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"8152"}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"-fed18a73fdcd"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"    /home          btrfs   subvol"}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"@home,defaults,noatime,space_cache,autodefrag"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# /dev/sda3"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"UUID"}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"39b2a28d-"}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"3890"}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"-425b-"}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"8152"}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"-fed18a73fdcd"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"    /snapshots     btrfs   subvol"}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"@snapshots,defaults,noatime,space_cache,autodefrag"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"0"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"chroot"},"children":[{"type":"text","value":"Chroot"}]},{"type":"element","tag":"code","props":{"code":"arch-chroot /mnt\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"arch-chroot"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Переустановим и сконфигурируем grub."}]},{"type":"element","tag":"code","props":{"code":"grub-install --target=x86_64-efi --efi-directory=/boot/efi\n\ngrub-mkconfig -o /boot/grub/grub.cfg\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"grub-install"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"--target=x86_64-efi"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"--efi-directory=/boot/efi"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"grub-mkconfig"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/boot/grub/grub.cfg"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Посмотрим на правильность UUID. Везде должен быть id sda3."}]},{"type":"element","tag":"code","props":{"code":"cat /boot/grub/grub.cfg\n\nlsblk -f\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/boot/grub/grub.cfg"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"lsblk"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-f"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Выходим из chroot, отмонтируем, ребут."}]},{"type":"element","tag":"code","props":{"code":"exit\numount -R /mnt\nsystemctl reboot\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"exit"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"umount"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-R"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/mnt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"reboot"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Опять, можем запустить "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ssh -o ProxyCommand"}]},{"type":"text","value":"(прожать Enter) и наблюдать за работой efi, если все ровно, выполняем вход. Теперь можно отформатировать sda2 в swap и подключить его в fstab."}]},{"type":"element","tag":"code","props":{"code":"mkswap /dev/sda2\nswapon /dev/sda2\nswapon --show\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"mkswap"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/dev/sda2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"swapon"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/dev/sda2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"swapon"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"--show"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"lsblk -f\n\nnano /etc/fstab\n\n# добавить в конец с новой строки\n# /dev/sda2\nUUID=6a1059e2-6fd0-4894-bb14-53ff59754145    none           swap    defaults    0 0\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"lsblk"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-f"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/etc/fstab"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# добавить в конец с новой строки"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# /dev/sda2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"UUID"}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"6a1059e2-6fd0-"}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"4894"}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"-bb14-53ff59754145"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"    none           swap    defaults    "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"0"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"дополнительный-диск"},"children":[{"type":"text","value":"Дополнительный диск"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Отредактируйте файл "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/iscsi/iscsid.conf"}]},{"type":"text","value":", как указано в help "},{"type":"element","tag":"a","props":{"href":"https://docs.oracle.com/en-us/iaas/Content/Block/Concepts/iscsiinformation.htm","rel":["nofollow"]},"children":[{"type":"text","value":"iscsiinformation.htm"}]},{"type":"text","value":". На вкладке boot volumes можно создать дополнительный диск, клонировать существующий. После этого добавить на машине в автостарт и запустить сервис."}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl enable --now iscsid\n# включаем авторизацию\nsudo systemctl enable iscsi\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"--now"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"iscsid"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# включаем авторизацию"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"iscsi"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Зайти в свой Instances и в левом меню на вкладку Attached Block Volumes, присоединить клонированный диск, когда он перейдет в состояние Attached в правом меню открыть пункт iSCSI Commands & Information. Скопировать 3 команды(iscsiadm) на подключение и выполнить их на своей машине(по строчно) от пользователя."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В поле ниже, соответственно команды на отключение."}]},{"type":"element","tag":"code","props":{"code":"lsblk -f\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"lsblk"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-f"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Форматируем данный диск на свое усмотрение и прописываем, если нужно в fstab."}]},{"type":"element","tag":"code","props":{"code":"# создаем таблицу и раздел/разделы\nsudo cfdisk -z /dev/sdb\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# создаем таблицу и раздел/разделы"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"cfdisk"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-z"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/dev/sdb"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Я выбрал gpt, затем создал раздел по умолчанию на все пространство(46,6G), enter - enter - enter, курсор вправо(записать) - yes - enter, курсор влево(выход). Форматируем в ext4 с меткой files."}]},{"type":"element","tag":"code","props":{"code":"sudo mkfs.ext4 /dev/sdb1 -L files\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"mkfs.ext4"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/dev/sdb1"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"files"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Добавляю в fstab."}]},{"type":"element","tag":"code","props":{"code":"sudo mkdir -p /media/files\nlsblk -f\nsudo nano /etc/fstab\n\n# /dev/sdb1\nUUID=702c830e-efb9-403d-bdfc-b3a969d44b1f    /media/files   ext4    defaults,_netdev,x-systemd.requires=iscsid.service  0 1\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/media/files"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"lsblk"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-f"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/etc/fstab"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# /dev/sdb1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"UUID"}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"702c830e-efb9-403d-bdfc-b3a969d44b1f"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"    /media/files   ext4    defaults,_netdev,x-systemd.requires"}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"iscsid.service"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"1"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Перезагружаюсь и вижу по пути "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/media/files"}]},{"type":"text","value":" чистый раздел, под любые нужды."}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl reboot\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"reboot"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Дадим полные права в директорию для юзера."}]},{"type":"element","tag":"code","props":{"code":"sudo chown -R $(whoami):users /media/files\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"chown"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-R"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"$("}]},{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"whoami"}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"):users"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/media/files"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Вы наверно догадались, что можно было сразу подключить второй диск и развернуть на него, тем самым опустить момент с переносом раздела(rsync), я это специально сделал, чтобы показать больше."}]}]},{"type":"element","tag":"h2","props":{"id":"рекомендации"},"children":[{"type":"text","value":"Рекомендации"}]},{"type":"element","tag":"h3","props":{"id":"уменьшение-журнала-systemd"},"children":[{"type":"text","value":"Уменьшение журнала Systemd"}]},{"type":"element","tag":"code","props":{"code":"sudo nano /etc/systemd/journald.conf\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/etc/systemd/journald.conf"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Раскомментировать и изменить строку."}]},{"type":"element","tag":"code","props":{"code":"SystemMaxUse=100M\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"SystemMaxUse"}]},{"type":"element","tag":"span","props":{"class":"ct-a42183"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"100M"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Перезапустите сервис."}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl restart systemd-journald.service\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"systemd-journald.service"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"увеличить-tmp"},"children":[{"type":"text","value":"Увеличить /tmp"}]},{"type":"element","tag":"code","props":{"code":"df -h /tmp\n\nsudo mount -o remount,size=2G /tmp\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"df"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-h"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/tmp"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"remount,size=2G"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/tmp"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"kexec"},"children":[{"type":"text","value":"Kexec"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Это полезно при обновлении ядра, можно очень быстро перезагрузить его, не дожидаясь завершения всего процесса загрузки BIOS. Наглядно видно, при доступном обновление ядра "},{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/Kexec","rel":["nofollow"]},"children":[{"type":"text","value":"wiki.archlinux.org/index.php/Kexec"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"yay -S kexec-tools\n# версия ядра\nuname -a\n# полное обновление\nyay -Syyuu\n# загрузка нового ядра\nsudo kexec -l /boot/vmlinuz-linux-lts --initrd=/boot/initramfs-linux-lts.img --reuse-cmdline\n# частичный ребут\nsudo systemctl kexec\n# справка\nsudo kexec -h\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"kexec-tools"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# версия ядра"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"uname"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-a"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# полное обновление"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-Syyuu"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# загрузка нового ядра"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"kexec"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-l"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/boot/vmlinuz-linux-lts"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"--initrd=/boot/initramfs-linux-lts.img"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"--reuse-cmdline"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# частичный ребут"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"kexec"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ab3b6"},"children":[{"type":"text","value":"# справка"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"kexec"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-h"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"swapfile"},"children":[{"type":"text","value":"Swapfile"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Можно отключить раздел swap и использовать файл на 4G в btrfs."}]},{"type":"element","tag":"code","props":{"code":"truncate -s 0 /swapfile\nchattr +C /swapfile\nbtrfs property set /swapfile compression none\nfallocate /swapfile -l4g\nchmod 600 /swapfile\nmkswap /swapfile\nlsattr /swapfile\nswapon /swapfile\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"truncate"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-s"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/swapfile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"chattr"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"+C"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/swapfile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"btrfs"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"property"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/swapfile"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"compression"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"none"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"fallocate"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/swapfile"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"-l4g"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"chmod"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"600"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/swapfile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"mkswap"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/swapfile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"lsattr"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/swapfile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"swapon"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/swapfile"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Закомментировать раздел swap и добавить строку с файлом."}]},{"type":"element","tag":"code","props":{"code":"sudo nano /etc/fstab\n\n/swapfile      none      swap      defaults    0 0\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"/etc/fstab"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4705d5"},"children":[{"type":"text","value":"/swapfile"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"none"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"swap"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-6d4554"},"children":[{"type":"text","value":"defaults"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-54bd9b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c5b6c"},"children":[{"type":"text","value":"0"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"ссылки"},"children":[{"type":"text","value":"Ссылки"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/posts/zsh-config"},"children":[{"type":"text","value":"Настройка zsh"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/creio/dots","rel":["nofollow"]},"children":[{"type":"text","value":"Еще некоторые конфиги и скрипты в моем репозитории"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/posts/vpn"},"children":[{"type":"text","value":"VPN сервер в Linux"}]}]}]},{"type":"element","tag":"h2","props":{"id":"итог"},"children":[{"type":"text","value":"Итог"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Таким способом можно переделать любую систему и практически на любом облачном решении, главное знать детали загрузки и хорошо бы иметь ssh подключение выше, как тут (Console connection), или некий режим восстановления. Если Вам понравился мой бред:) по этому поводу, то поблагодарить меня можно тут."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://ctlos.github.io/donat/","rel":["nofollow"]},"children":[{"type":"text","value":"ctlos.github.io/donat"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Вступай в чат "},{"type":"element","tag":"a","props":{"href":"https://telegram.me/ctlos","rel":["nofollow"]},"children":[{"type":"text","value":"@ctlos"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Всем Добра."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-a42183{color:#FF7B72}\n.ct-4ab3b6{color:#8B949E}\n.ct-6d4554{color:#A5D6FF}\n.ct-1c5b6c{color:#79C0FF}\n.ct-54bd9b{color:#C9D1D9}\n.ct-4705d5{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"генерация-ключей","depth":2,"text":"Генерация ключей"},{"id":"oracle-cloud","depth":2,"text":"Oracle Cloud"},{"id":"arch-bootstrap","depth":2,"text":"Arch bootstrap"},{"id":"монтирование-pacstrap","depth":2,"text":"Монтирование pacstrap"},{"id":"init-pacman","depth":2,"text":"Init pacman"},{"id":"добавление-пользователя","depth":2,"text":"Добавление пользователя"},{"id":"системные-настройки","depth":2,"text":"Системные настройки"},{"id":"mkinitcpio","depth":2,"text":"Mkinitcpio"},{"id":"создаем-hosts","depth":2,"text":"Создаем hosts"},{"id":"включаем-интернет","depth":2,"text":"Включаем интернет"},{"id":"устанавливаем-grub","depth":2,"text":"Устанавливаем grub"},{"id":"ssh","depth":2,"text":"Ssh","children":[{"id":"efishell","depth":3,"text":"Efishell"}]},{"id":"авторизация","depth":2,"text":"Авторизация"},{"id":"перенос","depth":2,"text":"Перенос"},{"id":"fstab","depth":2,"text":"Fstab"},{"id":"chroot","depth":2,"text":"Chroot"},{"id":"дополнительный-диск","depth":2,"text":"Дополнительный диск"},{"id":"рекомендации","depth":2,"text":"Рекомендации","children":[{"id":"уменьшение-журнала-systemd","depth":3,"text":"Уменьшение журнала Systemd"},{"id":"увеличить-tmp","depth":3,"text":"Увеличить /tmp"},{"id":"kexec","depth":3,"text":"Kexec"},{"id":"swapfile","depth":3,"text":"Swapfile"},{"id":"ссылки","depth":3,"text":"Ссылки"}]},{"id":"итог","depth":2,"text":"Итог"}]}},"_type":"markdown","_id":"content:posts:oci.md","_source":"content","_file":"posts/oci.md","_extension":"md"}