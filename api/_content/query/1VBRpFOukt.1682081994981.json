[{"_path":"/posts/wire-hole","_dir":"posts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Wireguard, pihole, unbound | предотвращаем утечку dns","description":"Смотри видео с детальной настройкой youtube.com.","date":"2022-12-17T00:00:00.000Z","type":"post","tags":["vpn","network"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Смотри видео с детальной настройкой "},{"type":"element","tag":"a","props":{"href":"https://www.youtube.com/watch?v=iTozi7KE904","rel":["nofollow"]},"children":[{"type":"text","value":"youtube.com"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"45.138.72.135\nroot\n747AuBOZ7WNt\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"45.138.72.135"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"root"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"747AuBOZ7WNt"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"unbound"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"wireguard"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"pihole"}]}]},{"type":"element","tag":"code","props":{"code":"apt install wg...\n\n\nwget https://raw.githubusercontent.com/burghardt/easy-wg-quick/master/easy-wg-quick\nchmod +x easy-wg-quick\n./easy-wg-quick\n\nsudo cp wghub.conf /etc/wireguard/wghub.conf\nsudo systemctl enable --now wg-quick@wghub\n\n# new client\n./easy-wg-quick bla\nsudo cp -r wghub.conf /etc/wireguard/wghub.conf\nsudo systemctl restart wg-quick@wghub\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"wg..."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"wget"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"https://raw.githubusercontent.com/burghardt/easy-wg-quick/master/easy-wg-quick"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"chmod"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"+x"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"easy-wg-quick"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"/easy-wg-quick"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"cp"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"wghub.conf"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"/etc/wireguard/wghub.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"--now"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"wg-quick@wghub"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# new client"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"/easy-wg-quick"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"bla"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"cp"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"-r"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"wghub.conf"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"/etc/wireguard/wghub.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"wg-quick@wghub"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"sudo wg-quick down ./wghub.conf # if already configured\nsudo wg-quick up ./wghub.conf\nsudo wg show\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"wg-quick"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"down"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"./wghub.conf"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# if already configured"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"wg-quick"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"up"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"./wghub.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"wg"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"show"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"# sudo nano /etc/sysctl.conf\n\nnet.core.default_qdisc = fq\nnet.ipv4.tcp_congestion_control = bbr\nnet.ipv4.ip_forward = 1\nnet.ipv4.conf.default.rp_filter = 1\nnet.ipv4.conf.all.rp_filter = 1\nnet.ipv4.tcp_syncookies = 1\n\n# sudo sysctl -p\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# sudo nano /etc/sysctl.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"net.core.default_qdisc"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"fq"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"net.ipv4.tcp_congestion_control"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"bbr"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"net.ipv4.ip_forward"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"net.ipv4.conf.default.rp_filter"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"net.ipv4.conf.all.rp_filter"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"net.ipv4.tcp_syncookies"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# sudo sysctl -p"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"sudo cat /etc/wireguard/wghub.conf\n# open port\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"/etc/wireguard/wghub.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# open port"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"curl -o /var/lib/unbound/root.hints https://www.internic.net/domain/named.cache\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"/var/lib/unbound/root.hints"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"https://www.internic.net/domain/named.cache"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"# mv access-control: 10.134.99.0/24 > wg network | ip a\n# sudo nano /etc/unbound/unbound.conf.d/pi-hole.conf\n\nserver:\n    # if no logfile is specified, syslog is used\n    # logfile: \"/var/log/unbound/unbound.log\"\n    verbosity: 1\n    port: 5353\n\n    do-ip4: yes\n    do-udp: yes\n    do-tcp: yes\n\n    # may be set to yes if you have IPv6 connectivity\n    do-ip6: no\n\n    # use this only when you downloaded the list of primary root servers\n    root-hints: \"/var/lib/unbound/root.hints\"\n\n    # respond to DNS requests on all interfaces\n    interface: 0.0.0.0\n    max-udp-size: 3072\n\n    # IPs authorised to access the DNS Server\n    access-control: 0.0.0.0/0                 refuse\n    access-control: 127.0.0.1                 allow\n    access-control: 10.134.99.0/24            allow\n\n    # hide DNS Server info\n    hide-identity: yes\n    hide-version: yes\n\n    # limit DNS fraud and use DNSSEC\n    harden-glue: yes\n    harden-dnssec-stripped: yes\n    harden-referral-path: yes\n\n    # add an unwanted reply threshold to clean the cache and avoid, when possible, DNS poisoning\n    unwanted-reply-threshold: 10000000\n\n    # have the validator print validation failures to the log val-log-level: 1\n    # don't use Capitalisation randomisation as it known to cause DNSSEC issues sometimes\n    # see https://discourse.pi-hole.net/t/unbound-stubby-or-dnscrypt-proxy/9378 for further details\n    use-caps-for-id: no\n\n    # reduce EDNS reassembly buffer size\n    # suggested by the unbound man page to reduce fragmentation reassembly problems\n    edns-buffer-size: 1472\n\n    # TTL bounds for cache\n    cache-min-ttl: 3600\n    cache-max-ttl: 86400\n\n    # perform prefetching of close to expired message cache entries\n    # this only applies to domains that have been frequently queried\n    prefetch: yes\n    prefetch-key: yes\n    # one thread should be sufficient, can be increased on beefy machines\n    num-threads: 1\n    # ensure kernel buffer is large enough to not lose messages in traffic spikes\n    so-rcvbuf: 1m\n\n    # ensure privacy of local IP ranges\n    private-address: 192.168.0.0/16\n    private-address: 169.254.0.0/16\n    private-address: 172.16.0.0/12\n    private-address: 10.0.0.0/8\n    private-address: fd00::/8\n    private-address: fe80::/10\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# mv access-control: 10.134.99.0/24 > wg network | ip a"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# sudo nano /etc/unbound/unbound.conf.d/pi-hole.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"server:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# if no logfile is specified, syslog is used"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# logfile: \"/var/log/unbound/unbound.log\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"verbosity:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"port:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"5353"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    do-ip4: yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    do-udp: yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    do-tcp: yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# may be set to yes if you have IPv6 connectivity"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    do-ip6: no"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# use this only when you downloaded the list of primary root servers"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"root-hints:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"\"/var/lib/unbound/root.hints\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# respond to DNS requests on all interfaces"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"interface:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"0.0.0.0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"max-udp-size:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"3072"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# IPs authorised to access the DNS Server"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"access-control:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"0.0.0.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"                 "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"refuse"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"access-control:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"127.0.0.1"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"                 "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"allow"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"access-control:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"10.134.99.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"24"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"allow"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# hide DNS Server info"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"hide-identity:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"hide-version:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# limit DNS fraud and use DNSSEC"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"harden-glue:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"harden-dnssec-stripped:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"harden-referral-path:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# add an unwanted reply threshold to clean the cache and avoid, when possible, DNS poisoning"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"unwanted-reply-threshold:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"10000000"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# have the validator print validation failures to the log val-log-level: 1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# don't use Capitalisation randomisation as it known to cause DNSSEC issues sometimes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# see https://discourse.pi-hole.net/t/unbound-stubby-or-dnscrypt-proxy/9378 for further details"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"use-caps-for-id:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"no"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# reduce EDNS reassembly buffer size"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# suggested by the unbound man page to reduce fragmentation reassembly problems"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"edns-buffer-size:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"1472"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# TTL bounds for cache"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"cache-min-ttl:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"3600"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"cache-max-ttl:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"86400"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# perform prefetching of close to expired message cache entries"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# this only applies to domains that have been frequently queried"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"prefetch:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"prefetch-key:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# one thread should be sufficient, can be increased on beefy machines"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"num-threads:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# ensure kernel buffer is large enough to not lose messages in traffic spikes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"so-rcvbuf:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"1m"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# ensure privacy of local IP ranges"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"private-address:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"192.168.0.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"16"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"private-address:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"169.254.0.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"16"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"private-address:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"172.16.0.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"12"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"private-address:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"10.0.0.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"8"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"private-address:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"fd00::/"}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"8"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"private-address:"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"fe80::/"}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"10"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl enable --now unbound\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"--now"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"unbound"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"# intfs  wghub\ncurl -sSL https://install.pi-hole.net | bash\n\nhttp://ip/admin\n\n# Settings - DNS наш Unbound 127.0.0.1#5353\n\n# open port 5353\ndig pi-hole.net @127.0.0.1 -p 5353  # NOERROR\ndig sigok.verteiltesysteme.net @127.0.0.1 -p 5353\ndig sigfail.verteiltesysteme.net @127.0.0.1 -p 5353  # SERFAIL\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# intfs  wghub"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"-sSL"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"https://install.pi-hole.net"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f7b976"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"bash"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"http://ip/admin"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# Settings - DNS наш Unbound 127.0.0.1#5353"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# open port 5353"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"dig"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"pi-hole.net"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"@127.0.0.1"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"5353"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# NOERROR"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"dig"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"sigok.verteiltesysteme.net"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"@127.0.0.1"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"5353"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"dig"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"sigfail.verteiltesysteme.net"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"@127.0.0.1"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"5353"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# SERFAIL"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"# wg client conf dns > wghub | ip a\n# wg\nnano intnetdns.txt\n\n# replace ip 1.1.1.1 default > wghub ip : 10.148.135.1\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# wg client conf dns > wghub | ip a"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# wg"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"intnetdns.txt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# replace ip 1.1.1.1 default > wghub ip : 10.148.135.1"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"# dns wghub ip : 10.148.135.1\n\n# 10: 10 > wgclient_10.conf\n[Interface]\nAddress = 10.148.135.10/24\nDNS = 10.148.135.1\nPrivateKey = oBj9b47cvZaGaCdHQUl1tu6in6L4yoL8hXxUd1EpU1c=\nMTU = 1280\n\n[Peer]\nPublicKey = G7VcOHBqXYFPppKNUZ25RJLjEXEDq+Gsn/jmczX5HB0=\nPresharedKey = LDgByqF8J/TgBI9vE+17aRNWnlJwQoD6i6xZCbwbdBk=\nAllowedIPs = 0.0.0.0/0, ::/0\nEndpoint = 45.138.72.135:44828\nPersistentKeepalive = 25\n\n# open ports\nufw allow ssh\nufw allow 44828/udp\n\n# net\nufw allow 80/tcp\nufw allow 53/udp\n\n# wg\nsudo ufw allow from 10.134.99.0/24 to any port 80\nsudo ufw allow from 10.134.99.0/24 to any port 53\nsudo ufw reject https\n\nss -tulpn\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# dns wghub ip : 10.148.135.1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# 10: 10 > wgclient_10.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"[Interface]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"Address"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"10.148.135.10/"}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"24"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"DNS"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"10.148.135.1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"PrivateKey"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"oBj9b47cvZaGaCdHQUl1tu6in6L4yoL8hXxUd1EpU1c="}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"MTU"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"1280"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":"[Peer]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"PublicKey"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"G7VcOHBqXYFPppKNUZ25RJLjEXEDq+Gsn/jmczX5HB0="}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"PresharedKey"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"LDgByqF8J/TgBI9vE+17aRNWnlJwQoD6i6xZCbwbdBk="}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"AllowedIPs"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"0.0.0.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"::/"}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"Endpoint"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"45.138.72.135:"}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"44828"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"PersistentKeepalive"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"25"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# open ports"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"allow"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"ssh"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"allow"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"44828"}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"/udp"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# net"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"allow"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"80"}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"/tcp"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"allow"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"53"}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"/udp"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b466e"},"children":[{"type":"text","value":"# wg"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"allow"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"10.134.99.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"24"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"any"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"port"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"80"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"allow"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"10.134.99.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"24"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"any"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"port"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"53"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9a114"},"children":[{"type":"text","value":"https"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-69f621"},"children":[{"type":"text","value":"ss"}]},{"type":"element","tag":"span","props":{"class":"ct-b5f1a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6693a"},"children":[{"type":"text","value":"-tulpn"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"45.138.72.135/admin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://pi.hole/admin","rel":["nofollow"]},"children":[{"type":"text","value":"http://pi.hole/admin"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://dnsleak.com","rel":["nofollow"]},"children":[{"type":"text","value":"https://dnsleak.com"}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-f7b976{color:#FF7B72}\n.ct-5b466e{color:#8B949E}\n.ct-c6693a{color:#79C0FF}\n.ct-b9a114{color:#A5D6FF}\n.ct-69f621{color:#FFA657}\n.ct-b5f1a8{color:#C9D1D9}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:posts:wire-hole.md","_source":"content","_file":"posts/wire-hole.md","_extension":"md"},{"_path":"/posts/web-server","_dir":"posts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Настройка и использование Nginx в Arch Linux | Docker Portainer","description":"Nginx reverse proxy, проброс локальной сети на сервер, через wireguard. Portainer — gui для docker контейнеров.","date":"2021-04-05T00:00:00.000Z","type":"post","tags":["vpn","docker","webserver"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nginx reverse proxy, проброс локальной сети на сервер, через wireguard. Portainer — gui для docker контейнеров."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.youtube.com/watch?v=IFjzUpTjsC4","rel":["nofollow"]},"children":[{"type":"text","value":"Video"}]}]},{"type":"element","tag":"h2","props":{"id":"nginx-локально"},"children":[{"type":"text","value":"Nginx локально"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Для установки на Arch."}]},{"type":"element","tag":"code","props":{"code":"sudo pacman -S nginx\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"pacman"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"nginx"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://nginx.org/ru/docs/beginners_guide.html","rel":["nofollow"]},"children":[{"type":"text","value":"Nginx docs"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/Nginx","rel":["nofollow"]},"children":[{"type":"text","value":"ArchWiki Nginx"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/title/Certbot","rel":["nofollow"]},"children":[{"type":"text","value":"Certbot"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Глобальный конфиг, при обращении по ip, nginx будет отдавать стандартную страницу, по пути "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/usr/share/nginx/html/index.html"}]},{"type":"text","value":", некоторые настройки и импорты других конфигураций include, user - указываю юзера creio, от которого я работаю и из его директории в дальнейшем буду импортировать статичный сайт "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/media/files/github/ctlos/ctlos.github.io/_site"}]},{"type":"text","value":", который сгенерирован jekyll, точнее это не его домашняя директория, но права на нее принадлежат ему."}]},{"type":"element","tag":"code","props":{"code":"sudo nano /etc/nginx/nginx.conf\n\nuser creio users;\nworker_processes  1;\n#error_log  logs/error.log;\n#error_log  logs/error.log  notice;\n#error_log  logs/error.log  info;\n#pid        logs/nginx.pid;\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n    #access_log  logs/access.log  main;\n    types_hash_max_size 4096;\n    server_names_hash_bucket_size 128;\n    sendfile        on;\n    #tcp_nopush     on;\n    keepalive_timeout  65;\n    gzip  on;\n\n    server {\n        listen 80 default_server;\n        listen [::]:80 default_server;\n\n        root /usr/share/nginx/html;\n        index index.htm index.html;\n\n        server_tokens off;\n        autoindex off;\n    }\n\n    include sites-enabled/*;\n}\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/etc/nginx/nginx.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"user"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"creio"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"users"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"worker_processes"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-211104"},"children":[{"type":"text","value":"#error_log  logs/error.log;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-211104"},"children":[{"type":"text","value":"#error_log  logs/error.log  notice;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-211104"},"children":[{"type":"text","value":"#error_log  logs/error.log  info;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-211104"},"children":[{"type":"text","value":"#pid        logs/nginx.pid;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"events"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"worker_connections"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"1024"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"http"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"include"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"       "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"mime.types"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"default_type"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"application/octet-stream"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-211104"},"children":[{"type":"text","value":"#access_log  logs/access.log  main;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"types_hash_max_size"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"4096"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"server_names_hash_bucket_size"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"128"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sendfile"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-211104"},"children":[{"type":"text","value":"#tcp_nopush     on;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"keepalive_timeout"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"65"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"gzip"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"80"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"default_server"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" [::]:80 "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"default_server"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"root"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/usr/share/nginx/html"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"index"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"index.htm"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"index.html"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"server_tokens"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"off"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"autoindex"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"off"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"include"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"sites-enabled/"}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Создаем 2 директории в "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"available"}]},{"type":"text","value":" будем складывать все конфиги сайтов, а в "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"enabled"}]},{"type":"text","value":" будем создавать сим линки "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ln -s"}]},{"type":"text","value":" на то, что хотим включить, если нужно выключить, то просто удаляем конфиг(симлинк) из enabled. Файлы в этих директориях, как зеркала, не важно откуда мы их будем править."}]},{"type":"element","tag":"code","props":{"code":"sudo mkdir /etc/nginx/sites-{available,enabled}\nsudo nano /etc/nginx/sites-available/home.conf\nsudo ln -s /etc/nginx/sites-available/home.conf /etc/nginx/sites-enabled\n# если нужно удалить и не забудь перезапустить nginx\nsudo rm /etc/nginx/sites-enabled/home.conf\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/etc/nginx/sites-{available,enabled}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/etc/nginx/sites-available/home.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"ln"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"-s"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/etc/nginx/sites-available/home.conf"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/etc/nginx/sites-enabled"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-211104"},"children":[{"type":"text","value":"# если нужно удалить и не забудь перезапустить nginx"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"rm"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/etc/nginx/sites-enabled/home.conf"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"команды-nginx"},"children":[{"type":"text","value":"Команды nginx"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Проверить конфигурацию на валидность."}]},{"type":"element","tag":"code","props":{"code":"sudo nginx -t\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"nginx"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"-t"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Запуск сервера, рестарт, стоп, средствами systemd."}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl start nginx\n\nsudo systemctl restart nginx\n\nsudo systemctl stop nginx\n\nsudo systemctl status nginx\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"start"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"nginx"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"nginx"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"stop"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"nginx"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"nginx"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Добавить в авто старт и убрать, если нужно."}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl enable nginx\n\nsudo systemctl disable nginx\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"nginx"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"disable"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"nginx"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Просмотр логов в зависимости, что указали в access_log и error_log."}]},{"type":"element","tag":"code","props":{"code":"cat /var/log/nginx/home.access\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/var/log/nginx/home.access"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Я использую "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server_name домен"}]},{"type":"text","value":", но можно манипулировать портами, если нет доменного имени, или воспользоваться freedns, no-ip и подобные. В конфиге ниже нет привязки к домену, а именно к порту, можно использовать и то и другое, как вместе, так и отдельно. В данном случае в браузере мы должны обратится "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ip:port ip:4000"}]},{"type":"text","value":". Команда ip a покажет ip, обычно это 127.0.0.1(localhost), можно и так "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"localhost:4000"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"https://www.duckdns.org/","rel":["nofollow"]},"children":[{"type":"text","value":"www.duckdns.org/"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"# cat /etc/nginx/sites-available/home.conf\nserver {\n  listen 4000;\n  listen [::]:4000;\n  # server_name creio.duckdns.org;\n\n  root /media/files/github/ctlos/ctlos.github.io/_site;\n  index index.html index.htm index.php;\n\n  access_log /var/log/nginx/home.access;\n  error_log /var/log/nginx/home.error;\n\n  location / {\n      autoindex off;\n      try_files $uri $uri/ =404;\n    }\n\n    error_page 404 /404.html;\n    location = /404.html {\n        internal;\n    }\n\n    if ($request_uri = /index.html) {\n        return 301 /;\n    }\n}\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-211104"},"children":[{"type":"text","value":"# cat /etc/nginx/sites-available/home.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"4000"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" [::]:4000;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-211104"},"children":[{"type":"text","value":"# server_name creio.duckdns.org;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"root"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/media/files/github/ctlos/ctlos.github.io/_site"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"index"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"index.html"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"index.htm"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"index.php"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"access_log"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/var/log/nginx/home.access"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"error_log"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/var/log/nginx/home.error"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"location"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"autoindex"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"off"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"try_files"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" $uri $uri"}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"404"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"error_page"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"404"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/404.html"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"location"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/404.html"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"internal"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-744346"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" ($request_uri = /index.html) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-744346"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"301"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Пример запуска jekyll, по умолчанию он стартует на localhost "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"127.0.0.1"}]},{"type":"text","value":", порт 4000, но через vpn доступа к нему вы не получите, решение указать хост "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-H 0.0.0.0"}]},{"type":"text","value":". В этом случае нам локально не нужен запущенный nginx, а сразу же настраиваем реверс на сервере. Jekyll используется для примера, тут может быть любое приложение на любом порту."}]},{"type":"element","tag":"code","props":{"code":"bundle exec jekyll serve -H 0.0.0.0\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"bundle"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"exec"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"jekyll"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"serve"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"-H"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"0.0.0.0"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Команду можно повесить в авто запуск."}]},{"type":"element","tag":"h2","props":{"id":"nginx-на-сервере"},"children":[{"type":"text","value":"Nginx на сервере"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Конфиг проброса (reverse proxy) локалки на сервер через vpn(wireguard), о его настройке я писал "},{"type":"element","tag":"a","props":{"href":"/posts/vpn"},"children":[{"type":"text","value":"тут"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"curl ident.me\n\nsudo systemctl start wg-quick@wg0\n\nip a\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"ident.me"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"start"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"wg-quick@wg0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"ip"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"a"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Важный момент, если вы хотите иметь доступ к работающим докерам в локальной сети из вне, через vpn, находясь за nat с динамическим ip, обязательно используйте host сеть(0.0.0.0) --network host. При создании конфигурации в portainer, выбирайте сеть host для контейнера, или при ручном запуске контейнера указывайте(--network host). Просмотр сведений о сети. "},{"type":"element","tag":"a","props":{"href":"https://stackoverflow.com/q/32103885","rel":["nofollow"]},"children":[{"type":"text","value":"stackoverflow.com/q/32103885"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"# iproute2\nss -tulpn\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-211104"},"children":[{"type":"text","value":"# iproute2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"ss"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"-tulpn"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Приложение работает и теперь можно настроить реверс прокси на сервере впн к этому порту, конфиг почти такой же как и в примере выше, только убираем путь root."}]},{"type":"element","tag":"code","props":{"code":"cat /etc/nginx/sites-enabled/home.ctlos.ru.conf\n# содержимое\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name creio.duckdns.org;\n\n    access_log /var/log/nginx/home.access;\n    error_log /var/log/nginx/home.error;\n\n    # reverse proxy\n    location / {\n        proxy_pass http://10.0.0.10:4000;\n        # proxy_redirect http:// $scheme://;\n        proxy_redirect off;\n        proxy_buffering off;\n        tcp_nodelay on;\n\n        proxy_http_version 1.1;\n        proxy_pass_header Server;\n        proxy_set_header Host $http_host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header Proxy \"Cloud-LB\";\n        proxy_set_header Upgrade $http_upgrade;\n    }\n}\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/etc/nginx/sites-enabled/home.ctlos.ru.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-211104"},"children":[{"type":"text","value":"# содержимое"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"80"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" [::]:80;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"server_name"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"creio.duckdns.org"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"access_log"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/var/log/nginx/home.access"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"error_log"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/var/log/nginx/home.error"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-211104"},"children":[{"type":"text","value":"# reverse proxy"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"location"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"proxy_pass"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"http://10.0.0.10:"}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"4000"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-211104"},"children":[{"type":"text","value":"# proxy_redirect http:// $scheme://;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"proxy_redirect"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"off"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"proxy_buffering"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"off"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"tcp_nodelay"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"proxy_http_version"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"1.1"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"proxy_pass_header"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"Server"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"Host"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" $http_host;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"X-Real-IP"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" $remote_addr;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"X-Forwarded-For"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" $proxy_add_x_forwarded_for;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"X-Forwarded-Proto"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" $scheme;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"Proxy"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"\"Cloud-LB\""}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"Upgrade"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" $http_upgrade;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"proxy_pass http://10.0.0.10:4000;"}]},{"type":"text","value":" указываем ip wg клиента, то есть ваш локальный ip интерфейса wg, команда ip a покажет его. Рестарт nginx и посмотрим статус."}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl restart nginx\n\nsudo systemctl status nginx\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"nginx"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"nginx"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Просмотр отдачи инфы сервером в vpn сети. Должно отдавать одни и теже данные, как локально, так и на сервере."}]},{"type":"element","tag":"code","props":{"code":"curl 10.0.0.10:4000\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"10.0.0.10:"}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"4000"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Таким образом можно создать множество сайтов, пробросить нужные приложения в сеть из локальной сети, но обязательное условие, иметь сервер, иначе в этом мало смысла."}]}]},{"type":"element","tag":"h2","props":{"id":"docker-portainer"},"children":[{"type":"text","value":"Docker Portainer"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В данном подходе не обязательно иметь сервер и можно забыть о vpn, а организовать все локально, без всяких доступов за nat. Поднять в докерах plex, nextcloud и многое другое, а portainer позволяет легко этим управлять."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Установка Doker, docker-compose и настройка. "},{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/Docker","rel":["nofollow"]},"children":[{"type":"text","value":"wiki.archlinux.org/index.php/Docker"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"sudo pacman -S docker-compose\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"pacman"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"docker-compose"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Добавляем пользователя от которого работаем(username) в группу docker."}]},{"type":"element","tag":"code","props":{"code":"sudo usermod -aG docker username\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"usermod"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"-aG"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"username"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Возможно стоит перезагрузиться. Включаем сервис и добавляем в авто-старт, если нужно."}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl start docker\n\nsudo systemctl enable docker\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"start"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"docker"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"docker"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Portainer — веб интерфейс на 9000 порту, для управления docker контейнерами. "},{"type":"element","tag":"a","props":{"href":"https://documentation.portainer.io/v2.0/deploy/ceinstalldocker/","rel":["nofollow"]},"children":[{"type":"text","value":"documentation portainer"}]},{"type":"text","value":". Создадим диск "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"portainer_data"}]},{"type":"text","value":", как сказано в доках."}]},{"type":"element","tag":"code","props":{"code":"docker volume create portainer_data\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"volume"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"portainer_data"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Одна из команд ниже запустит portainer, о хост сети я уже говорил выше, но можно и использовать 2 команду, только необходимо немного ковырнуть докер. В случае отказа запуска сервиса docker, попробуйте. "},{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/Docker#Daemon_socket","rel":["nofollow"]},"children":[{"type":"text","value":"wiki.archlinux.org"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl daemon-reload\nsudo rm -rf /var/run/docker.sock\nsudo systemctl restart docker\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"daemon-reload"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"rm"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"-rf"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/var/run/docker.sock"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"docker"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Если вы изменили socket, как сказано в вики, то используйте вторую команду, контейнер будет доступен в vpn сети на 9000 порту."}]},{"type":"element","tag":"code","props":{"code":"# запуск в host сети\ndocker run -d --network host --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce --logo \"https://ctlos.github.io/assets/img/logo.svg\"\n\n# bridge ports, portainer-ce\ndocker run -d -p 9000:9000 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce --logo \"https://ctlos.github.io/assets/img/logo.svg\"\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-211104"},"children":[{"type":"text","value":"# запуск в host сети"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"-d"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"--network"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"host"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"--name=portainer"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"--restart=always"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"-v"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/var/run/docker.sock:/var/run/docker.sock"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"-v"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"portainer_data:/data"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"portainer/portainer-ce"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"--logo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"\"https://ctlos.github.io/assets/img/logo.svg\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-211104"},"children":[{"type":"text","value":"# bridge ports, portainer-ce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"-d"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"9000"}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"9000"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"--name=portainer"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"--restart=always"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"-v"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"/var/run/docker.sock:/var/run/docker.sock"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"-v"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"portainer_data:/data"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"portainer/portainer-ce"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-49a4e6"},"children":[{"type":"text","value":"--logo"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"\"https://ctlos.github.io/assets/img/logo.svg\""}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"команды-docker"},"children":[{"type":"text","value":"Команды docker"}]},{"type":"element","tag":"code","props":{"code":"# список контейнеров\ndocker ps\n\n# остановка ID или Name\ndocker stop portainer\n\n# запуск ID или Name\ndocker start fc46d04d334d\n\n# удалить\ndocker rm portainer\n\n# удалить диск\ndocker volume rm portainer_data\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-211104"},"children":[{"type":"text","value":"# список контейнеров"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"ps"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-211104"},"children":[{"type":"text","value":"# остановка ID или Name"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"stop"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"portainer"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-211104"},"children":[{"type":"text","value":"# запуск ID или Name"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"start"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"fc46d04d334d"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-211104"},"children":[{"type":"text","value":"# удалить"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"rm"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"portainer"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-211104"},"children":[{"type":"text","value":"# удалить диск"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94da53"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"volume"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"rm"}]},{"type":"element","tag":"span","props":{"class":"ct-765354"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-559509"},"children":[{"type":"text","value":"portainer_data"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Многое можно делать в терминале, точнее все. Рекомендую детальней изучить docker-compose, "},{"type":"element","tag":"a","props":{"href":"https://docs.docker.com/","rel":["nofollow"]},"children":[{"type":"text","value":"docs.docker.com/"}]},{"type":"text","value":"."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-744346{color:#FF7B72}\n.ct-211104{color:#8B949E}\n.ct-49a4e6{color:#79C0FF}\n.ct-559509{color:#A5D6FF}\n.ct-765354{color:#C9D1D9}\n.ct-94da53{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"nginx-локально","depth":2,"text":"Nginx локально","children":[{"id":"команды-nginx","depth":3,"text":"Команды nginx"}]},{"id":"nginx-на-сервере","depth":2,"text":"Nginx на сервере"},{"id":"docker-portainer","depth":2,"text":"Docker Portainer","children":[{"id":"команды-docker","depth":3,"text":"Команды docker"}]}]}},"_type":"markdown","_id":"content:posts:web-server.md","_source":"content","_file":"posts/web-server.md","_extension":"md"},{"_path":"/posts/vpn","_dir":"posts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Как Создать и Настроить VPN сервер в Linux | Wireguard","description":"Речь пойдет о шифровании трафика в сети и обходе блокировок, рассмотрю несколько способов.","date":"2021-01-31T00:00:00.000Z","type":"post","tags":["vpn"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Речь пойдет о шифровании трафика в сети и обходе блокировок, рассмотрю несколько способов."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.youtube.com/watch?v=4FmWp04auX4","rel":["nofollow"]},"children":[{"type":"text","value":"Video"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://m.do.co/c/49c4dbf3d0ca","rel":["nofollow"]},"children":[{"type":"text","value":"Всё реализовано в дроплете Digital Ocean"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/posts/psiphon"},"children":[{"type":"text","value":"Psiphon о котором я уже упоминал в прошлом посте"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Ssh туннель через сервер в tor"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Sshuttle прокси"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Wireguard"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Гуляем по сети, как рыбы в океане :)."}]},{"type":"element","tag":"h2","props":{"id":"ssh-туннель"},"children":[{"type":"text","value":"Ssh туннель"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Установить ssh."}]},{"type":"element","tag":"code","props":{"code":"yay -S openssh\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"openssh"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Допустим на вашем сервере запущен tor или прокси, через ssh легко можно пробросить порт на котором это работает. Про настройку ssh я писал в ctlos wiki."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://ctlos.github.io/wiki/config/ssh/","rel":["nofollow"]},"children":[{"type":"text","value":"Ctlos wiki ssh"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/OpenSSH","rel":["nofollow"]},"children":[{"type":"text","value":"OpenSSH"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/tor","rel":["nofollow"]},"children":[{"type":"text","value":"Tor"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Установить tor."}]},{"type":"element","tag":"code","props":{"code":"yay -S tor torsocks\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"tor"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"torsocks"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"ssh -L 9050:127.0.0.1:9050 -p 22 cretm@134.122.88.241 -N\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"ssh"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"9050"}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":":127.0.0.1:"}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"9050"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"22"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"cretm@134.122.88.241"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-N"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"127.0.0.1(localhost) — локальный адрес."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Первый 9050, локальный порт."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Второй 9050, на сервере."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-N говорит не открывать соединение, а только проброс."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Теперь локально доступен 9050 и можно открыть на нем chromium в другом терминале."}]},{"type":"element","tag":"code","props":{"code":"chromium --proxy-server='socks://127.0.0.1:9050'\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"chromium"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"--proxy-server="}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"'socks://127.0.0.1:9050'"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Или посмотреть ip через torify, или запустить шелл и выполнять все через tor."}]},{"type":"element","tag":"code","props":{"code":"torify curl ident.me\n# или\ntorify zsh\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"torify"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"ident.me"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ac2ea6"},"children":[{"type":"text","value":"# или"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"torify"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"zsh"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"sshuttle"},"children":[{"type":"text","value":"Sshuttle"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Позволяет завернуть весь трафик через ssh сервер."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/sshuttle/sshuttle","rel":["nofollow"]},"children":[{"type":"text","value":"repo"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://habr.com/ru/post/318694/","rel":["nofollow"]},"children":[{"type":"text","value":"Статейка habr"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://eax.me/sshuttle/","rel":["nofollow"]},"children":[{"type":"text","value":"И еще одна"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Установка."}]},{"type":"element","tag":"code","props":{"code":"yay -S sshuttle\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"sshuttle"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Запуск."}]},{"type":"element","tag":"code","props":{"code":"sshuttle --dns -r cretm@134.122.88.241 -x 134.122.88.241 0/0\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sshuttle"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"--dns"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-r"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"cretm@134.122.88.241"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-x"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"134.122.88.241"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"0"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"wireguard"},"children":[{"type":"text","value":"Wireguard"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Я все проделываю скриптом easy-wg-quick."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/WireGuard","rel":["nofollow"]},"children":[{"type":"text","value":"Arch Wiki wireguard"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/burghardt/easy-wg-quick","rel":["nofollow"]},"children":[{"type":"text","value":"easy-wg-quick"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.wireguard.com/quickstart/","rel":["nofollow"]},"children":[{"type":"text","value":"wireguard quickstart"}]}]}]},{"type":"element","tag":"h3","props":{"id":"сервер"},"children":[{"type":"text","value":"Сервер"}]},{"type":"element","tag":"code","props":{"code":"yay -S wireguard-tools gawk grep iproute2 net-tools qrencode wget\n\n# если ядро lts\nyay -S wireguard-lts\n\nmkdir vpn && cd vpn\n\nwget -O vpn.sh https://raw.githubusercontent.com/burghardt/easy-wg-quick/master/easy-wg-quick\n\nchmod +x vpn.sh\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"wireguard-tools"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"gawk"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"grep"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"iproute2"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"net-tools"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"qrencode"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"wget"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ac2ea6"},"children":[{"type":"text","value":"# если ядро lts"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"wireguard-lts"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"vpn"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"vpn"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"wget"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-O"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"vpn.sh"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"https://raw.githubusercontent.com/burghardt/easy-wg-quick/master/easy-wg-quick"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"chmod"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"+x"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"vpn.sh"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Выполните reboot после установки."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Можно задать конкретный порт и ip. Узнать."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Если за nat curl ident.me"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Нет nat ip a"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Путем отправки данных в файлы."}]},{"type":"element","tag":"code","props":{"code":"curl ident.me > extnetip.txt\n# или\necho 134.122.88.241 > extnetip.txt\n\necho 51820 > portno.txt\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"ident.me"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-81f7ee"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"extnetip.txt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ac2ea6"},"children":[{"type":"text","value":"# или"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"134.122.88.241"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-81f7ee"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"extnetip.txt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"51820"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-81f7ee"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"portno.txt"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Создание конфигурации и клиента."}]},{"type":"element","tag":"code","props":{"code":"./vpn.sh comp\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"/vpn.sh"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"comp"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Запуск, остановка, статус работы."}]},{"type":"element","tag":"code","props":{"code":"sudo wg-quick up ./wghub.conf\nsudo wg-quick down ./wghub.conf\nsudo wg show\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"wg-quick"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"up"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"./wghub.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"wg-quick"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"down"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"./wghub.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"wg"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"show"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Открыть порт если установлен файрвол, рестарт и просмотр статуса."}]},{"type":"element","tag":"code","props":{"code":"sudo ufw allow 51820/udp\nsudo ufw reload\nsudo ufw status\nnetstat -tulpn\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"allow"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"51820"}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"/udp"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"reload"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"status"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"netstat"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-tulpn"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Если на сервере iptables."}]},{"type":"element","tag":"code","props":{"code":"sudo iptables --policy INPUT ACCEPT\nsudo iptables -F\nsudo iptables -A INPUT -p tcp --dport 22 -m state --state NEW -j ACCEPT\nsudo iptables -A INPUT -p udp --dport 51820 -m state --state NEW -j ACCEPT\nsudo netfilter-persistent save\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"iptables"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"--policy"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"INPUT"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"ACCEPT"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"iptables"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-F"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"iptables"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-A"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"INPUT"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"tcp"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"--dport"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"22"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-m"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"state"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"--state"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"NEW"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-j"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"ACCEPT"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"iptables"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-A"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"INPUT"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"udp"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"--dport"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"51820"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-m"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"state"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"--state"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"NEW"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-j"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"ACCEPT"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"netfilter-persistent"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"save"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Удалить правило, где 5 линия. В данном случае удалять ничего не нужно, просто знайте, как работает удаление."}]},{"type":"element","tag":"code","props":{"code":"sudo iptables --list --line-numbers\nsudo iptables -D INPUT 5\nsudo netfilter-persistent save\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"iptables"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"--list"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"--line-numbers"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"iptables"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-D"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"INPUT"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"5"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"netfilter-persistent"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"save"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Создаем второго клиента для мобилки. Сканируем qr в приложении wireguard и перезапускаем сервер."}]},{"type":"element","tag":"code","props":{"code":"./vpn.sh mob\nsudo wg-quick down ./wghub.conf\nsudo wg-quick up ./wghub.conf\nsudo wg show\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"/vpn.sh"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"mob"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"wg-quick"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"down"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"./wghub.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"wg-quick"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"up"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"./wghub.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"wg"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"show"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Вывод qr кода."}]},{"type":"element","tag":"code","props":{"code":"qrencode -t ansiutf8 < wgclient_mob.conf\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"qrencode"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"ansiutf8"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-81f7ee"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"wgclient_mob.conf"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Основной конфиг с инфой о клиентах."}]},{"type":"element","tag":"code","props":{"code":"cat wghub.conf\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"wghub.conf"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Можно добавить в автостарт systemd."}]},{"type":"element","tag":"code","props":{"code":"sudo cp wghub.conf /etc/wireguard/wghub.conf\nsudo systemctl enable --now wg-quick@wghub\nsystemctl status wg-quick@wghub\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"cp"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"wghub.conf"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"/etc/wireguard/wghub.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"--now"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"wg-quick@wghub"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"wg-quick@wghub"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"клиент"},"children":[{"type":"text","value":"Клиент"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Для клиента Arch Linux. Настройка на вашем компе."}]},{"type":"element","tag":"code","props":{"code":"yay -S wireguard-tools\nsudo nano /etc/wireguard/wg0.conf\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"wireguard-tools"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"/etc/wireguard/wg0.conf"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Скопировать с сервера содержимое файла "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"wgclient_comp.conf"}]},{"type":"text","value":", пример."}]},{"type":"element","tag":"code","props":{"code":"# 10: comp > wgclient_comp.conf\n[Interface]\nAddress = 10.256.112.10/24, fd51:9999:3322:6414::10/64\nDNS = 1.1.1.1, 2606:4700:4700::1111\nPrivateKey = UGdsdfgsdgdfgiJRhlQdX7kQ=\n\n[Peer]\nPublicKey = wvr/gmg/FJN0dfgdfhdfhudRLdIdn+2DQ=\nPresharedKey = /DXNfgNi2iMY5jrdgdfgdgu5tyIX94Xvss=\nAllowedIPs = 0.0.0.0/0, ::/0\nEndpoint = 134.111.10.21:51820\nPersistentKeepalive = 25\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ac2ea6"},"children":[{"type":"text","value":"# 10: comp > wgclient_comp.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":"[Interface]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"Address"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"10.256.112.10/"}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"24"}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"fd51:"}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"9999"}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"3322"}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"6414"}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"64"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"DNS"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"1.1.1.1,"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"2606"}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"4700"}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"4700"}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"1111"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"PrivateKey"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"UGdsdfgsdgdfgiJRhlQdX7kQ="}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":"[Peer]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"PublicKey"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"wvr/gmg/FJN0dfgdfhdfhudRLdIdn+2DQ="}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"PresharedKey"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"/DXNfgNi2iMY5jrdgdfgdgu5tyIX94Xvss="}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"AllowedIPs"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"0.0.0.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"::/"}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"Endpoint"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"134.111.10.21:"}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"51820"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"PersistentKeepalive"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"25"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Включить сервис systemd и добавить в автостарт если нужно."}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl start wg-quick@wg0\n\nsudo systemctl enable wg-quick@wg0\n\nsudo systemctl enable --now systemd-resolved\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"start"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"wg-quick@wg0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"wg-quick@wg0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"--now"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"systemd-resolved"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Имейте ввиду если на сервере, что-то не так, то и у вас не будет интернета при включенном сервисе. Остановить, выключить."}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl stop wg-quick@wg0\n\nsudo systemctl disable wg-quick@wg0\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"stop"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"wg-quick@wg0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"disable"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"wg-quick@wg0"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Проверить ip можно на "},{"type":"element","tag":"a","props":{"href":"https://2ip.ru","rel":["nofollow"]},"children":[{"type":"text","value":"2ip.ru"}]},{"type":"text","value":", в терминале."}]},{"type":"element","tag":"code","props":{"code":"curl ident.me\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"ident.me"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Проверить скорость интернета."}]},{"type":"element","tag":"code","props":{"code":"curl -s https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest.py | python -\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab753b"},"children":[{"type":"text","value":"-s"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest.py"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-81f7ee"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bba4f3"},"children":[{"type":"text","value":"python"}]},{"type":"element","tag":"span","props":{"class":"ct-b876fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cac9c"},"children":[{"type":"text","value":"-"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-81f7ee{color:#FF7B72}\n.ct-ac2ea6{color:#8B949E}\n.ct-6cac9c{color:#A5D6FF}\n.ct-ab753b{color:#79C0FF}\n.ct-b876fc{color:#C9D1D9}\n.ct-bba4f3{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"ssh-туннель","depth":2,"text":"Ssh туннель"},{"id":"sshuttle","depth":2,"text":"Sshuttle"},{"id":"wireguard","depth":2,"text":"Wireguard","children":[{"id":"сервер","depth":3,"text":"Сервер"},{"id":"клиент","depth":3,"text":"Клиент"}]}]}},"_type":"markdown","_id":"content:posts:vpn.md","_source":"content","_file":"posts/vpn.md","_extension":"md"},{"_path":"/posts/psiphon","_dir":"posts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Psiphon linux, обходим блокировку трафика","description":"Обходим блокировку сайтов с помощью psiphon.","date":"2020-08-10T00:00:00.000Z","type":"post","tags":["vpn"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Обходим блокировку сайтов с помощью psiphon."}]},{"type":"element","tag":"h2","props":{"id":"archlinux"},"children":[{"type":"text","value":"Archlinux"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В aur лежит пакет."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://aur.archlinux.org/packages/brainfuck-psiphon-pro-go-bin/","rel":["nofollow"]},"children":[{"type":"text","value":"brainfuck-psiphon-pro-go"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/aztecrabbit/brainfuck-psiphon-pro-go","rel":["nofollow"]},"children":[{"type":"text","value":"Репо проекта"}]}]}]},{"type":"element","tag":"h2","props":{"id":"установка"},"children":[{"type":"text","value":"Установка"}]},{"type":"element","tag":"code","props":{"code":"yay -S brainfuck-psiphon-pro-go-bin\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8f290"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":"brainfuck-psiphon-pro-go-bin"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"использование"},"children":[{"type":"text","value":"Использование"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Запуск командой sudo brainfuck-psiphon-pro-go. Увидите примерно такой вывод."}]},{"type":"element","tag":"code","props":{"code":"Brainfuck Tunnel [Psiphon Pro Go Version. 1.3.210109]\n(c) 2020 Aztec Rabbit.\n\n[17:15:55] :: INFO :: Domain Fronting running on port 8989\n[17:15:55] :: INFO :: Proxy Rotator running on port 3080\n[17:15:55] :: 3081 :: Connecting\n[17:15:55] :: 3082 :: Connecting\n[17:15:55] :: 3084 :: Connecting\n[17:15:55] :: 3083 :: Connecting\n[17:16:08] :: 3083 :: Connected\n[17:16:09] :: 3082 :: Connected\n[17:16:09] :: 3081 :: Connected\n[17:16:10] :: 3084 :: Connected\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8f290"},"children":[{"type":"text","value":"Brainfuck"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":"Tunnel"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" [Psiphon Pro Go Version. 1.3.210109]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e8f290"},"children":[{"type":"text","value":"c"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"2020"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" Aztec Rabbit."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"15"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"55"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"] :: INFO :: Domain Fronting running on port "}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"8989"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"15"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"55"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"] :: INFO :: Proxy Rotator running on port "}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"3080"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"15"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"55"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"] :: "}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"3081"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" :: Connecting"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"15"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"55"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"] :: "}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"3082"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" :: Connecting"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"15"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"55"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"] :: "}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"3084"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" :: Connecting"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"15"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"55"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"] :: "}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"3083"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" :: Connecting"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"16"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"08"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"] :: "}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"3083"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" :: Connected"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"16"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"09"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"] :: "}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"3082"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" :: Connected"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"16"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"09"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"] :: "}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"3081"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" :: Connected"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"16"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"] :: "}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"3084"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" :: Connected"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Можно запустить с использованием региона (us,nl,sg)."}]},{"type":"element","tag":"code","props":{"code":"sudo brainfuck-psiphon-pro-go -r nl\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8f290"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":"brainfuck-psiphon-pro-go"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"-r"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":"nl"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Прописываем прокси в браузере, или в telegram. Прокси ратируются на портах 3080-3084 в моем случае, наверняка у вас также."}]},{"type":"element","tag":"code","props":{"code":"http proxy: 127.0.0.1 port 3080\nhttps proxy: 127.0.0.1 port 3080\nftp proxy: 127.0.0.1 port 3080\nsocks: 127.0.0.1 port 3080\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8f290"},"children":[{"type":"text","value":"http"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":"proxy:"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":"127.0.0.1"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":"port"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"3080"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8f290"},"children":[{"type":"text","value":"https"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":"proxy:"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":"127.0.0.1"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":"port"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"3080"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8f290"},"children":[{"type":"text","value":"ftp"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":"proxy:"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":"127.0.0.1"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":"port"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"3080"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8f290"},"children":[{"type":"text","value":"socks:"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":"127.0.0.1"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":"port"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"3080"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Chromium можно запустить с флагом."}]},{"type":"element","tag":"code","props":{"code":"chromium --proxy-server='socks://127.0.0.1:3080'\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8f290"},"children":[{"type":"text","value":"chromium"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"--proxy-server="}]},{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":"'socks://127.0.0.1:3080'"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В firefox используйте расширение FoxyProxy, или в параметрах сети укажите только SOCKS5."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В настройках расширения, Добавить новый SOCKS5, ip: 127.0.0.1, port: 3080"}]}]},{"type":"element","tag":"h3","props":{"id":"конфигурация"},"children":[{"type":"text","value":"Конфигурация"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Можно изменить "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ProxyRotator"}]},{"type":"text","value":" порт, если нужно."}]},{"type":"element","tag":"code","props":{"code":"# nano ~/.config/brainfuck-psiphon-pro-go/config.json\n\n{\n  \"ProxyRotator\": {\n    \"Port\": \"3080\"\n  },\n  \"Inject\": {\n    \"Enable\": true,\n    \"Type\": 2,\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0983bb"},"children":[{"type":"text","value":"# nano ~/.config/brainfuck-psiphon-pro-go/config.json"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":"  \"ProxyRotator\""}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":"    \"Port\""}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":" \"3080\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":"  },"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":"  \"Inject\""}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":"    \"Enable\""}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":"    \"Type\""}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":","}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Help."}]},{"type":"element","tag":"code","props":{"code":"sudo brainfuck-psiphon-pro-go -h\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8f290"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-baaf4d"},"children":[{"type":"text","value":"brainfuck-psiphon-pro-go"}]},{"type":"element","tag":"span","props":{"class":"ct-2bfe0c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d9b6f"},"children":[{"type":"text","value":"-h"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-0983bb{color:#8B949E}\n.ct-baaf4d{color:#A5D6FF}\n.ct-6d9b6f{color:#79C0FF}\n.ct-2bfe0c{color:#C9D1D9}\n.ct-e8f290{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"archlinux","depth":2,"text":"Archlinux"},{"id":"установка","depth":2,"text":"Установка","children":[{"id":"использование","depth":3,"text":"Использование"},{"id":"конфигурация","depth":3,"text":"Конфигурация"}]}]}},"_type":"markdown","_id":"content:posts:psiphon.md","_source":"content","_file":"posts/psiphon.md","_extension":"md"}]