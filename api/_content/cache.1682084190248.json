{"generatedAt":1682084207483,"generateTime":77,"contents":[{"_path":"/links/bla-bla","_dir":"links","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Hello world","description":"desc","type":"link","date":"2009-08-04T00:00:00.000Z","tags":["dev"],"link":["http://lorem"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"lorem"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:links:bla-bla.md","_source":"content","_file":"links/bla-bla.md","_extension":"md"},{"_path":"/posts/arch-lvm-luks","_dir":"posts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Установка Arch Linux на зашифрованный раздел, LVM на LUKS","description":"Грузимся из под live-usb, устанавливаем ru язык и время.","date":"2020-03-23T00:00:00.000Z","type":"post","tags":["archlinux","crypt"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Грузимся из под live-usb, устанавливаем ru язык и время."}]},{"type":"element","tag":"code","props":{"code":"loadkeys ru\nsetfont cyr-sun16\ntimedatectl set-ntp true\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"loadkeys"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"ru"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"setfont"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"cyr-sun16"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"timedatectl"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"set-ntp"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"true"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"подготовка-к-установке"},"children":[{"type":"text","value":"Подготовка к установке"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Создаем таблицу на диске MBR(DOS) и 2 первичных раздела."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"LUKS под root, swap, home"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"boot 512M, выставляем флаг boot"}]}]},{"type":"element","tag":"code","props":{"code":"cfdisk\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"cfdisk"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Шифруем, открываем раздел. Создаем контейнер."}]},{"type":"element","tag":"code","props":{"code":"# подтверждаем YES\ncryptsetup -y luksFormat --type luks2 /dev/sda1\ncryptsetup open /dev/sda1 cryptlvm\n\npvcreate /dev/mapper/cryptlvm\nvgcreate lvarch /dev/mapper/cryptlvm\n\nls -l /dev/mapper/cryptlvm\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-046c3b"},"children":[{"type":"text","value":"# подтверждаем YES"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"cryptsetup"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-y"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"luksFormat"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"--type"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"luks2"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/dev/sda1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"cryptsetup"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"open"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/dev/sda1"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"cryptlvm"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"pvcreate"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/dev/mapper/cryptlvm"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"vgcreate"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"lvarch"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/dev/mapper/cryptlvm"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"ls"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-l"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/dev/mapper/cryptlvm"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Создаём разделы lvm."}]},{"type":"element","tag":"code","props":{"code":"lvcreate -L 4G -n swap lvarch\nlvcreate -L 25G -n root lvarch\nlvcreate -l 100%FREE -n home lvarch\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"lvcreate"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"4G"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-n"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"swap"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"lvarch"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"lvcreate"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"25G"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-n"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"root"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"lvarch"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"lvcreate"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-l"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"100"}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"%FREE"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-n"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"home"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"lvarch"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Форматируем и включаем swap."}]},{"type":"element","tag":"code","props":{"code":"mkfs.ext2 -L boot /dev/sda2\nmkfs.ext4 -L root /dev/lvarch/root\nmkfs.ext4 -L home /dev/lvarch/home\nmkswap -L swap /dev/lvarch/swap\nswapon /dev/lvarch/swap\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"mkfs.ext2"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"boot"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/dev/sda2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"mkfs.ext4"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"root"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/dev/lvarch/root"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"mkfs.ext4"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"home"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/dev/lvarch/home"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"mkswap"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"swap"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/dev/lvarch/swap"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"swapon"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/dev/lvarch/swap"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Монтируем и создаем директории."}]},{"type":"element","tag":"code","props":{"code":"mount /dev/lvarch/root /mnt\nmkdir /mnt/{home,boot}\nmount /dev/lvarch/home /mnt/home\nmount /dev/sda2 /mnt/boot\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/dev/lvarch/root"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/mnt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/mnt/{home,boot}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/dev/lvarch/home"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/mnt/home"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/dev/sda2"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/mnt/boot"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"установка-и-настройка"},"children":[{"type":"text","value":"Установка и настройка"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Установка базовой системы и необходимых пакетов."}]},{"type":"element","tag":"code","props":{"code":"pacstrap /mnt base base-devel linux linux-headers linux-firmware lvm2 nano networkmanager bash-completion reflector htop openssh curl wget git rsync unzip unrar p7zip gnu-netcat pv\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"pacstrap"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/mnt"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"base"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"base-devel"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"linux"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"linux-headers"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"linux-firmware"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"lvm2"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"networkmanager"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"bash-completion"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"reflector"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"htop"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"openssh"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"wget"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"rsync"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"unzip"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"unrar"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"p7zip"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"gnu-netcat"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"pv"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Генерируем и правим, если нужно fstab, выполняем chroot."}]},{"type":"element","tag":"code","props":{"code":"genfstab -pU /mnt >> /mnt/etc/fstab\ncat /mnt/etc/fstab\n\narch-chroot /mnt\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"genfstab"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-pU"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/mnt"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ad1cdf"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/mnt/etc/fstab"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/mnt/etc/fstab"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"arch-chroot"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/mnt"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Включаем multilib и сортируем зеркала."}]},{"type":"element","tag":"code","props":{"code":"sed -i \"/[multilib]/,/Include/\"'s/^#//' /etc/pacman.conf\n\nreflector -c \"Russia\" -c \"Belarus\" -c \"Ukraine\" -c \"Poland\" -f 20 -l 20 -p https -p http -n 20 --save /etc/pacman.d/mirrorlist --sort rate\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"sed"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-i"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"\"/[multilib]/,/Include/\"'s/^#//'"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/etc/pacman.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"reflector"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"\"Russia\""}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"\"Belarus\""}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"\"Ukraine\""}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"\"Poland\""}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-f"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-l"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"https"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"http"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-n"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"--save"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/etc/pacman.d/mirrorlist"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"--sort"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"rate"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Пароль root."}]},{"type":"element","tag":"code","props":{"code":"passwd\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"passwd"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Создаем пользователя st в нужных группах, назначаем пароль и включаем sudo."}]},{"type":"element","tag":"code","props":{"code":"useradd -m -g users -G \"adm,audio,log,network,rfkill,scanner,storage,optical,power,wheel\" -s /bin/bash -c \"Alex Creio\" st\n\npasswd st\n\necho \"%wheel ALL=(ALL) ALL\" >> /etc/sudoers\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"useradd"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-m"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-g"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"users"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-G"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"\"adm,audio,log,network,rfkill,scanner,storage,optical,power,wheel\""}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-s"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/bin/bash"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"\"Alex Creio\""}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"st"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"passwd"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"st"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"\"%wheel ALL=(ALL) ALL\""}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ad1cdf"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/etc/sudoers"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Назначаем hostname: имя машины и часовой пояс, время."}]},{"type":"element","tag":"code","props":{"code":"echo \"ctlos\" > /etc/hostname\nln -svf /usr/share/zoneinfo/Europe/Moscow /etc/localtime\ntimedatectl set-ntp true\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"\"ctlos\""}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ad1cdf"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/etc/hostname"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"ln"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-svf"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/usr/share/zoneinfo/Europe/Moscow"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/etc/localtime"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"timedatectl"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"set-ntp"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"true"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Генерируем локали и включаем русский язык системы."}]},{"type":"element","tag":"code","props":{"code":"echo \"en_US.UTF-8 UTF-8\" > /etc/locale.gen\necho \"ru_RU.UTF-8 UTF-8\" >> /etc/locale.gen\nlocale-gen\necho \"LANG=ru_RU.UTF-8\" > /etc/locale.conf\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"\"en_US.UTF-8 UTF-8\""}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ad1cdf"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/etc/locale.gen"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"\"ru_RU.UTF-8 UTF-8\""}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ad1cdf"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/etc/locale.gen"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"locale-gen"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"\"LANG=ru_RU.UTF-8\""}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ad1cdf"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/etc/locale.conf"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Добавляем поддержку ru в консоле."}]},{"type":"element","tag":"code","props":{"code":"echo \"KEYMAP=ru\" >> /etc/vconsole.conf\necho \"FONT=cyr-sun16\" >> /etc/vconsole.conf\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"\"KEYMAP=ru\""}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ad1cdf"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/etc/vconsole.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"\"FONT=cyr-sun16\""}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ad1cdf"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/etc/vconsole.conf"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Добавляем хуки (порядок важен) и создаем загрузочный образ."}]},{"type":"element","tag":"code","props":{"code":"### добавить keyboard keymap encrypt lvm2\n# HOOKS=(base udev autodetect keyboard keymap modconf block encrypt lvm2 filesystems fsck)\nnano /etc/mkinitcpio.conf\n\nmkinitcpio -p linux\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-046c3b"},"children":[{"type":"text","value":"### добавить keyboard keymap encrypt lvm2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-046c3b"},"children":[{"type":"text","value":"# HOOKS=(base udev autodetect keyboard keymap modconf block encrypt lvm2 filesystems fsck)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/etc/mkinitcpio.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"mkinitcpio"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"linux"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Устанавливаем Grub."}]},{"type":"element","tag":"code","props":{"code":"pacman -S --noconfirm --needed grub\ngrub-install /dev/sda\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"pacman"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"--noconfirm"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"--needed"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"grub"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"grub-install"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/dev/sda"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Настраиваем и конфигурируем grub."}]},{"type":"element","tag":"code","props":{"code":"## узнаём UUID\nblkid /dev/sda1\n# /dev/sda1: UUID=\"c0868972-f314-48e1-9be5-3584826dbd64\" TYPE=\"crypto_LUKS\" PARTUUID=\"bbb93e39-01\"\n\nnano /etc/default/grub\n\n## Прописываем команду для старта и включаем.\nGRUB_CMDLINE_LINUX=\"cryptdevice=UUID=c0868972-f314-48e1-9be5-3584826dbd64:cryptlvm root=/dev/lvarch/root\"\nGRUB_ENABLE_CRYPTODISK=y\n\n## конфигурируем\ngrub-mkconfig -o /boot/grub/grub.cfg\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-046c3b"},"children":[{"type":"text","value":"## узнаём UUID"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"blkid"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/dev/sda1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-046c3b"},"children":[{"type":"text","value":"# /dev/sda1: UUID=\"c0868972-f314-48e1-9be5-3584826dbd64\" TYPE=\"crypto_LUKS\" PARTUUID=\"bbb93e39-01\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/etc/default/grub"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-046c3b"},"children":[{"type":"text","value":"## Прописываем команду для старта и включаем."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":"GRUB_CMDLINE_LINUX"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1cdf"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"\"cryptdevice=UUID=c0868972-f314-48e1-9be5-3584826dbd64:cryptlvm root=/dev/lvarch/root\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":"GRUB_ENABLE_CRYPTODISK"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1cdf"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"y"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-046c3b"},"children":[{"type":"text","value":"## конфигурируем"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"grub-mkconfig"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/boot/grub/grub.cfg"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Включаем необходимые сервисы."}]},{"type":"element","tag":"code","props":{"code":"systemctl enable NetworkManager\nsystemctl enable sshd\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"NetworkManager"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"sshd"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Выходим из chroot, отмонтируем разделы и закроем контейнер."}]},{"type":"element","tag":"code","props":{"code":"exit\numount -Rf /mnt\nvgchange -a n lvarch\ncryptsetup close cryptlvm\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"exit"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"umount"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-Rf"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/mnt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"vgchange"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-a"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"lvarch"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"cryptsetup"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"close"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"cryptlvm"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"резервное-копирование-luksheader"},"children":[{"type":"text","value":"Резервное копирование luksHeader"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Просмотр информации."}]},{"type":"element","tag":"code","props":{"code":"cryptsetup luksDump /dev/sda1\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"cryptsetup"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"luksDump"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/dev/sda1"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Обязательно создайте backup заголовка."}]}]},{"type":"element","tag":"code","props":{"code":"cryptsetup luksHeaderBackup /dev/sda1 --header-backup-file luksheader.bac\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"cryptsetup"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"luksHeaderBackup"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/dev/sda1"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"--header-backup-file"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"luksheader.bac"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Шифруем."}]},{"type":"element","tag":"code","props":{"code":"openssl enc -aes-256-cbc -salt -in luksheader.bac -out luksheader.bac.enc\nrm luksheader.bac\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"openssl"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"enc"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-aes-256-cbc"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-salt"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-in"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"luksheader.bac"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-out"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"luksheader.bac.enc"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"rm"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"luksheader.bac"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Расшифровываем."}]},{"type":"element","tag":"code","props":{"code":"openssl enc -d -aes-256-cbc -in luksheader.bac.enc -out luksheader.bac\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"openssl"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"enc"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-d"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-aes-256-cbc"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-in"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"luksheader.bac.enc"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"-out"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"luksheader.bac"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Восстанавливаем, подтверждаем: YES."}]},{"type":"element","tag":"code","props":{"code":"cryptsetup luksHeaderRestore --header-backup-file luksheader.bac /dev/sda1\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b5cc2"},"children":[{"type":"text","value":"cryptsetup"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"luksHeaderRestore"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32c4d4"},"children":[{"type":"text","value":"--header-backup-file"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"luksheader.bac"}]},{"type":"element","tag":"span","props":{"class":"ct-a01499"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-85185b"},"children":[{"type":"text","value":"/dev/sda1"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Сохраняем в надёжное место "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"luksheader.bac.enc"}]},{"type":"text","value":", например на usb."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.youtube.com/watch?v=sGIrre2OVt4&t=238s","rel":["nofollow"]},"children":[{"type":"text","value":"Стеганографируем и в публичный доступ (video)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Profit!"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-ad1cdf{color:#FF7B72}\n.ct-046c3b{color:#8B949E}\n.ct-32c4d4{color:#79C0FF}\n.ct-85185b{color:#A5D6FF}\n.ct-a01499{color:#C9D1D9}\n.ct-8b5cc2{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"подготовка-к-установке","depth":2,"text":"Подготовка к установке"},{"id":"установка-и-настройка","depth":2,"text":"Установка и настройка"},{"id":"резервное-копирование-luksheader","depth":2,"text":"Резервное копирование luksHeader"}]}},"_type":"markdown","_id":"content:posts:arch-lvm-luks.md","_source":"content","_file":"posts/arch-lvm-luks.md","_extension":"md"},{"_path":"/posts/bspwm-0-1","_dir":"posts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Ctlos Linux Bspwm v0.1.0","description":"Создано в рамках Ctlos Linux, demo Video.","date":"2020-03-13T00:00:00.000Z","img":"/images/posts/bspwm.png","type":"post","tags":["bspwm"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Создано в рамках "},{"type":"element","tag":"a","props":{"href":"https://ctlos.github.io/","rel":["nofollow"]},"children":[{"type":"text","value":"Ctlos Linux"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"https://www.youtube.com/watch?v=INOtQJ_yZE4","rel":["nofollow"]},"children":[{"type":"text","value":"demo Video"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"bspwm","src":"/images/posts/bspwm.png"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"оформление"},"children":[{"type":"text","value":"Оформление"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Тема gtk: модификация Arc-Dark."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Иконки: Arc, dui-ico."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Курсор: capitaine-cursors."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Шрифт: Clear Sans Medium,9 ttf-clear-sans."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Шрифт терминала: Hack Nerd Font Mono,9 ttf-nerd-fonts-hack-complete-git."}]}]},{"type":"element","tag":"h2","props":{"id":"панели"},"children":[{"type":"text","value":"Панели"}]},{"type":"element","tag":"h3","props":{"id":"верхний-бар-polybar"},"children":[{"type":"text","value":"Верхний бар: polybar"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Элементы:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Запуск меню: левый клик - rofi, правый клик - jgmenu."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Urxvt с сессией tmux. Сессия сохраняется, при закрытии и восстанавливается, при следующем нажатии."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Newsboat - rss читалка."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Монитор cpu и ram."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Доступные обновления, клик: pacui - псевдо графический менеджер пакетов."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Рабочие столы (теги)."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Сервис tor. Включить левый клик, выключить правый."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Music контроллер."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Звук по скроллу, клик - выкл."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Дата. Лклик - подробней, Пклик - календарь."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Раскладка."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Меню выхода."}]}]},{"type":"element","tag":"h3","props":{"id":"нижний-бар-tint2трэй"},"children":[{"type":"text","value":"Нижний бар: tint2(трэй)"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"Key"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"udiskie"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"монтирование usb."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"redshift-gtk"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"цветовой тон экраа."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"xfce4-power-manager"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"менеджер питания."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"clipit"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"менеджер буфера обмена. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ctrl+alt+h"}]},{"type":"text","value":" открыть историю."}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"горячие-клавиши"},"children":[{"type":"text","value":"Горячие клавиши"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Многое переопределено, никто не мешает использовать дефолт, "},{"type":"element","tag":"a","props":{"href":"https://github.com/baskerville/bspwm/blob/master/examples/sxhkdrc","rel":["nofollow"]},"children":[{"type":"text","value":"sxhkdrc"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"режимы-и-управление-окнами"},"children":[{"type":"text","value":"Режимы и управление окнами"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Режим тайлинга tiled, плитка."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Режим pseudo_tiled, псевдо тайлинг. Нечто среднее между floating и tiled."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Режим floating, плавающий режим."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Режим fullscreen, Весь экран."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Режим monocle, окно занимает всё доступное пространство."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Зажатая Super(win) и клавиши мыши манипулируют окнами: размер, положение."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"Key"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + a"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Псевдо тайлинг."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + s"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"floating, плавающий режим."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + d"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"тайлинг."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + f"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"fullscreen."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + m"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Переключение режима monocle."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"alt + space"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Переключение режима тайлинг/floating."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + g"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Приклеить окно."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + z"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Закрыть окно."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + -"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Скрыть/показать окно."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + c"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Переход в режим monocle, отключение рамок и отступов."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + v"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Отключение отступов."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + {↑,↓}"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Уменьшение/увеличение отступов, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"super + c"}]},{"type":"text","value":" в исходное состояние."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + scroll"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Уменьшение/увеличение отступов, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"super + c"}]},{"type":"text","value":" в исходное состояние."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + {←,→,↑,↓}"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Перемещение окна в режиме floating."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + {h,j,k,l}"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"перемещение по окнам в режиме tiled."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + alt + {h,j,k,l}"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"изменение размера в режиме tiled."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + shift + {h,j,k,l}"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"перетаскивание в режиме tiled."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"alt + tab"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Переключение окна на текущем теге."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + tab"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Переключение на предыдущий тег."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + {1-9,0}"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Переход на тег."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + {q...o,0}"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Переход на тег."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + alt + {←,→}"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Перемещение по тегам."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + alt + {1-9,0}"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Отправка окна на номер тега."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + ctrl + p"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Скрыть/показать polybar."}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"запуск-утилит"},"children":[{"type":"text","value":"Запуск утилит"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"Key"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"alt + shift"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Переключение раскладки."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + alt + r"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Рестарт bspwm."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + alt + q"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Выход из bspwm."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + Escape"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Релоад конфига горячих клавиш sxhkd."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"alt + Return"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Терминал драйвинг, задаем координаты старта, зажатым ЛКМ."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + Return"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Терминал на первом теге, в режиме тайлинга, monocle."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"alt + t"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Терминал в режиме floating."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"alt + r"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Ranger - консольный менеджер файлов."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"alt + d"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Rofi - меню."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"alt + w"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Firefox."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"alt + f"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Thunar."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + Delete"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Блокировка экрана."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + alt + Delete"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Меню выхода."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Print"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"скрин с отправкой в "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/Pictures/screen"}]},{"type":"text","value":"(директория должна быть). Копируется в буфер."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + Print"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"скрин в режиме выделения."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + alt + Print"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"скрин с задержкой 5 сек. и отправкой в "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/Pictures/screen"}]},{"type":"text","value":"(директория должна быть). Копируется в буфер."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"super + alt + m"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Текущий трек в ncmpcpp."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"ctrl + alt + {c,v}"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Копировать/вставить в терминале."}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"конфигурационные-файлы"},"children":[{"type":"text","value":"Конфигурационные файлы"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"Key"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"~/.config/bspwm/bspwmrc"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Основной конфиг."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"~/.config/bspwm"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Скрипты."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"/usr/bin/bspwm_start"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Скрипт автостарта, редактировать от "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ROOT"}]},{"type":"text","value":". Он вызывается в "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/.xinitrc"}]},{"type":"text","value":" и в SDDM "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/usr/share/xsessions/bspwm.desktop"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"~/.config/sxhkd/sxhkdrc"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Конфиг горячих клавиш."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"/etc/sddm.conf"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Конфиг менеджера входа SDDM."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"~/.config/bspwm/polybar"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Скрипты и конфиг polybar."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"~/.config/tint2/tray.tint2rc"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Конфиг tint2 трей. В меню есть gui-конфигуратор (Настройки tint)."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"~/.config/picom.conf"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Декоратор окон, композитный менеджер."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"~/.Xresources"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Конфиг Urxvt терминала. После изменения файла выполнить "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"xrdb -merge $HOME/.Xresources"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"~/.colors"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Палитры терминала, указывать в "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/.Xresources"}]},{"type":"text","value":" строка "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"#include \".colors/sn\""}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"~/.zshrc"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Конфиг оболочки $SHELL."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"~/.alias_zsh"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Алиасы и функции zsh, сокращения команд терминала."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Это основа, все остальное в "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/"}]},{"type":"text","value":" и "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/.config"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"утилиты"},"children":[{"type":"text","value":"Утилиты"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"Key"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"lxappearance, qt5ct"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"настройка внешнего вида."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"lxrandr"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"разрешение экрана."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"ranger, thunar"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"файловые менеджеры."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"fzf"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"инкрементальный поиск, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"zz"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"micro"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"консольный текстовый редактор, привычные клавиши:) ctrl+s - сохранить, ctrl+q - выход и т.д."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"mousepad"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Gui текстовый редактор."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"ncmpcpp, audacious"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"музыкальный плеер."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"youtube-dl, youtube-viewer, streamlink"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"скачивание, просмотр, просмотр стриминга."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"xreader"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"просмотр pdf."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"viewnior"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"просмотр изображений."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"mpv"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"видео плеер."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"keepassxc"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"менеджер паролей."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"veracrypt"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"шифрование файлов."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"pavucontrol"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"управление звуком."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"file-roller"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"менеджер архивов."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"timeshift"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"резервное копирование."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"flameshot"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"скриншоты."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"simplescreenrecorder"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Запись экрана."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"tmux"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"терминальный мультиплексор."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"rxrun.sh"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Tmux с 3 табами. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/.bin/rxrun.sh"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"gufw"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"межсетевой экран."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"cava"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"визуализатор."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"gotop"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Консольный системный монитор."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"neofetch, fetch, pfetch"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"информация о системе. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/.bin/fetch"}]},{"type":"text","value":"."}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Еще некоторые скрипты: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/.bin"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Полный список пакетов: "},{"type":"element","tag":"a","props":{"href":"https://github.com/ctlos/ctlosiso/blob/bd44d18928ff28d33251e5af1efb93da303eba36/packages.both","rel":["nofollow"]},"children":[{"type":"text","value":"packages.both"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Вступай в telegram чат: "},{"type":"element","tag":"a","props":{"href":"https://t.me/ctlos","rel":["nofollow"]},"children":[{"type":"text","value":"t.me/ctlos"}]},{"type":"text","value":"."}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"оформление","depth":2,"text":"Оформление"},{"id":"панели","depth":2,"text":"Панели","children":[{"id":"верхний-бар-polybar","depth":3,"text":"Верхний бар: polybar"},{"id":"нижний-бар-tint2трэй","depth":3,"text":"Нижний бар: tint2(трэй)"}]},{"id":"горячие-клавиши","depth":2,"text":"Горячие клавиши","children":[{"id":"режимы-и-управление-окнами","depth":3,"text":"Режимы и управление окнами"},{"id":"запуск-утилит","depth":3,"text":"Запуск утилит"}]},{"id":"конфигурационные-файлы","depth":2,"text":"Конфигурационные файлы"},{"id":"утилиты","depth":2,"text":"Утилиты"}]}},"_type":"markdown","_id":"content:posts:bspwm-0-1.md","_source":"content","_file":"posts/bspwm-0-1.md","_extension":"md"},{"_path":"/posts/firewall","_dir":"posts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Firewall в linux | iptables | ufw","description":"Firewall — межсетевой экран. Просмотр инфы по портам, в пакете iproute2.","type":"post","date":"2021-10-23T00:00:00.000Z","tags":["firewall"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Firewall — межсетевой экран. Просмотр инфы по портам, в пакете iproute2."}]},{"type":"element","tag":"code","props":{"code":"ss -tulpn\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-376f9f"},"children":[{"type":"text","value":"ss"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0619d6"},"children":[{"type":"text","value":"-tulpn"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Самый распространенный iptables, над ним как правило уже обертки, типо ufw. Я использую ufw, так как не нужно городить огромные команды, как это происходит в чистом iptables."}]},{"type":"element","tag":"h2","props":{"id":"ufw"},"children":[{"type":"text","value":"Ufw"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Пакет есть в любом дистрибутиве. Предварительно включаем ssh, так как может порвать связь, а по дефолту все закрыто."}]},{"type":"element","tag":"h3","props":{"id":"установка-и-включение"},"children":[{"type":"text","value":"Установка и включение"}]},{"type":"element","tag":"code","props":{"code":"sudo pacman -S ufw\n\nsudo ufw allow ssh\nsudo ufw enable\nsudo systemctl enable --now ufw.service\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-376f9f"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"pacman"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0619d6"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"ufw"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-376f9f"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"allow"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"ssh"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-376f9f"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"enable"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-376f9f"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0619d6"},"children":[{"type":"text","value":"--now"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"ufw.service"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"использование"},"children":[{"type":"text","value":"Использование"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Присутствуют готовые правила, как ssh, а также можно указывать порты и протокол прямо 8080/tcp."}]},{"type":"element","tag":"code","props":{"code":"# справка\nsudo ufw help\n# статус\nsudo ufw status\n# перезагрузка\nsudo ufw reload\n# выключение\nsudo ufw disable\n# открыть порт/протокол\nsudo ufw allow 8000/tcp\nsudo ufw allow 8000/udp\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-756f3f"},"children":[{"type":"text","value":"# справка"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-376f9f"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"help"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-756f3f"},"children":[{"type":"text","value":"# статус"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-376f9f"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"status"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-756f3f"},"children":[{"type":"text","value":"# перезагрузка"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-376f9f"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"reload"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-756f3f"},"children":[{"type":"text","value":"# выключение"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-376f9f"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"disable"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-756f3f"},"children":[{"type":"text","value":"# открыть порт/протокол"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-376f9f"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"allow"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0619d6"},"children":[{"type":"text","value":"8000"}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"/tcp"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-376f9f"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"allow"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0619d6"},"children":[{"type":"text","value":"8000"}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"/udp"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"ubuntu-2004"},"children":[{"type":"text","value":"Ubuntu 20.04"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В юбунте встретил netfilter-persistent и он перебивал ufw. Соответственно выключаем его и делаем очистку flush, перезагружаем ufw."}]},{"type":"element","tag":"code","props":{"code":"# правила, до\nsudo iptables -L\n\nsudo systemctl disable --now netfilter-persistent.service\nsudo netfilter-persistent flush\n\nsudo ufw reload\nsudo systemctl restart ufw.service\nsudo systemctl status ufw.service\n\n# правила, после\nsudo iptables -L\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-756f3f"},"children":[{"type":"text","value":"# правила, до"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-376f9f"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"iptables"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0619d6"},"children":[{"type":"text","value":"-L"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-376f9f"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"disable"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0619d6"},"children":[{"type":"text","value":"--now"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"netfilter-persistent.service"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-376f9f"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"netfilter-persistent"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"flush"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-376f9f"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"reload"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-376f9f"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"ufw.service"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-376f9f"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"ufw.service"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-756f3f"},"children":[{"type":"text","value":"# правила, после"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-376f9f"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fef725"},"children":[{"type":"text","value":"iptables"}]},{"type":"element","tag":"span","props":{"class":"ct-7db375"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0619d6"},"children":[{"type":"text","value":"-L"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-756f3f{color:#8B949E}\n.ct-fef725{color:#A5D6FF}\n.ct-0619d6{color:#79C0FF}\n.ct-7db375{color:#C9D1D9}\n.ct-376f9f{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"ufw","depth":2,"text":"Ufw","children":[{"id":"установка-и-включение","depth":3,"text":"Установка и включение"},{"id":"использование","depth":3,"text":"Использование"},{"id":"ubuntu-2004","depth":3,"text":"Ubuntu 20.04"}]}]}},"_type":"markdown","_id":"content:posts:firewall.md","_source":"content","_file":"posts/firewall.md","_extension":"md"},{"_path":"/posts/fluxbb-discourse","_dir":"posts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Перенос форума fluxbb на discourse","description":"","date":"2021-06-19T00:00:00.000Z","type":"post","tags":["dev","fluxbb"],"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"перенос-mysql"},"children":[{"type":"text","value":"Перенос mysql"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Для переноса нужно получить базу данных форума fluxbb, наверняка вы знаете как это сделать, но если нет, то вот. Данные для подключение к базе, которые вы создавали, или то, что предоставил хостер, при создании."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"host_ip - ip или домен mysql."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"user_db - имя пользователя базы"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"PASS_WORD_DB - пароль к базе"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"db_name - имя базы"}]}]},{"type":"element","tag":"code","props":{"code":"# получение через ssh\nssh creio@125.120.10.54 \"mysqldump -h host_ip -u user_db -pPASS_WORD_DB db_name\" > ~/forum.sql\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-279103"},"children":[{"type":"text","value":"# получение через ssh"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"ssh"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"creio@125.120.10.54"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"\"mysqldump -h host_ip -u user_db -pPASS_WORD_DB db_name\""}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-045305"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"~/forum.sql"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"login-в-docker"},"children":[{"type":"text","value":"Login в docker"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Копируем mysql дамп базы в докер контейнер и логинемся в него."}]},{"type":"element","tag":"code","props":{"code":"docker cp ~/forum.sql app:/var/www/discourse\n\n# docker exec -it app /bin/bash --login\nsudo ./launcher enter app\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"cp"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"~/forum.sql"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"app:/var/www/discourse"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-279103"},"children":[{"type":"text","value":"# docker exec -it app /bin/bash --login"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"./launcher"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"enter"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"app"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Установка mysql и запуск."}]},{"type":"element","tag":"code","props":{"code":"apt install -y mariadb-server mariadb-client libmariadb-dev\nservice mysql start\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"-y"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"mariadb-server"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"mariadb-client"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"libmariadb-dev"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"service"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"mysql"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"start"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Создаем mysql базу, в которую выгрузим старые данные."}]},{"type":"element","tag":"code","props":{"code":"mysql -u root -p mysql\nmysql> CREATE USER 'fluxbb'@'localhost' IDENTIFIED BY 'fluxbb';\nmysql> CREATE DATABASE fluxbb;\nmysql> GRANT ALL PRIVILEGES ON fluxbb.* TO 'fluxbb'@'localhost';\nmysql> FLUSH PRIVILEGES;\nmysql> exit\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"mysql"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"-u"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"root"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"mysql"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"mysql>"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"CREATE"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"USER"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"'fluxbb'@'localhost'"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"IDENTIFIED"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"BY"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"'fluxbb'"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"mysql>"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"CREATE"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"DATABASE"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"fluxbb"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"mysql>"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"GRANT"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"ALL"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"PRIVILEGES"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"ON"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"fluxbb."}]},{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"TO"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"'fluxbb'@'localhost'"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"mysql>"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"FLUSH"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"PRIVILEGES"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"mysql>"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"exit"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Логинимся под юзера discourse."}]},{"type":"element","tag":"code","props":{"code":"su discourse\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"su"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"discourse"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Экспортируем базу данных fluxbb."}]},{"type":"element","tag":"code","props":{"code":"mysql -u fluxbb -p fluxbb < forum.sql\n# pass\nfluxbb\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"mysql"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"-u"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"fluxbb"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"fluxbb"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-045305"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"forum.sql"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-279103"},"children":[{"type":"text","value":"# pass"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"fluxbb"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Добавляем зависимости в Gemfile."}]},{"type":"element","tag":"code","props":{"code":"echo \"gem 'mysql2'\" >> Gemfile\necho \"gem 'redcarpet'\" >> Gemfile\necho \"gem 'ruby-bbcode-to-md', git: 'https://github.com/nlalonde/ruby-bbcode-to-md'\" >> Gemfile\necho \"gem 'reverse_markdown'\" >> Gemfile\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"\"gem 'mysql2'\""}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-045305"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"Gemfile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"\"gem 'redcarpet'\""}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-045305"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"Gemfile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"\"gem 'ruby-bbcode-to-md', git: 'https://github.com/nlalonde/ruby-bbcode-to-md'\""}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-045305"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"Gemfile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"\"gem 'reverse_markdown'\""}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-045305"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"Gemfile"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Установка зависимостей для корректной конвертации."}]},{"type":"element","tag":"code","props":{"code":"bundle config unset deployment\nbundle install --no-deployment --path vendor/bundle --jobs 4 --without test development\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"bundle"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"config"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"unset"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"deployment"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"bundle"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"--no-deployment"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"--path"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"vendor/bundle"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"--jobs"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"--without"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"development"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Данные для подключение к mysql, возможно у вас нет FLUXBB_PREFIX в базе и будет ошибка, попробуйте убрать это значение."}]},{"type":"element","tag":"code","props":{"code":"FLUXBB_HOST=\"localhost\" FLUXBB_DB=\"fluxbb\" FLUXBB_USER=\"fluxbb\" FLUXBB_PW=\"fluxbb\" FLUXBB_PREFIX=\"bb_\" bundle exec ruby script/import_scripts/fluxbb.rb\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":"FLUXBB_HOST"}]},{"type":"element","tag":"span","props":{"class":"ct-045305"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"\"localhost\""}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" FLUXBB_DB"}]},{"type":"element","tag":"span","props":{"class":"ct-045305"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"\"fluxbb\""}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" FLUXBB_USER"}]},{"type":"element","tag":"span","props":{"class":"ct-045305"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"\"fluxbb\""}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" FLUXBB_PW"}]},{"type":"element","tag":"span","props":{"class":"ct-045305"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"\"fluxbb\""}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" FLUXBB_PREFIX"}]},{"type":"element","tag":"span","props":{"class":"ct-045305"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"\"bb_\""}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" bundle exec ruby script/import_scripts/fluxbb.rb"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Изменение домена, полезно выполнить на тестовом домене, а когда все готово изменить на основной, "},{"type":"element","tag":"a","props":{"href":"https://meta.discourse.org/t/change-the-domain-name-or-rename-my-discourse/16098","rel":["nofollow"]},"children":[{"type":"text","value":"meta.discourse.org"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"обновление-discourse"},"children":[{"type":"text","value":"Обновление discourse"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Первым делом стоит обновить сам сервер(ubuntu/debian)."}]},{"type":"element","tag":"code","props":{"code":"apt-get update\napt-get dist-upgrade\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"apt-get"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"update"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"apt-get"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"dist-upgrade"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Включить автообновления(не обязательно) и не везде это возможно, для убунту."}]},{"type":"element","tag":"code","props":{"code":"sudo dpkg-reconfigure -plow unattended-upgrades\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"dpkg-reconfigure"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"-plow"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"unattended-upgrades"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Discourse работает в докере и используются скрипты для упрощения."}]},{"type":"element","tag":"code","props":{"code":"sudo su\ncd /var/discourse\ngit pull\n./launcher rebuild app\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"su"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"/var/discourse"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"pull"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"/launcher"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"rebuild"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"app"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"После обновления и запусков rebuild будут плодится контейнеры и images, которые забивают диск, но не используются."}]},{"type":"element","tag":"code","props":{"code":"# размер диска\ndf -h /\n# размеры директорий\ndu -sh /var/lib/*\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-279103"},"children":[{"type":"text","value":"# размер диска"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"df"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"-h"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-279103"},"children":[{"type":"text","value":"# размеры директорий"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"du"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"-sh"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"/var/lib/"}]},{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"*"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Удалить не нужные образы можно через docker, или через скрипт, имейте ввиду скрипт снесет все остановленные контейнеры и удалит все неиспользуемые образы. Дело в том, что если у вас работает, что-то еще кроме discourse в докере, то лучше работать именно самим docker-ом и удалять по id(7281bf55ce46)."}]},{"type":"element","tag":"code","props":{"code":"# листинг контейнеров\ndocker ps -a\n# удаление контейнеров(CONTAINER ID)\ndocker rm 8ee579ceabf7\n\n# листинг образов\ndocker images\n# удаление образов(IMAGE ID)\ndocker rmi 7281bf55ce46\n\n# удаление всего скриптом\n./launcher cleanup\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-279103"},"children":[{"type":"text","value":"# листинг контейнеров"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"ps"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"-a"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-279103"},"children":[{"type":"text","value":"# удаление контейнеров(CONTAINER ID)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"rm"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"8ee579ceabf7"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-279103"},"children":[{"type":"text","value":"# листинг образов"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"images"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-279103"},"children":[{"type":"text","value":"# удаление образов(IMAGE ID)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"rmi"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"7281bf55ce46"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-279103"},"children":[{"type":"text","value":"# удаление всего скриптом"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8dc17"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"/launcher"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"cleanup"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Очистка системы apt."}]},{"type":"element","tag":"code","props":{"code":"apt-get autoclean\napt-get autoremove\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"apt-get"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"autoclean"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e6b94"},"children":[{"type":"text","value":"apt-get"}]},{"type":"element","tag":"span","props":{"class":"ct-f8c7ad"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b0c4"},"children":[{"type":"text","value":"autoremove"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-e8dc17{color:#79C0FF}\n.ct-045305{color:#FF7B72}\n.ct-e6b0c4{color:#A5D6FF}\n.ct-f8c7ad{color:#C9D1D9}\n.ct-6e6b94{color:#FFA657}\n.ct-279103{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"перенос-mysql","depth":2,"text":"Перенос mysql"},{"id":"login-в-docker","depth":2,"text":"Login в docker"},{"id":"обновление-discourse","depth":2,"text":"Обновление discourse"}]}},"_type":"markdown","_id":"content:posts:fluxbb-discourse.md","_source":"content","_file":"posts/fluxbb-discourse.md","_extension":"md"},{"_path":"/posts/media-server","_dir":"posts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Настройка автоматической загрузки фильмов с торрентов","description":"Все будет проделано из под Arch Linux, но суть везде одна, весь этот софт есть и под windows.","date":"2021-09-27T00:00:00.000Z","type":"post","img":"/images/posts/radarr.png","tags":["docker","mediaserver"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Все будет проделано из под Arch Linux, но суть везде одна, весь этот софт есть и под windows."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://odysee.com/@creio:5/%D1%81x*%D1%8F%D1%87%D0%B8%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%84%D0%B8%D0%BB%D1%8C%D0%BC%D0%BE%D0%B2:3","rel":["nofollow"]},"children":[{"type":"text","value":"odysee.com"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://youtu.be/zHz9XqzUi5Q","rel":["nofollow"]},"children":[{"type":"text","value":"Второе видео"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://youtu.be/DK-hcczVwq0","rel":["nofollow"]},"children":[{"type":"text","value":"Третье"}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Задача: Максимально автоматизировать процесс скачивания как новых фильмов, так и существующих."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Конечный результат, заходим на Imdb(авторизация), добавляем нужный фильм в список и на выходе получаем нужное в директории Films. Второй вариант, заходим в телеграм, отправляем боту название фильма и на выходе получаем нужное."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Исследовав этот вопрос в могучем гугле, вырисовывается простой вариант с использованием связки в docker, статей на данную тему не много, но их достаточно, даже с примерами композ файлов, собственно америку не открываем, а используем и попутно вникаем в настройку, которая не раскрыта в полной мере."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Radarr/Sonarr - это менеджер коллекций фильмов/сериалов."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Imdb - список отслеживания."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Jackett - менеджер торрент трекеров."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Qbittorrent - торрент клиент."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Gramarr - телеграм бот."}]}]},{"type":"element","tag":"h2","props":{"id":"portainer-docker"},"children":[{"type":"text","value":"Portainer docker"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Установим docker и веб морду для удобства администрирования. "},{"type":"element","tag":"a","props":{"href":"/posts/web-server#docker-portainer"},"children":[{"type":"text","value":"Об этом я уже писал"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"sudo pacman -S docker-compose\nsudo usermod -aG docker ${USER}\nsu - ${USER}\nsudo systemctl start docker\n\ndocker volume create portainer_data\ndocker run -d --network host --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"pacman"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"docker-compose"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"usermod"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"-aG"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" ${USER}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"su"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" ${USER}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"start"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"docker"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"volume"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"portainer_data"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"-d"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"--network"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"host"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"--name=portainer"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"--restart=always"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"-v"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"/var/run/docker.sock:/var/run/docker.sock"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"-v"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"portainer_data:/data"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"portainer/portainer-ce"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Портайнер работает на "},{"type":"element","tag":"a","props":{"href":"http://localhost:9000","rel":["nofollow"]},"children":[{"type":"text","value":"http://localhost:9000"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"настраиваем-контейнеры"},"children":[{"type":"text","value":"Настраиваем контейнеры"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Создаем нужные директории, compos файл."}]},{"type":"element","tag":"code","props":{"code":"mkdir -p ~/docker-app/mediaserver\ncd ~/docker-app/mediaserver\nmkdir -p ./{downloadclient-downloads,radarr,sonarr,qbittorrent,jackett,gramarr,TV,Films}\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"~/docker-app/mediaserver"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"~/docker-app/mediaserver"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"./{downloadclient-downloads,radarr,sonarr,qbittorrent,jackett,gramarr,TV,Films}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Создаем докер сеть."}]},{"type":"element","tag":"code","props":{"code":"docker network create -d bridge --subnet=172.23.0.0/24 --gateway 172.23.0.1 media-proxy\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"network"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"-d"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"bridge"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"--subnet=172.23.0.0/24"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"--gateway"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"172.23.0.1"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"media-proxy"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Создаем сценарий. Узнаем PUID/PGID командой id и вставляем следующее заменив только id."}]},{"type":"element","tag":"code","props":{"code":"nano docker-compose.yml\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"docker-compose.yml"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"---\nversion: \"2\"\nservices:\n  sonarr:\n    image: linuxserver/sonarr\n    networks:\n      default:\n        ipv4_address: 172.23.0.51\n    container_name: sonarr\n    environment:\n      - PUID=1000\n      - PGID=985\n      - TZ=Europe/Moscow\n      - UMASK_SET=022 #optional\n    volumes:\n      - ./sonarr:/config\n      - ./TV:/tv\n      - ./downloadclient-downloads:/downloads\n    ports:\n      - 6001:8989\n    restart: unless-stopped\n\n  radarr:\n    image: linuxserver/radarr\n    networks:\n      default:\n        ipv4_address: 172.23.0.52\n    container_name: radarr\n    environment:\n      - PUID=1000\n      - PGID=985\n      - TZ=Europe/Moscow\n      - UMASK_SET=022 #optional\n    volumes:\n      - ./radarr:/config\n      - ./Films:/movies\n      - ./downloadclient-downloads:/downloads\n    ports:\n      - 6002:7878\n    restart: unless-stopped\n\n  qbittorrent:\n    image: linuxserver/qbittorrent\n    networks:\n      default:\n        ipv4_address: 172.23.0.53\n    container_name: qbittorrent\n    environment:\n      - PUID=1000\n      - PGID=985\n      - TZ=Europe/Moscow\n      - UMASK_SET=022\n      - WEBUI_PORT=6003\n    volumes:\n      - ./qbittorrent:/config\n      - ./downloadclient-downloads:/downloads\n    ports:\n      - 6881:6881\n      - 6881:6881/udp\n      - 6003:6003\n    restart: unless-stopped\n\n  jackett:\n    image: linuxserver/jackett\n    networks:\n      default:\n        ipv4_address: 172.23.0.54\n    container_name: jackett\n    environment:\n      - PUID=1000\n      - PGID=985\n      - TZ=Europe/Moscow\n      # - RUN_OPTS=run options here #optional\n    volumes:\n      - ./jackett/config:/config\n      - ./downloadclient-downloads:/downloads\n    ports:\n      - 6004:9117\n    restart: unless-stopped\n\n  gramarrru:\n    image: memodota/gramarrru\n    networks:\n      default:\n        ipv4_address: 172.23.0.55\n    container_name: gramarrru\n    depends_on:\n      - sonarr\n      - radarr\n    volumes:\n      - ./gramarr/config.json:/config/config.json\n    restart: unless-stopped\n\nnetworks:\n  default:\n    external: true\n    name: media-proxy\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"---"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"version:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"\"2\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"services:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"sonarr:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"image:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"linuxserver/sonarr"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"networks:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"default:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"ipv4_address:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"172.23.0.51"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"container_name:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"sonarr"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"environment:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"PUID="}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"1000"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"PGID="}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"985"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"TZ=Europe/Moscow"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"UMASK_SET="}]},{"type":"element","tag":"span","props":{"class":"ct-3408a5"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"22"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9aabdf"},"children":[{"type":"text","value":"#optional"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"volumes:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"./sonarr:/config"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"./TV:/tv"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"./downloadclient-downloads:/downloads"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"ports:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"6001"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"8989"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"restart:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"unless-stopped"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"radarr:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"image:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"linuxserver/radarr"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"networks:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"default:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"ipv4_address:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"172.23.0.52"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"container_name:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"radarr"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"environment:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"PUID="}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"1000"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"PGID="}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"985"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"TZ=Europe/Moscow"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"UMASK_SET="}]},{"type":"element","tag":"span","props":{"class":"ct-3408a5"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"22"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9aabdf"},"children":[{"type":"text","value":"#optional"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"volumes:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"./radarr:/config"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"./Films:/movies"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"./downloadclient-downloads:/downloads"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"ports:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"6002"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"7878"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"restart:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"unless-stopped"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"qbittorrent:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"image:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"linuxserver/qbittorrent"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"networks:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"default:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"ipv4_address:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"172.23.0.53"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"container_name:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"qbittorrent"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"environment:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"PUID="}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"1000"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"PGID="}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"985"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"TZ=Europe/Moscow"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"UMASK_SET="}]},{"type":"element","tag":"span","props":{"class":"ct-3408a5"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"22"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"WEBUI_PORT="}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"6003"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"volumes:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"./qbittorrent:/config"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"./downloadclient-downloads:/downloads"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"ports:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"6881"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"6881"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"6881"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"6881"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"/udp"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"6003"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"6003"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"restart:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"unless-stopped"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"jackett:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"image:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"linuxserver/jackett"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"networks:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"default:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"ipv4_address:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"172.23.0.54"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"container_name:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"jackett"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"environment:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"PUID="}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"1000"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"PGID="}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"985"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"TZ=Europe/Moscow"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-9aabdf"},"children":[{"type":"text","value":"# - RUN_OPTS=run options here #optional"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"volumes:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"./jackett/config:/config"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"./downloadclient-downloads:/downloads"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"ports:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"6004"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"9117"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"restart:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"unless-stopped"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"gramarrru:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"image:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"memodota/gramarrru"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"networks:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"default:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"ipv4_address:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"172.23.0.55"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"container_name:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"gramarrru"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"depends_on:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"sonarr"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"radarr"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"volumes:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"./gramarr/config.json:/config/config.json"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"restart:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"unless-stopped"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"networks:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"default:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"external:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"true"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"media-proxy"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Создаем gramarr конфиг."}]},{"type":"element","tag":"code","props":{"code":"nano gramarr/config.json\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"gramarr/config.json"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Вставляем следующее. Токены будем заполнять по мере получения, пароли на ваше усмотрение. IP не меняем."}]},{"type":"element","tag":"code","props":{"code":"{\n  \"telegram\": {\n    \"botToken\": \"123123123:BBCCVVf-As-2IPSUMQy2w_HnLoReMqk\"\n  },\n  \"bot\": {\n    \"password\": \"\",\n    \"adminPassword\": \"demo\"\n  },\n  \"radarr\": {\n    \"hostname\": \"172.23.0.52\",\n    \"apiKey\": \"6brandomfb3e23\",\n    \"port\": 7878,\n    \"urlBase\": \"\",\n    \"ssl\": false,\n    \"username\": \"admin\",\n    \"password\": \"pass_radarr\",\n    \"maxResults\": 6\n  },\n  \"sonarr\": {\n    \"hostname\": \"172.23.0.51\",\n    \"apiKey\": \"1b5random29546\",\n    \"port\": 8989,\n    \"urlBase\": \"\",\n    \"ssl\": false,\n    \"username\": \"admin\",\n    \"password\": \"pass_sonarr\",\n    \"maxResults\": 6\n  }\n}\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"  \"telegram\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"    \"botToken\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":" \"123123123:BBCCVVf-As-2IPSUMQy2w_HnLoReMqk\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"  },"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"  \"bot\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"    \"password\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":" \"\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"    \"adminPassword\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":" \"demo\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"  },"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"  \"radarr\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"    \"hostname\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":" \"172.23.0.52\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"    \"apiKey\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":" \"6brandomfb3e23\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"    \"port\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"7878"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"    \"urlBase\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":" \"\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"    \"ssl\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"    \"username\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":" \"admin\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"    \"password\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":" \"pass_radarr\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"    \"maxResults\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"6"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"  },"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"  \"sonarr\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"    \"hostname\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":" \"172.23.0.51\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"    \"apiKey\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":" \"1b5random29546\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"    \"port\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"8989"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"    \"urlBase\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":" \"\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"    \"ssl\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"    \"username\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":" \"admin\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"    \"password\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":" \"pass_sonarr\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"    \"maxResults\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"6"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Собственно можно запускать и открывать на указанных портах назначаем пароли и получаем apiKey(ключи). Порты как в докер файле слева локальные, справа внутри докера(не интересуют). Стартуем находясь в директории с docker-compose.yml."}]},{"type":"element","tag":"code","props":{"code":"docker-compose up -d\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"docker-compose"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"up"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"-d"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Переходим в portainer "},{"type":"element","tag":"a","props":{"href":"http://localhost:9000","rel":["nofollow"]},"children":[{"type":"text","value":"http://localhost:9000"}]},{"type":"text","value":", на вкладку stacks и видим mediaserver, перейдя в который увидим все приложения, возможно gramarr не запустился и это нормально, просто отсюда возможно удобней делать перезапуск всех разом и видеть их статус."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sonarr я рассматривать не буду, только базовая доступность, но он почти похож на radarr думаю разберетесь."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Sonarr: Settings - general."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Radarr: Settings - general."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Qbittorrent: Tools - Options - Web Ui. Меняем язык, сохраняем и перезагружаем стр. логин: admin, пароль: adminadmin, лучше поменять."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Попутно добавляем данные в gramarr/config.json."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://localhost:6001","rel":["nofollow"]},"children":[{"type":"text","value":"Sonarr http://localhost:6001"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://localhost:6002","rel":["nofollow"]},"children":[{"type":"text","value":"Radarr http://localhost:6002"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://localhost:6003","rel":["nofollow"]},"children":[{"type":"text","value":"Qbittorrent http://localhost:6003"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://localhost:6004","rel":["nofollow"]},"children":[{"type":"text","value":"Jackett http://localhost:6004"}]}]}]},{"type":"element","tag":"h2","props":{"id":"создание-бота-telegram"},"children":[{"type":"text","value":"Создание бота telegram"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Открываем бота @BotFather и в нем создаем своего для грамарра."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"/newbot пишем имя, MMediaBot"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Затем ник, на конце обязательно bot, mudazvonbot."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Имя может быть занято, пробуйте различные вариации. В итоге должны увидеть \"Done! ...\", ссылка "},{"type":"element","tag":"a","props":{"href":"http://t.me/mudazvonbot","rel":["nofollow"]},"children":[{"type":"text","value":"http://t.me/mudazvonbot"}]},{"type":"text","value":" и api ключ, копировать полностью выделенный ключ и вставить в config.json. password оставляем пустым, а adminPassword назначаем он нужен в самом боте mudazvonbot, для авторизации."}]},{"type":"element","tag":"code","props":{"code":"  \"telegram\": {\n    \"botToken\": \"123123123:BBCCVVf-As-2IPSUMQy2w_HnLoReMqk\"\n  },\n  \"bot\": {\n    \"password\": \"\",\n    \"adminPassword\": \"demo\"\n  },\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"  \"telegram\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"    \"botToken\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":" \"123123123:BBCCVVf-As-2IPSUMQy2w_HnLoReMqk\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"  },"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"  \"bot\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"    \"password\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":" \"\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"    \"adminPassword\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":" \"demo\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"  },"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Собственно с ботом все и его конфигом, пока он не работает, так как связка еще не полна."}]},{"type":"element","tag":"h2","props":{"id":"настройка-jackett"},"children":[{"type":"text","value":"Настройка Jackett"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://localhost:6004","rel":["nofollow"]},"children":[{"type":"text","value":"Jackett http://localhost:6004"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Тут только добавляем трекеры, add indexer и в поиск по очереди: Rutor, RuTracker, NoNaMe. Добавляем публичные, а еще лучше и приватные с логином и паролем semi-private(nnmclub/rutracker)."}]},{"type":"element","tag":"h2","props":{"id":"настройка-radarr"},"children":[{"type":"text","value":"Настройка radarr"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://localhost:6002","rel":["nofollow"]},"children":[{"type":"text","value":"radarr http://localhost:6002"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Меняем язык settings - ui, включаем вверху Show Advanced, сохраняем Save и обновляем стр."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Регаем акк на "},{"type":"element","tag":"a","props":{"href":"https://www.imdb.com/","rel":["nofollow"]},"children":[{"type":"text","value":"www.imdb.com"}]},{"type":"text","value":", создаем и делаем список публичным, копируем ид в адресной строке ls503478540."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Идем в Настройки - Списки и добавляем список Imdb. Вставляем полученный UserId ls503478540, выбрать предпочтительный профиль качества. Остальное вроде по умолчанию, тест и сохранить. Если выставить удалить фильм и его файлы в Очистить уровень библиотеки, то когда убираем отслеживание в imdb фильм удаляется с radarr и Films, но в qbit остается."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Идем в Настройки - Клиенты для скачивания, добавляем qbit, указав логин и пароль от него, "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"обязательно"}]},{"type":"text","value":" внутренний ip: 172.23.0.53 и порт: 6003. Остальное по умолчанию, тест - сохранить."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Настройки - Индексаторы, копируем листы по очередно Torznab Feed из Jackett. Один feed - одна запись в индексатор. Заполняем имя(любое, по имени трекера например - rutor), в URL вставляем скопированный feed и "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"обязательно меняем"}]},{"type":"text","value":" в ссылке ip и порт на внутренний: 172.23.0.54:9117. По аналогии и с другими трекерами."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://localhost:6004","rel":["nofollow"]},"children":[{"type":"text","value":"Jackett http://localhost:6004"}]},{"type":"text","value":". Настройки - Профили тут просто везде поменял язык на Русский."}]},{"type":"element","tag":"h2","props":{"id":"конец"},"children":[{"type":"text","value":"Конец"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Перезапустить контейнеры в portainer, при добавление в список imdb(синхронит каждые 6 часов). Если все правильно, то добавление должно появиться и в радаре и в qbit."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Авторизация у бота /auth SUPERPASS, а возможности п /help. Бот также должен ответить с выборам качества и с сохранением в /movies. Да в докере это директория /movies, а локально мы ее смонтировали в Films, также и с /downloads - локально downloadclient-downloads."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"После удаления из списка imdb, фильм удаляется, но вот торрент нужно удалить в qbit и он удалиться и из downloadclient-downloads, "},{"type":"element","tag":"a","props":{"href":"http://localhost:6003/","rel":["nofollow"]},"children":[{"type":"text","value":"qbit http://localhost:6003/"}]},{"type":"text","value":"."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Принудительно считать imdb list, можно повесить на крон. В apikey= поставить ключ radarr."}]}]},{"type":"element","tag":"code","props":{"code":"curl -X POST \"http://localhost:6002/api/v3/command?apikey=6random132loremasd23\" -H \"accept: application/json\" -d '{\"name\":\"ImportListSync\"}'\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"-X"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"POST"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"\"http://localhost:6002/api/v3/command?apikey=6random132loremasd23\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"-H"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"\"accept: application/json\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"-d"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"'{\"name\":\"ImportListSync\"}'"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Настройка и запуск крона на 5 мин."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://crontab.guru/#5_*_*_*_*","rel":["nofollow"]},"children":[{"type":"text","value":"crontab.guru/#5_"},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"_"}]},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"*"}]},{"type":"text","value":"*"}]}]},{"type":"element","tag":"code","props":{"code":"yay -S cronie\n\nEDITOR=nano crontab -e\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"cronie"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"EDITOR"}]},{"type":"element","tag":"span","props":{"class":"ct-3408a5"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" crontab -e"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"5 * * * * curl -X POST \"http://localhost:6002/api/v3/command?apikey=6random132loremasd23\" -H \"accept: application/json\" -d '{\"name\":\"ImportListSync\"}'\n\nsudo systemctl enable --now cronie\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3408a5"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3408a5"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3408a5"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3408a5"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" curl -X POST"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":" \"http://localhost:6002/api/v3/command?apikey=6random132loremasd23\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" -H"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":" \"accept: application/json\""}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" -d "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"'{\"name\":\"ImportListSync\"}'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"--now"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"cronie"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"radarr","src":"/images/posts/radarr.png"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"qbit-jackett"},"children":[{"type":"text","value":"Qbit jackett"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Только поиск в qbittorrent "},{"type":"element","tag":"a","props":{"href":"https://youtu.be/DK-hcczVwq0","rel":["nofollow"]},"children":[{"type":"text","value":"youtu.be/DK-hcczVwq0"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"mkdir ~/qbit\ncd ~/qbit\nnano docker-compose.yml\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"~/qbit"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"~/qbit"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"docker-compose.yml"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"---\nversion: \"2\"\nservices:\n  qbittorrent:\n    image: linuxserver/qbittorrent\n    container_name: qbittorrent\n    environment:\n      - PUID=1000\n      - PGID=985\n      - TZ=Europe/Moscow\n      - UMASK_SET=022\n      - WEBUI_PORT=6003\n    volumes:\n      - ./qbittorrent:/config/qBittorrent\n      - ./downloads:/downloads\n    ports:\n      - 6881:6881\n      - 6881:6881/udp\n      - 6003:6003\n    restart: unless-stopped\n\n  jackett:\n    image: linuxserver/jackett\n    container_name: jackett\n    environment:\n      - PUID=1000\n      - PGID=985\n      - TZ=Europe/Moscow\n    volumes:\n      - ./jackett:/config/Jackett\n    ports:\n      - 6004:9117\n    restart: unless-stopped\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"---"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"version:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"\"2\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"services:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"qbittorrent:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"image:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"linuxserver/qbittorrent"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"container_name:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"qbittorrent"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"environment:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"PUID="}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"1000"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"PGID="}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"985"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"TZ=Europe/Moscow"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"UMASK_SET="}]},{"type":"element","tag":"span","props":{"class":"ct-3408a5"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"22"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"WEBUI_PORT="}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"6003"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"volumes:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"./qbittorrent:/config/qBittorrent"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"./downloads:/downloads"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"ports:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"6881"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"6881"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"6881"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"6881"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"/udp"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"6003"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"6003"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"restart:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"unless-stopped"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"jackett:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"image:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"linuxserver/jackett"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"container_name:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"jackett"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"environment:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"PUID="}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"1000"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"PGID="}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"985"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"TZ=Europe/Moscow"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"volumes:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"./jackett:/config/Jackett"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"ports:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"6004"}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"9117"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"restart:"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"unless-stopped"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"docker compose up -d\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bee52c"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"compose"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895b0c"},"children":[{"type":"text","value":"up"}]},{"type":"element","tag":"span","props":{"class":"ct-3831e0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28d1b3"},"children":[{"type":"text","value":"-d"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"опирался-на-следующие-материалы"},"children":[{"type":"text","value":"Опирался на следующие материалы"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://sprut.ai/client/article/3169","rel":["nofollow"]},"children":[{"type":"text","value":"Тут немного про sonarr sprut.ai"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://habr.com/ru/post/505814/","rel":["nofollow"]},"children":[{"type":"text","value":"habr"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://connect.smartliving.ru/profile/225/blog/ustanovka-i-nastroyka-sonarr-radarr-qbittorrent-jackett-torproxy-v-docker.html","rel":["nofollow"]},"children":[{"type":"text","value":"connect.smartliving.ru"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://ctlos.github.io/donat/","rel":["nofollow"]},"children":[{"type":"text","value":"Поблагодарить меня можно тут"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"PSS:) Вопросы и предложения можно оставить в чате "},{"type":"element","tag":"a","props":{"href":"https://telegram.me/ctlos","rel":["nofollow"]},"children":[{"type":"text","value":"@ctlos"}]},{"type":"text","value":"."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-9aabdf{color:#8B949E}\n.ct-3408a5{color:#FF7B72}\n.ct-28d1b3{color:#79C0FF}\n.ct-895b0c{color:#A5D6FF}\n.ct-3831e0{color:#C9D1D9}\n.ct-bee52c{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"portainer-docker","depth":2,"text":"Portainer docker"},{"id":"настраиваем-контейнеры","depth":2,"text":"Настраиваем контейнеры"},{"id":"создание-бота-telegram","depth":2,"text":"Создание бота telegram"},{"id":"настройка-jackett","depth":2,"text":"Настройка Jackett"},{"id":"настройка-radarr","depth":2,"text":"Настройка radarr"},{"id":"конец","depth":2,"text":"Конец"},{"id":"qbit-jackett","depth":2,"text":"Qbit jackett"},{"id":"опирался-на-следующие-материалы","depth":2,"text":"Опирался на следующие материалы"}]}},"_type":"markdown","_id":"content:posts:media-server.md","_source":"content","_file":"posts/media-server.md","_extension":"md"},{"_path":"/posts/nginx-onion","_dir":"posts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Доступность веб сервера в tor и создание onion домена | Nginx tor onion","description":"Как запустить веб приложение и открыть доступность через tor в доменной зоне onion.","date":"2021-09-13T00:00:00.000Z","type":"post","tags":["dev","webserver"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Как запустить веб приложение и открыть доступность через tor в доменной зоне onion."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.youtube.com/watch?v=1ioGn-2JaiM","rel":["nofollow"]},"children":[{"type":"text","value":"Video"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Все действия выполняются на Arch Linux, но суть везде одинакова, разница только в пакетном менеджере."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.cloudflare.com/","rel":["nofollow"]},"children":[{"type":"text","value":"www.cloudflare.com/"}]}]}]},{"type":"element","tag":"h2","props":{"id":"установка-софта"},"children":[{"type":"text","value":"Установка софта"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Локально нужен только tor или tor браузер для доступа к будущему сервису, я буду использовать chromium с прокси портом тора 9050."}]},{"type":"element","tag":"code","props":{"code":"yay -S tor chromium\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"tor"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"chromium"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"На сервере нужен tor и nginx."}]},{"type":"element","tag":"code","props":{"code":"yay -S tor nginx\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"tor"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"nginx"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"настройка-tor"},"children":[{"type":"text","value":"Настройка tor"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Отредактировать конфиг на сервере /etc/tor/torrc, раскомментировать 2 строки."}]},{"type":"element","tag":"code","props":{"code":"sudo nano /etc/tor/torrc\n\nHiddenServiceDir /var/lib/tor/hidden_service/\nHiddenServicePort 80 127.0.0.1:80\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/etc/tor/torrc"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"HiddenServiceDir"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/var/lib/tor/hidden_service/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"HiddenServicePort"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"80"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"127.0.0.1:"}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"80"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"генерация-onion-домена-v3"},"children":[{"type":"text","value":"Генерация onion домена v3"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Генерировать не обязательно, по умолчанию tor сам создает нужные файлы в hidden_service при рестарте, но их можно удалить и создать имя с кастомным началом в hostname. Чем длиннее имя, тем дольше генерация."}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/cathugger/mkp224o","rel":["nofollow"]},"children":[{"type":"text","value":"github.com/cathugger/mkp224o"}]}]}]},{"type":"element","tag":"code","props":{"code":"git clone https://github.com/cathugger/mkp224o\ncd mkp224o\n./autogen.sh\n./configure\nmake\n# -t 2  потоки cpu, -n кол-во имен, имя topor\n./mkp224o filter topor -t 2 -v -n 1 -d ~/hs-keys\n#\nscp -r ~/hs-keys user@123.123.123.123:~/\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"clone"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"https://github.com/cathugger/mkp224o"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"mkp224o"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"/autogen.sh"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"/configure"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"make"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f730af"},"children":[{"type":"text","value":"# -t 2  потоки cpu, -n кол-во имен, имя topor"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"/mkp224o"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"filter"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"topor"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"-v"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"-n"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"-d"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"~/hs-keys"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f730af"},"children":[{"type":"text","value":"#"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"scp"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"-r"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"~/hs-keys"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"user@123.123.123.123:~/"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Рекомендую сохранить ключи и hostname."}]}]},{"type":"element","tag":"h2","props":{"id":"права-на-hidden_service"},"children":[{"type":"text","value":"Права на hidden_service"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"На сервере после переноса файлов."}]},{"type":"element","tag":"code","props":{"code":"ssh user@123.123.123.123\nsudo cp -r ~/hs-keys/*/* /var/lib/tor/hidden_service/\nsudo chmod 700 /var/lib/tor/hidden_service\nsudo chown -R tor:tor /var/lib/tor/hidden_service/\nsudo systemctl restart tor\nsudo systemctl status tor\nsudo cat /var/lib/tor/hidden_service/hostname\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"ssh"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"user@123.123.123.123"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"cp"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"-r"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"~/hs-keys/"}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/var/lib/tor/hidden_service/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"chmod"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"700"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/var/lib/tor/hidden_service"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"chown"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"-R"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"tor:tor"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/var/lib/tor/hidden_service/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"tor"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"tor"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/var/lib/tor/hidden_service/hostname"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"настройка-nginx"},"children":[{"type":"text","value":"Настройка nginx"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Важный момент, onion работает по http поэтому не нужно использовать редиректы на 443 порт https "},{"type":"element","tag":"a","props":{"href":"/posts/web-server"},"children":[{"type":"text","value":"О первоначальной настройке nginx смотри тут"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Дефолтный конфиг "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/nginx/nginx.conf"}]},{"type":"text","value":", можно в секцию server добавить созданный onion домен и он будет выдавать содержимое по умолчанию из "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/usr/share/nginx/html"}]},{"type":"text","value":", в данном случае "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"index.hmtl"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"# вырезка /etc/nginx/nginx.conf\nserver {\n        listen 80 default_server;\n        listen [::]:80 default_server;\n        server_name ctlos5lhe2vc3giixr.onion;\n\n        root /usr/share/nginx/html;\n        index index.htm index.html;\n...\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f730af"},"children":[{"type":"text","value":"# вырезка /etc/nginx/nginx.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"80"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"default_server"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" [::]:80 "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"default_server"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"server_name"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"ctlos5lhe2vc3giixr.onion"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"root"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/usr/share/nginx/html"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"index"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"index.htm"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"index.html"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"..."}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Простой конфиг, Nginx выводит содержимое директории."}]},{"type":"element","tag":"code","props":{"code":"sudo nano /etc/nginx/sites-available/onion.conf\nsudo ln -s /etc/nginx/sites-available/onion.conf /etc/nginx/sites-enabled\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/etc/nginx/sites-available/onion.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"ln"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"-s"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/etc/nginx/sites-available/onion.conf"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/etc/nginx/sites-enabled"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"server {\n  # директория со статикой сайта\n  server_name ctlos5lhe2vc3giixr.onion;\n  root /home/cretm/app/cloud.ctlos.ru;\n  listen 80;\n  listen [::]:80;\n\n  location / {\n    autoindex on;\n    try_files $uri $uri/ =404;\n  }\n}\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f730af"},"children":[{"type":"text","value":"# директория со статикой сайта"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"server_name"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"ctlos5lhe2vc3giixr.onion"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"root"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/home/cretm/app/cloud.ctlos.ru"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"80"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" [::]:80;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"location"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"autoindex"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"try_files"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" $uri $uri"}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"404"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Проверка и рестарт web сервера."}]},{"type":"element","tag":"code","props":{"code":"sudo nginx -t\nsudo systemctl restart nginx\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"nginx"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"-t"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"nginx"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Конфиг с 2 доменами и ssl. С указанием Onion-Location, добавляет фиолетовый знак в тор браузере, сайт обязательно должен иметь ssl на основном домене."}]},{"type":"element","tag":"code","props":{"code":"sudo nano /etc/nginx/sites-enabled/onion.conf\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/etc/nginx/sites-enabled/onion.conf"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"server {\n  server_name dev.ctlos.ru;\n  server_name ctlos5lhe2vc3giixr.onion;\n  root /home/cretm/app/cloud.ctlos.ru;\n\n  listen 80;\n  listen [::]:80;\n\n  listen 443 ssl; # managed by Certbot\n  ssl_certificate /etc/letsencrypt/live/dev.ctlos.ru/fullchain.pem; # managed by Certbot\n  ssl_certificate_key /etc/letsencrypt/live/dev.ctlos.ru/privkey.pem; # managed by Certbot\n  include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot\n  ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot\n\n  location / {\n    autoindex on;\n    try_files $uri $uri/ =404;\n    add_header Onion-Location \"http://ctlos5lhe2vc3giixr.onion$request_uri\" always;\n  }\n}\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"server_name"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"dev.ctlos.ru"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"server_name"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"ctlos5lhe2vc3giixr.onion"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"root"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/home/cretm/app/cloud.ctlos.ru"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"80"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" [::]:80;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"443"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"ssl"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-f730af"},"children":[{"type":"text","value":"# managed by Certbot"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"ssl_certificate"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/etc/letsencrypt/live/dev.ctlos.ru/fullchain.pem"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-f730af"},"children":[{"type":"text","value":"# managed by Certbot"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"ssl_certificate_key"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/etc/letsencrypt/live/dev.ctlos.ru/privkey.pem"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-f730af"},"children":[{"type":"text","value":"# managed by Certbot"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"include"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/etc/letsencrypt/options-ssl-nginx.conf"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-f730af"},"children":[{"type":"text","value":"# managed by Certbot"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"ssl_dhparam"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/etc/letsencrypt/ssl-dhparams.pem"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-f730af"},"children":[{"type":"text","value":"# managed by Certbot"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"location"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"autoindex"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"try_files"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" $uri $uri"}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"404"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"add_header"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"Onion-Location"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"\"http://ctlos5lhe2vc3giixr.onion"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"$request_uri"}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"always"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Реверс прокси nginx. Пример направления домена на порт 5000 на котором работает не важно какой веб сервис, в данном случае Whoogle."}]},{"type":"element","tag":"code","props":{"code":"server {\n  server_name ctlos5lhe2vc3giixr.onion;\n  # reverse proxy\n  location / {\n    proxy_pass http://localhost:5000;  # Whoogle\n    proxy_redirect off;\n    add_header Onion-Location \"http://ctlos5lhe2vc3giixr.onion$request_uri\" always;\n\n    proxy_set_header Host $http_host;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header X-Forwarded-Proto $scheme;\n    proxy_set_header Proxy \"Cloud-LB\";\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_pass_header Server;\n\n    proxy_buffering off;\n    proxy_http_version 1.1;\n    tcp_nodelay on;\n  }\n}\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"server_name"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"ctlos5lhe2vc3giixr.onion"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f730af"},"children":[{"type":"text","value":"# reverse proxy"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"location"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"proxy_pass"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"http://localhost:"}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"5000"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";  "}]},{"type":"element","tag":"span","props":{"class":"ct-f730af"},"children":[{"type":"text","value":"# Whoogle"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"proxy_redirect"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"off"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"add_header"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"Onion-Location"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"\"http://ctlos5lhe2vc3giixr.onion"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"$request_uri"}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"always"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"Host"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" $http_host;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"X-Real-IP"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" $remote_addr;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"X-Forwarded-For"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" $proxy_add_x_forwarded_for;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"X-Forwarded-Proto"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" $scheme;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"Proxy"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"\"Cloud-LB\""}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"Upgrade"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" $http_upgrade;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"proxy_pass_header"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"Server"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"proxy_buffering"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"off"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"proxy_http_version"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a3f2a"},"children":[{"type":"text","value":"1.1"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3330cf"},"children":[{"type":"text","value":"tcp_nodelay"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cde8a"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7b8e85"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://ctlos.github.io/donat/","rel":["nofollow"]},"children":[{"type":"text","value":"Поблагодарить меня можно тут"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Вопросы и предложения можно оставить в чате "},{"type":"element","tag":"a","props":{"href":"https://telegram.me/ctlos","rel":["nofollow"]},"children":[{"type":"text","value":"@ctlos"}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-f730af{color:#8B949E}\n.ct-7cde8a{color:#A5D6FF}\n.ct-3a3f2a{color:#79C0FF}\n.ct-7b8e85{color:#C9D1D9}\n.ct-3330cf{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"установка-софта","depth":2,"text":"Установка софта"},{"id":"настройка-tor","depth":2,"text":"Настройка tor"},{"id":"генерация-onion-домена-v3","depth":2,"text":"Генерация onion домена v3"},{"id":"права-на-hidden_service","depth":2,"text":"Права на hidden_service"},{"id":"настройка-nginx","depth":2,"text":"Настройка nginx"}]}},"_type":"markdown","_id":"content:posts:nginx-onion.md","_source":"content","_file":"posts/nginx-onion.md","_extension":"md"},{"_path":"/posts/oci","_dir":"posts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Установка Arch Linux в Oracle Cloud","description":"","date":"2021-03-22T00:00:00.000Z","type":"post","tags":["archlinux"],"body":{"type":"root","children":[{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"PS: У меня забанили аккаунт без предупреждения :)."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Существует такое предложение от Oracle Cloud, можно получить 2 сервера в минимальной комплектации навсегда и первые 30 дней тестирования более широкого функционала, нужно привязать карту с которой спишут примерно 1 евро(мне вернули практически сразу) и телефон. Доступные дистрибутивы на free тарифе: ubuntu, centos, oracle linux "},{"type":"element","tag":"a","props":{"href":"https://www.oracle.com/cloud/free/","rel":["nofollow"]},"children":[{"type":"text","value":"oracle.com/cloud/free/"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"После того, как я немного потрогал их кабинет задался целью развернуть у них Arch Linux, доступного образа у них нет, но я знаю о таком замечательном инструменте, как packer, все мои попытки запустить собранные packer-ом образы были не удачны. Образы практически на 100% уверен были в порядке, но я не знал как у них устроен efi загрузчик и не сообразил использовать Console Connection, об этом будет ниже "},{"type":"element","tag":"a","props":{"href":"https://www.packer.io/docs","rel":["nofollow"]},"children":[{"type":"text","value":"www.packer.io/docs"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Для тех кому интересно, как залить туда custom image. В меню, Object storage - Bucket, создайте bucket, а в него загрузите образ. После этого в меню, Custom Images можно импортировать файл из бакета и уже из него создать Instance(машину)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Спустя примерно месяц я решил еще раз попробовать это провернуть, но доступ к функционалу Custom Images был закрыт, но я размотал его немного иначе."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Интерфейс, практически везде есть сноски на документацию, которую можно перевести и детальней узнать о работе. Собственно так я и знакомился с функционалом кабинета, методом тыка. На данный момент он мне даже кажется весьма удобным."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"После создания машины(не важно какой), если в ней присутствует Файрвол, то открыть порты в нем мало, нужно еще открыть их в Default Security List. В меню, Networking - Virtual Cloud Networks - vcn-id - Security Lists - Default Security List vor vcn-id, иначе порты не будут доступны. Простыми словами их нужно открыть, как в Default Security List, так и на самой машине, при наличии Файрвола."}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://stackoverflow.com/questions/54794217/opening-port-80-on-oracle-cloud-infrastructure-compute-node","rel":["nofollow"]},"children":[{"type":"text","value":"stackoverflow.com"}]}]}]},{"type":"element","tag":"h2","props":{"id":"генерация-ключей"},"children":[{"type":"text","value":"Генерация ключей"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Локально создайте ssh ключи, если еще не сделали этого."}]},{"type":"element","tag":"code","props":{"code":"ssh-keygen -t rsa -b 4096 -C \"ctlos@protonmail.com\"\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"ssh-keygen"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"rsa"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-b"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"4096"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-C"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"ctlos@protonmail.com\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ключи упадут в "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/.ssh"}]},{"type":"text","value":". При создании instance(машины), импортируйте публичный ключ "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"id_rsa.pub"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"oracle-cloud"},"children":[{"type":"text","value":"Oracle Cloud"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Создать минимальную машинку free, oracle linux 7.9, именно в ней будет swap раздел на 8G, который мы будем использовать для трансфера. Я не трогал настройки по умолчанию при создании. Авторизуемся на машине по ssh."}]},{"type":"element","tag":"h2","props":{"id":"arch-bootstrap"},"children":[{"type":"text","value":"Arch bootstrap"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Методы описаны в вики archlinux "},{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/Install_Arch_Linux_from_existing_Linux#Method_A:_Using_the_bootstrap_image_(recommended)","rel":["nofollow"]},"children":[{"type":"text","value":"wiki.archlinux.org"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Копируем ссылку на bootstrap .tar.gz. Скачиваем и раскрываем архив в корень "},{"type":"element","tag":"a","props":{"href":"http://mirrors.evowise.com/archlinux/iso/latest/","rel":["nofollow"]},"children":[{"type":"text","value":"http://mirrors.evowise.com/"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"# под root\ncd /\nwget http://mirrors.evowise.com/archlinux/iso/latest/archlinux-bootstrap-2021.03.01-x86_64.tar.gz\ntar xzf /archlinux-bootstrap-*-x86_64.tar.gz\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# под root"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"wget"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"http://mirrors.evowise.com/archlinux/iso/latest/archlinux-bootstrap-2021.03.01-x86_64.tar.gz"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"tar"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"xzf"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/archlinux-bootstrap-"}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"-x86_64.tar.gz"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Отмонтировать swap он 8G, форматировать его в нужную фс(btrfs/ext4). В моем случае структура разделов."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"/dev/sda1 boot, точка монтирования /boot/efi."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"/dev/sda2 swap(8G), его использую для трансфера."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"/dev/sda3 root(39G). На данный момент я тут с Oracle linux, в конце тут будет Arch с lts ядром."}]}]},{"type":"element","tag":"code","props":{"code":"lsblk -f\nswapoff -a\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"lsblk"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-f"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"swapoff"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-a"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Теперь выполняем chroot в bootstrap, в нем выполняем дальнейшие действия. Его разворачиваем для доступа к pacstrap и arch-chroot, основная и единственная задача. Он сам смонтирует нужные бинды, но нужно еще выполнить pacman init и раскомментировать зеркала(первые 3 Worldwide "},{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/Install_Arch_Linux_from_existing_Linux#Using_a_chroot_environment","rel":["nofollow"]},"children":[{"type":"text","value":"Using_a_chroot_environment"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"nano /root.x86_64/etc/pacman.d/mirrorlist\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/root.x86_64/etc/pacman.d/mirrorlist"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"ls /\n\n/root.x86_64/bin/arch-chroot /root.x86_64\n\npacman-key --init\npacman-key --populate\npacman -Syy\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"ls"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"/root.x86_64/bin/arch-chroot"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/root.x86_64"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"pacman-key"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"--init"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"pacman-key"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"--populate"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"pacman"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-Syy"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"монтирование-pacstrap"},"children":[{"type":"text","value":"Монтирование pacstrap"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Форматируем, создаем нужные директории, снапшоты, монтируем. Обратите внимание boot я не форматирую, а просто перемонтирую и удалю из него загрузчик /boot/efi/EFI/redhat."}]},{"type":"element","tag":"code","props":{"code":"mkfs.btrfs -f -L \"root\" /dev/sda2\nmount /dev/sda2 /mnt\n\nbtrfs subvolume create /mnt/@\nbtrfs subvolume create /mnt/@home\nbtrfs subvolume create /mnt/@snapshots\n\numount /mnt\n\nmount -o subvol=@,compress=lzo,relatime,space_cache,autodefrag /dev/sda2 /mnt\nmkdir -p /mnt/{boot/efi,home,snapshots}\nmount -o subvol=@home,compress=lzo,relatime,space_cache,autodefrag /dev/sda2 /mnt/home\nmount -o subvol=@snapshots,compress=lzo,relatime,space_cache,autodefrag /dev/sda2 /mnt/snapshots\n\numount /dev/sda1\nmount /dev/sda1 /mnt/boot/efi\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"mkfs.btrfs"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-f"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"root\""}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/dev/sda2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/dev/sda2"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"btrfs"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"subvolume"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt/@"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"btrfs"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"subvolume"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt/@home"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"btrfs"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"subvolume"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt/@snapshots"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"umount"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"subvol=@,compress=lzo,relatime,space_cache,autodefrag"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/dev/sda2"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt/{boot/efi,home,snapshots}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"subvol=@home,compress=lzo,relatime,space_cache,autodefrag"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/dev/sda2"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt/home"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"subvol=@snapshots,compress=lzo,relatime,space_cache,autodefrag"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/dev/sda2"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt/snapshots"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"umount"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/dev/sda1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/dev/sda1"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt/boot/efi"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Разворачиваем будущую систему с нужными пакетами, некоторые из них очень важны. Генерируем fstab и выполняем еще один chroot(да-да)."}]},{"type":"element","tag":"code","props":{"code":"pacstrap /mnt base base-devel linux-lts linux-lts-headers btrfs-progs nano grub efibootmgr iproute2 iputils rng-tools open-iscsi arch-install-scripts pacman-contrib reflector openssh wget git rsync gnu-netcat pv unzip unrar p7zip zsh htop tmux psmisc procps-ng\ngenfstab -pU /mnt >> /mnt/etc/fstab\narch-chroot /mnt\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"pacstrap"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"base"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"base-devel"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"linux-lts"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"linux-lts-headers"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"btrfs-progs"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"grub"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"efibootmgr"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"iproute2"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"iputils"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"rng-tools"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"open-iscsi"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"arch-install-scripts"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"pacman-contrib"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"reflector"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"openssh"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"wget"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"rsync"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"gnu-netcat"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"pv"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"unzip"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"unrar"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"p7zip"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"zsh"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"htop"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"tmux"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"psmisc"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"procps-ng"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"genfstab"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-pU"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt/etc/fstab"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"arch-chroot"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"init-pacman"},"children":[{"type":"text","value":"Init pacman"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Проинициализируем pacman, отсортируем зеркала и включаем mitilib репозиторий."}]},{"type":"element","tag":"code","props":{"code":"reflector -a 12 -l 30 -f 30 -p https,http --sort rate --save /etc/pacman.d/mirrorlist\npacman-key --init\npacman-key --populate\n\nsed -i \"/[multilib]/,/Include/\"'s/^#//' /etc/pacman.conf\npacman -Syy --noconfirm\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"reflector"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-a"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"12"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-l"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"30"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-f"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"30"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"https,http"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"--sort"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"rate"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"--save"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/etc/pacman.d/mirrorlist"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"pacman-key"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"--init"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"pacman-key"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"--populate"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"sed"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-i"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"/[multilib]/,/Include/\"'s/^#//'"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/etc/pacman.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"pacman"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-Syy"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"--noconfirm"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"добавление-пользователя"},"children":[{"type":"text","value":"Добавление пользователя"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Назначим рут пароль, добавляем пользователя с нужными группами, включаем ему zsh. Назначаем пароль пользователю и включаем sudo."}]},{"type":"element","tag":"code","props":{"code":"usermod -p 123 root\n\nuseradd -m -g users -G \"log,network,storage,power,wheel\" -s /bin/zsh creio\nusermod -p 123 creio\necho \"%wheel ALL=(ALL) ALL\" >> /etc/sudoers\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"usermod"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"123"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"root"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"useradd"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-m"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-g"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"users"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-G"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"log,network,storage,power,wheel\""}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-s"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/bin/zsh"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"creio"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"usermod"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"123"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"creio"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"%wheel ALL=(ALL) ALL\""}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/etc/sudoers"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"системные-настройки"},"children":[{"type":"text","value":"Системные настройки"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Назначаем имя машины, часовой пояс, локали и русский шрифт в консоли."}]},{"type":"element","tag":"code","props":{"code":"echo cloud > /etc/hostname\n\nln -svf /usr/share/zoneinfo/Europe/Moscow /etc/localtime\nhwclock --systohc --utc\n\necho \"en_US.UTF-8 UTF-8\" > /etc/locale.gen\necho \"ru_RU.UTF-8 UTF-8\" >> /etc/locale.gen\nlocale-gen\n\necho \"LANG=ru_RU.UTF-8\" > /etc/locale.conf\necho \"KEYMAP=ru\" > /etc/vconsole.conf\necho \"FONT=cyr-sun16\" >> /etc/vconsole.conf\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"cloud"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/etc/hostname"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"ln"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-svf"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/usr/share/zoneinfo/Europe/Moscow"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/etc/localtime"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"hwclock"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"--systohc"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"--utc"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"en_US.UTF-8 UTF-8\""}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/etc/locale.gen"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"ru_RU.UTF-8 UTF-8\""}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/etc/locale.gen"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"locale-gen"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"LANG=ru_RU.UTF-8\""}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/etc/locale.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"KEYMAP=ru\""}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/etc/vconsole.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"FONT=cyr-sun16\""}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/etc/vconsole.conf"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"mkinitcpio"},"children":[{"type":"text","value":"Mkinitcpio"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Изменить строку HOOKS в файле /etc/mkinitcpio.conf, должно быть так. Важно! Не знаю почему, но с хуком udev отказывается стартовать init, поэтому обязательно замените его на systemd и удаляю fsck, так как btrfs."}]},{"type":"element","tag":"code","props":{"code":"HOOKS=(base systemd autodetect modconf block filesystems keyboard keymap)\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"HOOKS"}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"base"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" systemd autodetect modconf block filesystems keyboard keymap)"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Обновить initramfs."}]},{"type":"element","tag":"code","props":{"code":"mkinitcpio -P\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"mkinitcpio"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-P"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Если проебали с хуком, то попадете в rootfs и можно принудительно назначить инит и включить его."}]},{"type":"element","tag":"code","props":{"code":"ln -s /lib/systemd/systemd /new_root/bin/init\n\nexec switch_root /new_root /bin/init\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"ln"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-s"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/lib/systemd/systemd"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/new_root/bin/init"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"exec"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"switch_root"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/new_root"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/bin/init"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"создаем-hosts"},"children":[{"type":"text","value":"Создаем hosts"}]},{"type":"element","tag":"code","props":{"code":"cat <<EOF >/etc/hosts\n127.0.0.1       localhost\n::1             localhost\n127.0.1.1       cloud.localdomain cloud\nEOF\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"EOF >/etc/hosts"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"127.0.0.1       localhost"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"::1             localhost"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"127.0.1.1       cloud.localdomain cloud"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"EOF"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"включаем-интернет"},"children":[{"type":"text","value":"Включаем интернет"}]},{"type":"element","tag":"code","props":{"code":"cat <<EOF >/etc/systemd/network/20-ethernet.network\n[Match]\nName=en*\nName=eth*\n\n[Network]\nDHCP=yes\nEOF\n\nsystemctl enable systemd-networkd\nsystemctl enable systemd-resolved\n# Workaround for https://bugs.archlinux.org/task/58355\nsystemctl enable rngd\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"EOF >/etc/systemd/network/20-ethernet.network"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"[Match]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"Name=en*"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"Name=eth*"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"[Network]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"DHCP=yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"EOF"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"systemd-networkd"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"systemd-resolved"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# Workaround for https://bugs.archlinux.org/task/58355"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"rngd"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"устанавливаем-grub"},"children":[{"type":"text","value":"Устанавливаем grub"}]},{"type":"element","tag":"code","props":{"code":"grub-install --target=x86_64-efi --efi-directory=/boot/efi\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"grub-install"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"--target=x86_64-efi"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"--efi-directory=/boot/efi"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Grub.cfg приводим к такому виду, все остальное закомментировано(#)"}]},{"type":"element","tag":"code","props":{"code":"nano /etc/default/grub\n\nGRUB_DEFAULT=0\nGRUB_TIMEOUT=0\nGRUB_DISTRIBUTOR=\"Arch\"\nGRUB_CMDLINE_LINUX_DEFAULT=\"console=tty1 console=ttyS0 nvme.shutdown_timeout=10 libiscsi.debug_libiscsi_eh=1 quiet\"\nGRUB_CMDLINE_LINUX=\"\"\nGRUB_PRELOAD_MODULES=\"part_gpt part_msdos\"\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/etc/default/grub"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"GRUB_DEFAULT"}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"GRUB_TIMEOUT"}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"GRUB_DISTRIBUTOR"}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"Arch\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"GRUB_CMDLINE_LINUX_DEFAULT"}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"console=tty1 console=ttyS0 nvme.shutdown_timeout=10 libiscsi.debug_libiscsi_eh=1 quiet\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"GRUB_CMDLINE_LINUX"}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"GRUB_PRELOAD_MODULES"}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"part_gpt part_msdos\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Генерируем конфиг grub."}]},{"type":"element","tag":"code","props":{"code":"grub-mkconfig -o /boot/grub/grub.cfg\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"grub-mkconfig"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/boot/grub/grub.cfg"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Удаляем дефолт загрузчик."}]},{"type":"element","tag":"code","props":{"code":"rm -rf /mnt/boot/efi/EFI/redhat\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"rm"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-rf"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt/boot/efi/EFI/redhat"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Так как мы снесли дефолтный загрузчик, нужно подсунуть нужный файл efi для автоматической загрузки."}]},{"type":"element","tag":"code","props":{"code":"echo \"EFIarchgrubx64.efi\" > /boot/efi/startup.nsh\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"EFIarchgrubx64.efi\""}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/boot/efi/startup.nsh"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"ssh"},"children":[{"type":"text","value":"Ssh"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Раскомментируем строки и приведем их к такому виду."}]},{"type":"element","tag":"code","props":{"code":"nano /etc/ssh/sshd_config\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/etc/ssh/sshd_config"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"PermitRootLogin yes\nPubkeyAuthentication yes\nPasswordAuthentication yes\nUseDNS no\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"PermitRootLogin"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"PubkeyAuthentication"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"PasswordAuthentication"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"UseDNS"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"no"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Включаем сервис."}]},{"type":"element","tag":"code","props":{"code":"systemctl enable sshd\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"sshd"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Выходим из chroot раздела(sda2) "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"exit"}]},{"type":"text","value":". Отмантируем разделы."}]},{"type":"element","tag":"code","props":{"code":"umount -R /mnt\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"umount"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-R"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"И еще раз exit выходим из archlinux-bootstrap(/root.x86_64)."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Следующий шаг важен, он мне сильно помог в отладке, так как доступ получаем выше самой машины, очень удобно."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Перейдите в нужный instance и создайте на вкладке Console Connection подключение ssh, импортируйте открытый ключid_rsa.pub. После активации подключения в меню(3 точки справа) скопируйте Copy Serial Console Connection for Linux/Mac данные, вставьте данные из буфера в новый терминал."}]},{"type":"element","tag":"code","props":{"code":"ssh -o ProxyCommand='ssh -W %h:%p -p 443 ocid1.instnection.oc1.eu-frankfurt-1.antheljtuhavnyqwertyrey@instance-console.eu-frankfurt-1.oraclecloud.com' ocid1.instance.oc1.eu-frankfurt-1.qwretfhjczsdfetrydfgdfsfd\n\n# прожать Enter\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"ssh"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"ProxyCommand='ssh -W %h:%p -p 443 ocid1.instnection.oc1.eu-frankfurt-1.antheljtuhavnyqwertyrey@instance-console.eu-frankfurt-1.oraclecloud.com'"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"ocid1.instance.oc1.eu-frankfurt-1.qwretfhjczsdfetrydfgdfsfd"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# прожать Enter"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В исходном терминале, перезагружаем машину."}]},{"type":"element","tag":"code","props":{"code":"systemctl reboot\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"reboot"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В терминале с "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ssh -o ProxyCommand"}]},{"type":"text","value":" должны увидеть efi меню, которое выполнит скрипт "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/boot/efi/startup.nsh"}]},{"type":"text","value":"(5 секунд) и запустит grub, grub не увидим, так как он выставлен в 0."}]},{"type":"element","tag":"h3","props":{"id":"efishell"},"children":[{"type":"text","value":"Efishell"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Если что-то выполнили не так увидите "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"efishell>"}]},{"type":"text","value":", некоторые команды."}]},{"type":"element","tag":"code","props":{"code":"# карта\nmap\n# меню\nbcfg boot dump\n# переход в раздел\nFS0:\n# посмотреть созданный efi файл\nls EFIarch\n# запустить\nEFIarchgrubx64.efi\n# выход в псевдографику\nexit\n# добавляет пунк, работает до ребута\nbcfg boot add 0 FS0:EFIarchgrubx64.efi \"Arch lts\"\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# карта"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"map"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# меню"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"bcfg"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"boot"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"dump"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# переход в раздел"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"FS0:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# посмотреть созданный efi файл"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"ls"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"EFIarch"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# запустить"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"EFIarchgrubx64.efi"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# выход в псевдографику"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"exit"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# добавляет пунк, работает до ребута"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"bcfg"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"boot"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"FS0:EFIarchgrubx64.efi"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"Arch lts\""}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Именно по причине того, что загрузчик слетает и используется /boot/efi/startup.nsh, именно поэтому и не стартовал мой custom image о котором я говорил в начале."}]}]},{"type":"element","tag":"h2","props":{"id":"авторизация"},"children":[{"type":"text","value":"Авторизация"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Если все нормально, копируем ключ в root-а и юзера, в моем случае creio."}]},{"type":"element","tag":"code","props":{"code":"cat .ssh/id_rsa.pub | ssh root@192.168.1.35 'mkdir -p ~/.ssh && cat >> .ssh/authorized_keys'\ncat .ssh/id_rsa.pub | ssh creio@192.168.1.35 'mkdir -p ~/.ssh && cat >> .ssh/authorized_keys'\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":".ssh/id_rsa.pub"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"ssh"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"root@192.168.1.35"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"'mkdir -p ~/.ssh && cat >> .ssh/authorized_keys'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":".ssh/id_rsa.pub"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"ssh"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"creio@192.168.1.35"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"'mkdir -p ~/.ssh && cat >> .ssh/authorized_keys'"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Выполняем вход."}]},{"type":"element","tag":"code","props":{"code":"ssh creio@192.168.1.35\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"ssh"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"creio@192.168.1.35"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Должны увидеть меню zsh, нажать 0."}]},{"type":"element","tag":"h2","props":{"id":"перенос"},"children":[{"type":"text","value":"Перенос"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Форматируем и монтируем sda3. Создаем снапшоты."}]},{"type":"element","tag":"code","props":{"code":"lsblk -f\nmkfs.btrfs -f -L \"root\" /dev/sda3\nmount /dev/sda3 /mnt\n\nbtrfs subvolume create /mnt/@\nbtrfs subvolume create /mnt/@home\nbtrfs subvolume create /mnt/@snapshots\n\numount /mnt\n\nmount -o subvol=@,compress=lzo,relatime,space_cache,autodefrag /dev/sda3 /mnt\nmkdir -p /mnt/{boot/efi,home,snapshots}\nmount -o subvol=@home,compress=lzo,relatime,space_cache,autodefrag /dev/sda3 /mnt/home\nmount -o subvol=@snapshots,compress=lzo,relatime,space_cache,autodefrag /dev/sda3 /mnt/snapshots\n\numount /dev/sda1\nmount /dev/sda1 /mnt/boot/efi\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"lsblk"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-f"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"mkfs.btrfs"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-f"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"root\""}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/dev/sda3"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/dev/sda3"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"btrfs"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"subvolume"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt/@"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"btrfs"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"subvolume"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt/@home"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"btrfs"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"subvolume"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt/@snapshots"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"umount"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"subvol=@,compress=lzo,relatime,space_cache,autodefrag"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/dev/sda3"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt/{boot/efi,home,snapshots}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"subvol=@home,compress=lzo,relatime,space_cache,autodefrag"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/dev/sda3"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt/home"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"subvol=@snapshots,compress=lzo,relatime,space_cache,autodefrag"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/dev/sda3"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt/snapshots"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"umount"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/dev/sda1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/dev/sda1"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt/boot/efi"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Копируем текущий корень в /mnt."}]},{"type":"element","tag":"code","props":{"code":"rsync -cauv --info=stats2 --exclude={\"/dev/*\",\"/proc/*\",\"/sys/*\",\"/tmp/*\",\"/run/*\",\"/mnt/*\",\"/media/*\",\"/lost+found\",\"/var/lib/pacman/sync/*\",\"/var/cache/*\",\"/var/tmp/*\"} /* /mnt/\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"rsync"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-cauv"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"--info=stats2"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"--exclude="}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"/dev/*\""}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"/proc/*\""}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"/sys/*\""}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"/tmp/*\""}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"/run/*\""}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"/mnt/*\""}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"/media/*\""}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"/lost+found\""}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"/var/lib/pacman/sync/*\""}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"/var/cache/*\""}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"\"/var/tmp/*\""}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"} /"}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" /mnt/"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"fstab"},"children":[{"type":"text","value":"Fstab"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Узнаем UUID разделов."}]},{"type":"element","tag":"code","props":{"code":"lsblk -f\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"lsblk"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-f"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Изменить fstab, nano /mnt/etc/fstab. Загрузчик не изменился, только UUID субволумов."}]},{"type":"element","tag":"code","props":{"code":"# /dev/sda1\nUUID=2138-EC84                               /boot/efi      vfat    defaults  0 0\n\n# /dev/sda3\nUUID=39b2a28d-3890-425b-8152-fed18a73fdcd    /              btrfs   subvol=@,defaults,noatime,space_cache,autodefrag 0 0\n\n# /dev/sda3\nUUID=39b2a28d-3890-425b-8152-fed18a73fdcd    /home          btrfs   subvol=@home,defaults,noatime,space_cache,autodefrag 0 0\n\n# /dev/sda3\nUUID=39b2a28d-3890-425b-8152-fed18a73fdcd    /snapshots     btrfs   subvol=@snapshots,defaults,noatime,space_cache,autodefrag 0 0\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# /dev/sda1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"UUID"}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"2138"}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"-EC84"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"                               /boot/efi      vfat    defaults  "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# /dev/sda3"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"UUID"}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"39b2a28d-"}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"3890"}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"-425b-"}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"8152"}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"-fed18a73fdcd"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"    /              btrfs   subvol"}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"@,defaults,noatime,space_cache,autodefrag"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# /dev/sda3"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"UUID"}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"39b2a28d-"}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"3890"}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"-425b-"}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"8152"}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"-fed18a73fdcd"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"    /home          btrfs   subvol"}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"@home,defaults,noatime,space_cache,autodefrag"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# /dev/sda3"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"UUID"}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"39b2a28d-"}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"3890"}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"-425b-"}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"8152"}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"-fed18a73fdcd"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"    /snapshots     btrfs   subvol"}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"@snapshots,defaults,noatime,space_cache,autodefrag"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"0"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"chroot"},"children":[{"type":"text","value":"Chroot"}]},{"type":"element","tag":"code","props":{"code":"arch-chroot /mnt\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"arch-chroot"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Переустановим и сконфигурируем grub."}]},{"type":"element","tag":"code","props":{"code":"grub-install --target=x86_64-efi --efi-directory=/boot/efi\n\ngrub-mkconfig -o /boot/grub/grub.cfg\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"grub-install"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"--target=x86_64-efi"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"--efi-directory=/boot/efi"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"grub-mkconfig"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/boot/grub/grub.cfg"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Посмотрим на правильность UUID. Везде должен быть id sda3."}]},{"type":"element","tag":"code","props":{"code":"cat /boot/grub/grub.cfg\n\nlsblk -f\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/boot/grub/grub.cfg"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"lsblk"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-f"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Выходим из chroot, отмонтируем, ребут."}]},{"type":"element","tag":"code","props":{"code":"exit\numount -R /mnt\nsystemctl reboot\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"exit"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"umount"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-R"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/mnt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"reboot"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Опять, можем запустить "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ssh -o ProxyCommand"}]},{"type":"text","value":"(прожать Enter) и наблюдать за работой efi, если все ровно, выполняем вход. Теперь можно отформатировать sda2 в swap и подключить его в fstab."}]},{"type":"element","tag":"code","props":{"code":"mkswap /dev/sda2\nswapon /dev/sda2\nswapon --show\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"mkswap"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/dev/sda2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"swapon"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/dev/sda2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"swapon"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"--show"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"lsblk -f\n\nnano /etc/fstab\n\n# добавить в конец с новой строки\n# /dev/sda2\nUUID=6a1059e2-6fd0-4894-bb14-53ff59754145    none           swap    defaults    0 0\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"lsblk"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-f"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/etc/fstab"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# добавить в конец с новой строки"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# /dev/sda2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"UUID"}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"6a1059e2-6fd0-"}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"4894"}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"-bb14-53ff59754145"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"    none           swap    defaults    "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"0"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"дополнительный-диск"},"children":[{"type":"text","value":"Дополнительный диск"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Отредактируйте файл "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/iscsi/iscsid.conf"}]},{"type":"text","value":", как указано в help "},{"type":"element","tag":"a","props":{"href":"https://docs.oracle.com/en-us/iaas/Content/Block/Concepts/iscsiinformation.htm","rel":["nofollow"]},"children":[{"type":"text","value":"iscsiinformation.htm"}]},{"type":"text","value":". На вкладке boot volumes можно создать дополнительный диск, клонировать существующий. После этого добавить на машине в автостарт и запустить сервис."}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl enable --now iscsid\n# включаем авторизацию\nsudo systemctl enable iscsi\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"--now"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"iscsid"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# включаем авторизацию"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"iscsi"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Зайти в свой Instances и в левом меню на вкладку Attached Block Volumes, присоединить клонированный диск, когда он перейдет в состояние Attached в правом меню открыть пункт iSCSI Commands & Information. Скопировать 3 команды(iscsiadm) на подключение и выполнить их на своей машине(по строчно) от пользователя."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В поле ниже, соответственно команды на отключение."}]},{"type":"element","tag":"code","props":{"code":"lsblk -f\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"lsblk"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-f"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Форматируем данный диск на свое усмотрение и прописываем, если нужно в fstab."}]},{"type":"element","tag":"code","props":{"code":"# создаем таблицу и раздел/разделы\nsudo cfdisk -z /dev/sdb\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# создаем таблицу и раздел/разделы"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"cfdisk"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-z"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/dev/sdb"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Я выбрал gpt, затем создал раздел по умолчанию на все пространство(46,6G), enter - enter - enter, курсор вправо(записать) - yes - enter, курсор влево(выход). Форматируем в ext4 с меткой files."}]},{"type":"element","tag":"code","props":{"code":"sudo mkfs.ext4 /dev/sdb1 -L files\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"mkfs.ext4"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/dev/sdb1"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"files"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Добавляю в fstab."}]},{"type":"element","tag":"code","props":{"code":"sudo mkdir -p /media/files\nlsblk -f\nsudo nano /etc/fstab\n\n# /dev/sdb1\nUUID=702c830e-efb9-403d-bdfc-b3a969d44b1f    /media/files   ext4    defaults,_netdev,x-systemd.requires=iscsid.service  0 1\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/media/files"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"lsblk"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-f"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/etc/fstab"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# /dev/sdb1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"UUID"}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"702c830e-efb9-403d-bdfc-b3a969d44b1f"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"    /media/files   ext4    defaults,_netdev,x-systemd.requires"}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"iscsid.service"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"1"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Перезагружаюсь и вижу по пути "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/media/files"}]},{"type":"text","value":" чистый раздел, под любые нужды."}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl reboot\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"reboot"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Дадим полные права в директорию для юзера."}]},{"type":"element","tag":"code","props":{"code":"sudo chown -R $(whoami):users /media/files\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"chown"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-R"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"$("}]},{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"whoami"}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"):users"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/media/files"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Вы наверно догадались, что можно было сразу подключить второй диск и развернуть на него, тем самым опустить момент с переносом раздела(rsync), я это специально сделал, чтобы показать больше."}]}]},{"type":"element","tag":"h2","props":{"id":"рекомендации"},"children":[{"type":"text","value":"Рекомендации"}]},{"type":"element","tag":"h3","props":{"id":"уменьшение-журнала-systemd"},"children":[{"type":"text","value":"Уменьшение журнала Systemd"}]},{"type":"element","tag":"code","props":{"code":"sudo nano /etc/systemd/journald.conf\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/etc/systemd/journald.conf"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Раскомментировать и изменить строку."}]},{"type":"element","tag":"code","props":{"code":"SystemMaxUse=100M\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"SystemMaxUse"}]},{"type":"element","tag":"span","props":{"class":"ct-3d193e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"100M"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Перезапустите сервис."}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl restart systemd-journald.service\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"systemd-journald.service"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"увеличить-tmp"},"children":[{"type":"text","value":"Увеличить /tmp"}]},{"type":"element","tag":"code","props":{"code":"df -h /tmp\n\nsudo mount -o remount,size=2G /tmp\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"df"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-h"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/tmp"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"remount,size=2G"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/tmp"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"kexec"},"children":[{"type":"text","value":"Kexec"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Это полезно при обновлении ядра, можно очень быстро перезагрузить его, не дожидаясь завершения всего процесса загрузки BIOS. Наглядно видно, при доступном обновление ядра "},{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/Kexec","rel":["nofollow"]},"children":[{"type":"text","value":"wiki.archlinux.org/index.php/Kexec"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"yay -S kexec-tools\n# версия ядра\nuname -a\n# полное обновление\nyay -Syyuu\n# загрузка нового ядра\nsudo kexec -l /boot/vmlinuz-linux-lts --initrd=/boot/initramfs-linux-lts.img --reuse-cmdline\n# частичный ребут\nsudo systemctl kexec\n# справка\nsudo kexec -h\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"kexec-tools"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# версия ядра"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"uname"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-a"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# полное обновление"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-Syyuu"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# загрузка нового ядра"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"kexec"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-l"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/boot/vmlinuz-linux-lts"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"--initrd=/boot/initramfs-linux-lts.img"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"--reuse-cmdline"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# частичный ребут"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"kexec"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7d7ee"},"children":[{"type":"text","value":"# справка"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"kexec"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-h"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"swapfile"},"children":[{"type":"text","value":"Swapfile"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Можно отключить раздел swap и использовать файл на 4G в btrfs."}]},{"type":"element","tag":"code","props":{"code":"truncate -s 0 /swapfile\nchattr +C /swapfile\nbtrfs property set /swapfile compression none\nfallocate /swapfile -l4g\nchmod 600 /swapfile\nmkswap /swapfile\nlsattr /swapfile\nswapon /swapfile\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"truncate"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-s"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/swapfile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"chattr"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"+C"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/swapfile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"btrfs"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"property"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/swapfile"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"compression"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"none"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"fallocate"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/swapfile"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"-l4g"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"chmod"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"600"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/swapfile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"mkswap"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/swapfile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"lsattr"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/swapfile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"swapon"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/swapfile"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Закомментировать раздел swap и добавить строку с файлом."}]},{"type":"element","tag":"code","props":{"code":"sudo nano /etc/fstab\n\n/swapfile      none      swap      defaults    0 0\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"/etc/fstab"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db0da8"},"children":[{"type":"text","value":"/swapfile"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"none"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"swap"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-866583"},"children":[{"type":"text","value":"defaults"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-661b3a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c9e21"},"children":[{"type":"text","value":"0"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"ссылки"},"children":[{"type":"text","value":"Ссылки"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/posts/zsh-config"},"children":[{"type":"text","value":"Настройка zsh"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/creio/dots","rel":["nofollow"]},"children":[{"type":"text","value":"Еще некоторые конфиги и скрипты в моем репозитории"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/posts/vpn"},"children":[{"type":"text","value":"VPN сервер в Linux"}]}]}]},{"type":"element","tag":"h2","props":{"id":"итог"},"children":[{"type":"text","value":"Итог"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Таким способом можно переделать любую систему и практически на любом облачном решении, главное знать детали загрузки и хорошо бы иметь ssh подключение выше, как тут (Console connection), или некий режим восстановления. Если Вам понравился мой бред:) по этому поводу, то поблагодарить меня можно тут."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://ctlos.github.io/donat/","rel":["nofollow"]},"children":[{"type":"text","value":"ctlos.github.io/donat"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Вступай в чат "},{"type":"element","tag":"a","props":{"href":"https://telegram.me/ctlos","rel":["nofollow"]},"children":[{"type":"text","value":"@ctlos"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Всем Добра."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-3d193e{color:#FF7B72}\n.ct-c7d7ee{color:#8B949E}\n.ct-866583{color:#A5D6FF}\n.ct-2c9e21{color:#79C0FF}\n.ct-661b3a{color:#C9D1D9}\n.ct-db0da8{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"генерация-ключей","depth":2,"text":"Генерация ключей"},{"id":"oracle-cloud","depth":2,"text":"Oracle Cloud"},{"id":"arch-bootstrap","depth":2,"text":"Arch bootstrap"},{"id":"монтирование-pacstrap","depth":2,"text":"Монтирование pacstrap"},{"id":"init-pacman","depth":2,"text":"Init pacman"},{"id":"добавление-пользователя","depth":2,"text":"Добавление пользователя"},{"id":"системные-настройки","depth":2,"text":"Системные настройки"},{"id":"mkinitcpio","depth":2,"text":"Mkinitcpio"},{"id":"создаем-hosts","depth":2,"text":"Создаем hosts"},{"id":"включаем-интернет","depth":2,"text":"Включаем интернет"},{"id":"устанавливаем-grub","depth":2,"text":"Устанавливаем grub"},{"id":"ssh","depth":2,"text":"Ssh","children":[{"id":"efishell","depth":3,"text":"Efishell"}]},{"id":"авторизация","depth":2,"text":"Авторизация"},{"id":"перенос","depth":2,"text":"Перенос"},{"id":"fstab","depth":2,"text":"Fstab"},{"id":"chroot","depth":2,"text":"Chroot"},{"id":"дополнительный-диск","depth":2,"text":"Дополнительный диск"},{"id":"рекомендации","depth":2,"text":"Рекомендации","children":[{"id":"уменьшение-журнала-systemd","depth":3,"text":"Уменьшение журнала Systemd"},{"id":"увеличить-tmp","depth":3,"text":"Увеличить /tmp"},{"id":"kexec","depth":3,"text":"Kexec"},{"id":"swapfile","depth":3,"text":"Swapfile"},{"id":"ссылки","depth":3,"text":"Ссылки"}]},{"id":"итог","depth":2,"text":"Итог"}]}},"_type":"markdown","_id":"content:posts:oci.md","_source":"content","_file":"posts/oci.md","_extension":"md"},{"_path":"/posts/psiphon","_dir":"posts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Psiphon linux, обходим блокировку трафика","description":"Обходим блокировку сайтов с помощью psiphon.","date":"2020-08-10T00:00:00.000Z","type":"post","tags":["vpn"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Обходим блокировку сайтов с помощью psiphon."}]},{"type":"element","tag":"h2","props":{"id":"archlinux"},"children":[{"type":"text","value":"Archlinux"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В aur лежит пакет."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://aur.archlinux.org/packages/brainfuck-psiphon-pro-go-bin/","rel":["nofollow"]},"children":[{"type":"text","value":"brainfuck-psiphon-pro-go"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/aztecrabbit/brainfuck-psiphon-pro-go","rel":["nofollow"]},"children":[{"type":"text","value":"Репо проекта"}]}]}]},{"type":"element","tag":"h2","props":{"id":"установка"},"children":[{"type":"text","value":"Установка"}]},{"type":"element","tag":"code","props":{"code":"yay -S brainfuck-psiphon-pro-go-bin\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e46872"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":"brainfuck-psiphon-pro-go-bin"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"использование"},"children":[{"type":"text","value":"Использование"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Запуск командой sudo brainfuck-psiphon-pro-go. Увидите примерно такой вывод."}]},{"type":"element","tag":"code","props":{"code":"Brainfuck Tunnel [Psiphon Pro Go Version. 1.3.210109]\n(c) 2020 Aztec Rabbit.\n\n[17:15:55] :: INFO :: Domain Fronting running on port 8989\n[17:15:55] :: INFO :: Proxy Rotator running on port 3080\n[17:15:55] :: 3081 :: Connecting\n[17:15:55] :: 3082 :: Connecting\n[17:15:55] :: 3084 :: Connecting\n[17:15:55] :: 3083 :: Connecting\n[17:16:08] :: 3083 :: Connected\n[17:16:09] :: 3082 :: Connected\n[17:16:09] :: 3081 :: Connected\n[17:16:10] :: 3084 :: Connected\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e46872"},"children":[{"type":"text","value":"Brainfuck"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":"Tunnel"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" [Psiphon Pro Go Version. 1.3.210109]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e46872"},"children":[{"type":"text","value":"c"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"2020"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" Aztec Rabbit."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"15"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"55"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"] :: INFO :: Domain Fronting running on port "}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"8989"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"15"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"55"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"] :: INFO :: Proxy Rotator running on port "}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"3080"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"15"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"55"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"] :: "}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"3081"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" :: Connecting"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"15"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"55"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"] :: "}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"3082"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" :: Connecting"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"15"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"55"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"] :: "}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"3084"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" :: Connecting"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"15"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"55"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"] :: "}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"3083"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" :: Connecting"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"16"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"08"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"] :: "}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"3083"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" :: Connected"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"16"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"09"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"] :: "}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"3082"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" :: Connected"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"16"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"09"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"] :: "}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"3081"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" :: Connected"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"16"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"] :: "}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"3084"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" :: Connected"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Можно запустить с использованием региона (us,nl,sg)."}]},{"type":"element","tag":"code","props":{"code":"sudo brainfuck-psiphon-pro-go -r nl\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e46872"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":"brainfuck-psiphon-pro-go"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"-r"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":"nl"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Прописываем прокси в браузере, или в telegram. Прокси ратируются на портах 3080-3084 в моем случае, наверняка у вас также."}]},{"type":"element","tag":"code","props":{"code":"http proxy: 127.0.0.1 port 3080\nhttps proxy: 127.0.0.1 port 3080\nftp proxy: 127.0.0.1 port 3080\nsocks: 127.0.0.1 port 3080\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e46872"},"children":[{"type":"text","value":"http"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":"proxy:"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":"127.0.0.1"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":"port"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"3080"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e46872"},"children":[{"type":"text","value":"https"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":"proxy:"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":"127.0.0.1"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":"port"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"3080"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e46872"},"children":[{"type":"text","value":"ftp"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":"proxy:"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":"127.0.0.1"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":"port"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"3080"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e46872"},"children":[{"type":"text","value":"socks:"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":"127.0.0.1"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":"port"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"3080"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Chromium можно запустить с флагом."}]},{"type":"element","tag":"code","props":{"code":"chromium --proxy-server='socks://127.0.0.1:3080'\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e46872"},"children":[{"type":"text","value":"chromium"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"--proxy-server="}]},{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":"'socks://127.0.0.1:3080'"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В firefox используйте расширение FoxyProxy, или в параметрах сети укажите только SOCKS5."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В настройках расширения, Добавить новый SOCKS5, ip: 127.0.0.1, port: 3080"}]}]},{"type":"element","tag":"h3","props":{"id":"конфигурация"},"children":[{"type":"text","value":"Конфигурация"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Можно изменить "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ProxyRotator"}]},{"type":"text","value":" порт, если нужно."}]},{"type":"element","tag":"code","props":{"code":"# nano ~/.config/brainfuck-psiphon-pro-go/config.json\n\n{\n  \"ProxyRotator\": {\n    \"Port\": \"3080\"\n  },\n  \"Inject\": {\n    \"Enable\": true,\n    \"Type\": 2,\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cae3b5"},"children":[{"type":"text","value":"# nano ~/.config/brainfuck-psiphon-pro-go/config.json"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":"  \"ProxyRotator\""}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":"    \"Port\""}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":" \"3080\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":"  },"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":"  \"Inject\""}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":"    \"Enable\""}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":"    \"Type\""}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":","}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Help."}]},{"type":"element","tag":"code","props":{"code":"sudo brainfuck-psiphon-pro-go -h\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e46872"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c51dd6"},"children":[{"type":"text","value":"brainfuck-psiphon-pro-go"}]},{"type":"element","tag":"span","props":{"class":"ct-786613"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee5198"},"children":[{"type":"text","value":"-h"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-cae3b5{color:#8B949E}\n.ct-c51dd6{color:#A5D6FF}\n.ct-ee5198{color:#79C0FF}\n.ct-786613{color:#C9D1D9}\n.ct-e46872{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"archlinux","depth":2,"text":"Archlinux"},{"id":"установка","depth":2,"text":"Установка","children":[{"id":"использование","depth":3,"text":"Использование"},{"id":"конфигурация","depth":3,"text":"Конфигурация"}]}]}},"_type":"markdown","_id":"content:posts:psiphon.md","_source":"content","_file":"posts/psiphon.md","_extension":"md"},{"_path":"/posts/tor","_dir":"posts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Tor проксирование","description":"Задача заставить локально обрабатывать все запросы к onion, через тор, а все остальное в обычном режиме. В этом деле поможет dnsmasq, но заставить его работать я смог только с dhcpcd, не знаю возможно ли это сделать через networkmanager, не пользуюсь им. Выключаем и удаляем все сетевое, ставим dnsmasq и dhcpcd.","date":"2022-05-26T00:00:00.000Z","type":"post","tags":["network"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Задача заставить локально обрабатывать все запросы к onion, через тор, а все остальное в обычном режиме. В этом деле поможет dnsmasq, но заставить его работать я смог только с dhcpcd, не знаю возможно ли это сделать через networkmanager, не пользуюсь им. Выключаем и удаляем все сетевое, ставим dnsmasq и dhcpcd."}]},{"type":"element","tag":"code","props":{"code":"sudo pacman -S dnsmasq dhcpcd tor\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"pacman"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"dnsmasq"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"dhcpcd"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"tor"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Конфиг dnsmasq."}]},{"type":"element","tag":"code","props":{"code":"# /etc/dnsmasq.conf\n\nno-resolv\nno-hosts\nport=53\nserver=127.0.0.1#9053\nlisten-address=::1,127.0.0.1\nserver=/onion/127.0.0.1#9053\nserver=/.exit/127.0.0.1#9053\nserver=8.8.8.8\nserver=8.8.4.4\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-75b2bb"},"children":[{"type":"text","value":"# /etc/dnsmasq.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"no-resolv"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"no-hosts"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":"port"}]},{"type":"element","tag":"span","props":{"class":"ct-ddc5a2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"53"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-ddc5a2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"127.0.0.1#"}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"9053"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"listen-address="}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":":1,127.0.0.1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-ddc5a2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"/onion/127.0.0.1#"}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"9053"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-ddc5a2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"/.exit/127.0.0.1#"}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"9053"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-ddc5a2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"8.8.8.8"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-ddc5a2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"8.8.4.4"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Конфиг dhcpcd."}]},{"type":"element","tag":"code","props":{"code":"# /etc/dhcpcd.conf\n\nnohook resolv.conf\nnoarp\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-75b2bb"},"children":[{"type":"text","value":"# /etc/dhcpcd.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"nohook"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"resolv.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"noarp"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Конфиг tor. tor_resolv походу не обязательно."}]},{"type":"element","tag":"code","props":{"code":"# /etc/tor/torrc\n\nVirtualAddrNetwork 10.254.0.0/16\nAutomapHostsOnResolve 1\nAutomapHostsSuffixes .exit,.onion\nTransPort 127.0.0.1:9040 NoIsolateClientAddr SessionGroup=1\nDNSPort 127.0.0.1:9053\nServerDNSResolvConfFile /etc/tor_resolv.conf\n\n# /etc/tor_resolv.conf\n\nnameserver 8.8.8.8\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-75b2bb"},"children":[{"type":"text","value":"# /etc/tor/torrc"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"VirtualAddrNetwork"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"10.254.0.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"16"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"AutomapHostsOnResolve"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"AutomapHostsSuffixes"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":".exit,.onion"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"TransPort"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"127.0.0.1:"}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"9040"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"NoIsolateClientAddr"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"SessionGroup="}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"DNSPort"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"127.0.0.1:"}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"9053"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"ServerDNSResolvConfFile"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"/etc/tor_resolv.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-75b2bb"},"children":[{"type":"text","value":"# /etc/tor_resolv.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"nameserver"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"8.8.8.8"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Выключам, включаем и стартуем службы."}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl disable --now systemd-networkd.socket\nsudo systemctl disable --now systemd-networkd\nsudo systemctl disable --now systemd-resolved\n\nsudo systemctl enable --now dhcpcd\nsudo systemctl enable --now dnsmasq\nsudo systemctl start tor\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"disable"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"--now"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"systemd-networkd.socket"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"disable"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"--now"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"systemd-networkd"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"disable"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"--now"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"systemd-resolved"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"--now"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"dhcpcd"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"--now"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"dnsmasq"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"start"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"tor"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Правила перенаправления запросов onion в тор мост."}]},{"type":"element","tag":"code","props":{"code":"# ip route show default | awk '/default/ {print $5}'\n\nsudo iptables -t nat -A PREROUTING -d 10.254.0.0/16 -i enp5s0 -p tcp -j REDIRECT --to-ports 9040\nsudo iptables -t nat -A OUTPUT -d 10.254.0.0/16 -p tcp -j REDIRECT --to-ports 9040\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-75b2bb"},"children":[{"type":"text","value":"# ip route show default | awk '/default/ {print $5}'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"iptables"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"nat"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"-A"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"PREROUTING"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"-d"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"10.254.0.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"16"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"-i"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"enp5s0"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"tcp"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"-j"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"REDIRECT"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"--to-ports"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"9040"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"iptables"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"nat"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"-A"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"OUTPUT"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"-d"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"10.254.0.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"16"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"tcp"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"-j"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"REDIRECT"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"--to-ports"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"9040"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Выключить запрет в firefox. В адресной строке откройте адрес about:config и выключить значение."}]},{"type":"element","tag":"code","props":{"code":"network.dns.blockDotOnion     false\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"network.dns.blockDotOnion"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":"     "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"false"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Для теста onion keybase."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://keybase5wmilwokqirssclfnsqrjdsi7jdir5wy7y7iu3tanwmtp6oid.onion","rel":["nofollow"]},"children":[{"type":"text","value":"keybase5wmilwo"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Если все нормально, то можно выгрузить правила iptables в любое удобное место, я сохраню рядом с дефолтом."}]},{"type":"element","tag":"code","props":{"code":"# /etc/iptables/iptables.rules\n\nsudo iptables-save -f /etc/iptables/iptables.rules.tor\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-75b2bb"},"children":[{"type":"text","value":"# /etc/iptables/iptables.rules"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"iptables-save"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"-f"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"/etc/iptables/iptables.rules.tor"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Если нужны эти правила постоянно, то просто перетрите /etc/iptables/iptables.rules, но перед этим создайте копию."}]},{"type":"element","tag":"code","props":{"code":"sudo cp /etc/iptables/iptables.rules /etc/iptables/iptables.rules.bak\nsudo iptables-save -f /etc/iptables/iptables.rules\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"cp"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"/etc/iptables/iptables.rules"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"/etc/iptables/iptables.rules.bak"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"iptables-save"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"-f"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"/etc/iptables/iptables.rules"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Считывание правил с файла."}]},{"type":"element","tag":"code","props":{"code":"sudo iptables-restore /etc/iptables/iptables.rules.bak\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"iptables-restore"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"/etc/iptables/iptables.rules.bak"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"заворачивание-всего-трафика-в-tor"},"children":[{"type":"text","value":"Заворачивание всего трафика в tor"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В сети наткнулся на простой пайтон скрипт, немного подправил под Arch."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/creio/dots/blob/master/.bin/toriptables3.py","rel":["nofollow"]},"children":[{"type":"text","value":"toriptables3.py"}]}]},{"type":"element","tag":"code","props":{"code":"sudo toriptables3.py -l\n\n# сброс правил\nsudo toriptables3.py -f\n\n# лучше откатите через iptables\nsudo iptables-restore /etc/iptables/iptables.rules.bak\n\n# help\nsudo toriptables3.py -h\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"toriptables3.py"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"-l"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-75b2bb"},"children":[{"type":"text","value":"# сброс правил"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"toriptables3.py"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"-f"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-75b2bb"},"children":[{"type":"text","value":"# лучше откатите через iptables"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"iptables-restore"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"/etc/iptables/iptables.rules.bak"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-75b2bb"},"children":[{"type":"text","value":"# help"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c9580"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-019fe8"},"children":[{"type":"text","value":"toriptables3.py"}]},{"type":"element","tag":"span","props":{"class":"ct-545d13"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-87a4e3"},"children":[{"type":"text","value":"-h"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"ссылки"},"children":[{"type":"text","value":"Ссылки"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://gitlab.torproject.org/legacy/trac/-/wikis/doc/TransparentProxy","rel":["nofollow"]},"children":[{"type":"text","value":"TransparentProxy"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/title/iptables","rel":["nofollow"]},"children":[{"type":"text","value":"iptables"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/title/Dhcpcd","rel":["nofollow"]},"children":[{"type":"text","value":"Dhcpcd"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/title/Tor#Using_TorDNS_for_all_DNS_queries","rel":["nofollow"]},"children":[{"type":"text","value":"Using_TorDNS_for_all_DNS_queries"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/title/Dnsmasq","rel":["nofollow"]},"children":[{"type":"text","value":"Dnsmasq"}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-ddc5a2{color:#FF7B72}\n.ct-75b2bb{color:#8B949E}\n.ct-87a4e3{color:#79C0FF}\n.ct-019fe8{color:#A5D6FF}\n.ct-545d13{color:#C9D1D9}\n.ct-0c9580{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"заворачивание-всего-трафика-в-tor","depth":2,"text":"Заворачивание всего трафика в tor"},{"id":"ссылки","depth":2,"text":"Ссылки"}]}},"_type":"markdown","_id":"content:posts:tor.md","_source":"content","_file":"posts/tor.md","_extension":"md"},{"_path":"/posts/transmission","_dir":"posts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Transmission — раздача торрентов со своего сервера","description":"","date":"2021-10-22T00:00:00.000Z","type":"post","tags":["torrents"],"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"установка-transmission-daemon"},"children":[{"type":"text","value":"Установка transmission-daemon"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Установка, копирование конфигов в директорию юзера и создание нужных директорий."}]},{"type":"element","tag":"code","props":{"code":"sudo apt update && sudo apt upgrade -y\nsudo apt install transmission-daemon -y\n\nsudo systemctl stop transmission-daemon\n\nsudo cp -R /etc/transmission-daemon ~/.config/\nsudo chown -R $USER ~/.config/transmission-daemon\n\nmkdir ~/Torrents\nmkdir -p ~/Downloads/.incomplete\nnano ~/.config/transmission-daemon/settings.json\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"upgrade"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-y"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"transmission-daemon"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-y"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"stop"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"transmission-daemon"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"cp"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-R"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/etc/transmission-daemon"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"~/.config/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"chown"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-R"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" $USER "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"~/.config/transmission-daemon"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"~/Torrents"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"~/Downloads/.incomplete"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"~/.config/transmission-daemon/settings.json"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"конфигурация-демана"},"children":[{"type":"text","value":"Конфигурация демана"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В rpc-whitelist укажите свой ip, узнать curl ident.me, можно указать маску "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"."}]},{"type":"text","value":"."},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"."}]},{"type":"text","value":", но это откроет веб морду для любого ip. Создайте хороший пароль если будете открывать веб морду по маске."}]},{"type":"element","tag":"code","props":{"code":"    \"download-dir\": \"/home/ubuntu/Downloads\",\n    \"incomplete-dir\": \"/home/ubuntu/Downloads/.incomplete\",\n    \"incomplete-dir-enabled\": true,\n    \"rpc-authentication-required\": false,\n    \"rpc-password\": \"pass\",\n    \"rpc-username\": \"admin\",\n    \"rpc-whitelist\": \"127.0.0.1,100.123.10.170\",\n    \"watch-dir\": \"/home/ubuntu/Torrents\",\n    \"watch-dir-enabled\": true\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"    \"download-dir\""}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":" \"/home/ubuntu/Downloads\""}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"    \"incomplete-dir\""}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":" \"/home/ubuntu/Downloads/.incomplete\""}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"    \"incomplete-dir-enabled\""}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"    \"rpc-authentication-required\""}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"    \"rpc-password\""}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":" \"pass\""}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"    \"rpc-username\""}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":" \"admin\""}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"    \"rpc-whitelist\""}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":" \"127.0.0.1,100.123.10.170\""}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"    \"watch-dir\""}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":" \"/home/ubuntu/Torrents\""}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"    \"watch-dir-enabled\""}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"true"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Описание всех настроек settings.json."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://pcminipro.ru/os/nastrojka-transmission-daemon-settings-json","rel":["nofollow"]},"children":[{"type":"text","value":"nastrojka-transmission-daemon-settings-json/"}]}]},{"type":"element","tag":"h2","props":{"id":"системная-конфигурация"},"children":[{"type":"text","value":"Системная конфигурация"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Меняем рабочего юзера и значения памяти sysctl."}]},{"type":"element","tag":"code","props":{"code":"# rename user\nsudo nano /etc/systemd/system/multi-user.target.wants/transmission-daemon.service\nsudo systemctl daemon-reload\nsudo systemctl start transmission-daemon\nsudo systemctl status transmission-daemon\n\necho \"net.core.rmem_max = 4194304\" | sudo tee -a /etc/sysctl.d/50-transmission-daemon.conf\necho \"net.core.wmem_max = 1048576\" | sudo tee -a /etc/sysctl.d/50-transmission-daemon.conf\nsudo sysctl --system\nsudo systemctl restart transmission-daemon\n\nsudo systemctl status transmission-daemon\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8d1493"},"children":[{"type":"text","value":"# rename user"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/etc/systemd/system/multi-user.target.wants/transmission-daemon.service"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"daemon-reload"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"start"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"transmission-daemon"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"transmission-daemon"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"\"net.core.rmem_max = 4194304\""}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-259bd5"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"tee"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-a"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/etc/sysctl.d/"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"50"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"-transmission-daemon.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"\"net.core.wmem_max = 1048576\""}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-259bd5"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"tee"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-a"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/etc/sysctl.d/"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"50"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"-transmission-daemon.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"sysctl"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"--system"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"transmission-daemon"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"transmission-daemon"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"проброс-порта-ssh"},"children":[{"type":"text","value":"Проброс порта ssh"}]},{"type":"element","tag":"code","props":{"code":"ssh -L 9091:127.0.0.1:9091 ubuntu@193.122.8.187 -N\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"ssh"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"9091"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":":127.0.0.1:"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"9091"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"ubuntu@193.122.8.187"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-N"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"экспорт-path"},"children":[{"type":"text","value":"Экспорт PATH"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Добавляем путь для скриптов."}]},{"type":"element","tag":"code","props":{"code":"echo \"export PATH=$HOME/.local/bin:$PATH\" >> ~/.bashrc\nsource ~/.bashrc\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"\"export PATH="}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"$HOME"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/.local/bin:"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"$PATH"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-259bd5"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"~/.bashrc"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"source"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"~/.bashrc"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"открыть-порты"},"children":[{"type":"text","value":"Открыть порты"}]},{"type":"element","tag":"code","props":{"code":"# open port\n51413/tcp\n51413/udp\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8d1493"},"children":[{"type":"text","value":"# open port"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"51413"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"/tcp"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"51413"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"/udp"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Порт 9091/tcp открывать если нужен доступ к веб морде и создайте хороший пароль в таком случае. В ufw."}]},{"type":"element","tag":"code","props":{"code":"sudo ufw allow 51413/tcp\nsudo ufw allow 51413/udp\n# sudo ufw allow 9091/tcp\nsudo ufw reload\nsudo ufw status\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"allow"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"51413"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/tcp"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"allow"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"51413"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/udp"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8d1493"},"children":[{"type":"text","value":"# sudo ufw allow 9091/tcp"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"reload"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"status"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"скрипт-создания-torrent-файла"},"children":[{"type":"text","value":"Скрипт создания torrent файла"}]},{"type":"element","tag":"code","props":{"code":"mkdir ~/.local/bin\nnano ~/.local/bin/transmission.sh\n\n#!/bin/bash\n\n## transmission.sh /file_name.iso /torrent_file.iso.torrent\n\n# Last update 2021/10/04\n# https://github.com/ngosang/trackerslist\n# https://ngosang.github.io/trackerslist/trackers_best.txt\n\nTRANSDIR=$HOME/Downloads\n\ncp -r $1 $TRANSDIR\n\ntransmission-create $1 -c \"https://ctlos.github.io/changelog/\"\n-t http://p4p.arenabg.com:1337/announce\n-t udp://tracker.opentrackr.org:1337/announce\n-t udp://9.rarbg.com:2810/announce\n-t udp://tracker.openbittorrent.com:6969/announce\n-t http://tracker.openbittorrent.com:80/announce\n-t http://openbittorrent.com:80/announce\n-t udp://exodus.desync.com:6969/announce\n-t udp://www.torrent.eu.org:451/announce\n-t udp://tracker.torrent.eu.org:451/announce\n-t udp://tracker.tiny-vps.com:6969/announce\n-t udp://retracker.netbynet.ru:2710/announce\n-t udp://retracker.lanta-net.ru:2710/announce\n-t udp://opentor.org:2710/announce\n-t udp://open.stealth.si:80/announce\n-t udp://camera.lei001.com:6969/announce\n-t udp://bt2.archive.org:6969/announce\n-t udp://bt1.archive.org:6969/announce\n-t https://tracker.nitrix.me:443/announce\n-t https://tracker.nanoha.org:443/announce\n-t https://tracker.lilithraws.cf:443/announce\n-o $2\n\ntransmission-remote -a $2\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"~/.local/bin"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"~/.local/bin/transmission.sh"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8d1493"},"children":[{"type":"text","value":"#!/bin/bash"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8d1493"},"children":[{"type":"text","value":"## transmission.sh /file_name.iso /torrent_file.iso.torrent"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8d1493"},"children":[{"type":"text","value":"# Last update 2021/10/04"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8d1493"},"children":[{"type":"text","value":"# https://github.com/ngosang/trackerslist"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8d1493"},"children":[{"type":"text","value":"# https://ngosang.github.io/trackerslist/trackers_best.txt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"TRANSDIR"}]},{"type":"element","tag":"span","props":{"class":"ct-259bd5"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"$HOME"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/Downloads"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"cp"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-r"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"$1"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" $TRANSDIR"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"transmission-create"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"$1"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"\"https://ctlos.github.io/changelog/\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"http://p4p.arenabg.com:"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"1337"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/announce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"udp://tracker.opentrackr.org:"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"1337"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/announce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"udp://9.rarbg.com:"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"2810"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/announce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"udp://tracker.openbittorrent.com:"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"6969"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/announce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"http://tracker.openbittorrent.com:"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"80"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/announce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"http://openbittorrent.com:"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"80"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/announce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"udp://exodus.desync.com:"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"6969"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/announce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"udp://www.torrent.eu.org:"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"451"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/announce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"udp://tracker.torrent.eu.org:"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"451"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/announce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"udp://tracker.tiny-vps.com:"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"6969"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/announce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"udp://retracker.netbynet.ru:"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"2710"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/announce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"udp://retracker.lanta-net.ru:"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"2710"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/announce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"udp://opentor.org:"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"2710"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/announce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"udp://open.stealth.si:"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"80"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/announce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"udp://camera.lei001.com:"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"6969"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/announce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"udp://bt2.archive.org:"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"6969"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/announce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"udp://bt1.archive.org:"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"6969"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/announce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"https://tracker.nitrix.me:"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"443"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/announce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"https://tracker.nanoha.org:"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"443"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/announce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"https://tracker.lilithraws.cf:"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"443"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/announce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"$2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"transmission-remote"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-a"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"$2"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Команды ниже: листинг, удаление, справка."}]},{"type":"element","tag":"code","props":{"code":"transmission-remote -l\n\ntransmission-remote -t 1 -rad\n\ntransmission-remote -h\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"transmission-remote"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-l"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"transmission-remote"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-rad"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"transmission-remote"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-h"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Авторизация по паролю, если не отключили \"rpc-authentication-required\": true,."}]},{"type":"element","tag":"code","props":{"code":"transmission-remote --auth admin:pass\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"transmission-remote"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"--auth"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"admin:pass"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Просмотр инфы по портам."}]},{"type":"element","tag":"code","props":{"code":"ss -tulpn\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"ss"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-tulpn"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"docker"},"children":[{"type":"text","value":"Docker"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Установка зависимостей, docker, docker-compose в ubuntu minimal."}]},{"type":"element","tag":"code","props":{"code":"sudo apt update && sudo apt upgrade -y\nsudo apt -y install apt-transport-https software-properties-common ca-certificates curl iproute2 gnupg\n    git ufw bash-completion htop nano tmux\n\ncurl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -\nsudo add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\"\nsudo apt update && sudo apt-cache policy docker-ce\nsudo apt install docker-ce docker-ce-cli containerd.io -y\n\ndc_version=$(curl -s \"https://github.com/docker/compose/releases/latest\" | sed 's#.*tag/(.*)\".*#1#')\nsudo curl -L \"https://github.com/docker/compose/releases/download/$dc_version/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\nsudo chmod +x /usr/local/bin/docker-compose\nsudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose\n\nsudo su\npasswd\npasswd ubuntu\nexit\n\nsudo usermod -aG docker ${USER}\nsu - ${USER}\nsudo systemctl enable --now docker\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"upgrade"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-y"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-y"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"apt-transport-https"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"software-properties-common"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"ca-certificates"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"iproute2"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"gnupg"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"bash-completion"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"htop"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"tmux"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-fsSL"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"https://download.docker.com/linux/debian/gpg"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-259bd5"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"apt-key"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"add-apt-repository"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"\"deb [arch=amd64] https://download.docker.com/linux/ubuntu $("}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"lsb_release"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-cs"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":") stable\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"apt-cache"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"policy"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"docker-ce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"docker-ce"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"docker-ce-cli"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"containerd.io"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-y"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"dc_version"}]},{"type":"element","tag":"span","props":{"class":"ct-259bd5"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"$("}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-s"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":" \"https://github.com/docker/compose/releases/latest\" "}]},{"type":"element","tag":"span","props":{"class":"ct-259bd5"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sed"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":" 's#.*tag/(.*)\".*#1#')"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"\"https://github.com/docker/compose/releases/download/"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"$dc_version"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/docker-compose-$("}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"uname"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-s"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":")-$("}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"uname"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-m"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":")\""}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/usr/local/bin/docker-compose"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"chmod"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"+x"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/usr/local/bin/docker-compose"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"ln"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-s"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/usr/local/bin/docker-compose"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/usr/bin/docker-compose"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"su"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"passwd"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"passwd"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"ubuntu"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"exit"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"usermod"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-aG"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" ${USER}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"su"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" ${USER}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"--now"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"docker"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Обязательно нужно создать подкачку, если облако не сделало это автоматически, пример создания swapfile."}]},{"type":"element","tag":"code","props":{"code":"sudo fallocate -l 4G /swapfile\nsudo chmod 600 /swapfile\nsudo mkswap /swapfile\nsudo swapon /swapfile\nsudo swapon --show\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"fallocate"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-l"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"4G"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/swapfile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"chmod"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"600"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/swapfile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"mkswap"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/swapfile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"swapon"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/swapfile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"swapon"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"--show"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"И добавляем в /etc/fstab."}]},{"type":"element","tag":"code","props":{"code":"echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"'/swapfile none swap sw 0 0'"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-259bd5"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"tee"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-a"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/etc/fstab"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Берем готовый compose файл "},{"type":"element","tag":"a","props":{"href":"https://docs.linuxserver.io/images/docker-transmission","rel":["nofollow"]},"children":[{"type":"text","value":"docs.linuxserver.io/images/docker-transmission"}]},{"type":"text","value":". Создаем рабочие директории, переходим в него и создаем композ файл."}]},{"type":"element","tag":"code","props":{"code":"mkdir -p ~/docker-transmission/{config,downloads,watch}\ncd ~/docker-transmission\nnano docker-compose.yml\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"~/docker-transmission/{config,downloads,watch}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"~/docker-transmission"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"docker-compose.yml"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Поменяйте переменные, id покажет uid, gid."}]},{"type":"element","tag":"code","props":{"code":"---\nversion: \"2.1\"\nservices:\n  transmission:\n    image: lscr.io/linuxserver/transmission\n    container_name: transmission\n    environment:\n      - PUID=1000\n      - PGID=1000\n      - TZ=Europe/Moscow\n      - USER=admin #optional\n      - PASS=pass #optional\n      - WHITELIST=iplist #optional\n    volumes:\n      - ./config:/config\n      - ./downloads:/downloads\n      - ./watch:/watch\n    ports:\n      - 9091:9091\n      - 51413:51413\n      - 51413:51413/udp\n    restart: unless-stopped\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"---"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"version:"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"\"2.1\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"services:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"transmission:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"image:"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"lscr.io/linuxserver/transmission"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"container_name:"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"transmission"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"environment:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"PUID="}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"1000"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"PGID="}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"1000"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"TZ=Europe/Moscow"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"USER=admin"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d1493"},"children":[{"type":"text","value":"#optional"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"PASS=pass"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d1493"},"children":[{"type":"text","value":"#optional"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"WHITELIST=iplist"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d1493"},"children":[{"type":"text","value":"#optional"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"volumes:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"./config:/config"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"./downloads:/downloads"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"./watch:/watch"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"ports:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"9091"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"9091"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"51413"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"51413"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"51413"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"51413"}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/udp"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"restart:"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"unless-stopped"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Запуск."}]},{"type":"element","tag":"code","props":{"code":"docker-compose up -d\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"docker-compose"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"up"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-d"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Войти в контейнер."}]},{"type":"element","tag":"code","props":{"code":"docker exec -it transmission /bin/bash\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"exec"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-it"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"transmission"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/bin/bash"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Лог."}]},{"type":"element","tag":"code","props":{"code":"docker logs -f transmission\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"logs"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-f"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"transmission"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Остановка, перейти в директорию."}]},{"type":"element","tag":"code","props":{"code":"cd ~/docker-transmission\ndocker-compose down\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"~/docker-transmission"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"docker-compose"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"down"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Обновление."}]},{"type":"element","tag":"code","props":{"code":"cd ~/docker-transmission\ndocker-compose down\ndocker-compose pull transmission\ndocker-compose up -d\n\n# удаление старых образов\ndocker image prune\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"~/docker-transmission"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"docker-compose"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"down"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"docker-compose"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"pull"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"transmission"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"docker-compose"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"up"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-385dc9"},"children":[{"type":"text","value":"-d"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8d1493"},"children":[{"type":"text","value":"# удаление старых образов"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"prune"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Отключаем видимость ip при ssh логине."}]},{"type":"element","tag":"code","props":{"code":"sudo nano /etc/ssh/sshd_config\n\nPrintLastLog no\n\nsudo systemctl restart sshd\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"/etc/ssh/sshd_config"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"PrintLastLog"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"no"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b84aa4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-e92a6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-15b6b0"},"children":[{"type":"text","value":"sshd"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-259bd5{color:#FF7B72}\n.ct-8d1493{color:#8B949E}\n.ct-385dc9{color:#79C0FF}\n.ct-15b6b0{color:#A5D6FF}\n.ct-e92a6f{color:#C9D1D9}\n.ct-b84aa4{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"установка-transmission-daemon","depth":2,"text":"Установка transmission-daemon"},{"id":"конфигурация-демана","depth":2,"text":"Конфигурация демана"},{"id":"системная-конфигурация","depth":2,"text":"Системная конфигурация"},{"id":"проброс-порта-ssh","depth":2,"text":"Проброс порта ssh"},{"id":"экспорт-path","depth":2,"text":"Экспорт PATH"},{"id":"открыть-порты","depth":2,"text":"Открыть порты"},{"id":"скрипт-создания-torrent-файла","depth":2,"text":"Скрипт создания torrent файла"},{"id":"docker","depth":2,"text":"Docker"}]}},"_type":"markdown","_id":"content:posts:transmission.md","_source":"content","_file":"posts/transmission.md","_extension":"md"},{"_path":"/posts/urxvt-config","_dir":"posts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Arch Urxvt, установка и настройка","description":"Очень быстрый терминал, но немного пугает в настройке.","date":"2019-07-10T00:00:00.000Z","type":"post","img":"/images/posts/urxvt-cfg.png","tags":["config"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Очень быстрый терминал, но немного пугает в настройке."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"urxvt","src":"/images/posts/urxvt-cfg.png"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"установка"},"children":[{"type":"text","value":"Установка"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Я всегда устанавливаю patched версию с аура, некоторые зависимости и шрифт Hack Nerd с набором иконок, "},{"type":"element","tag":"a","props":{"href":"https://github.com/creio/dots/blob/master/.Xresources","rel":["nofollow"]},"children":[{"type":"text","value":"Мой конфиг github"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"yay -S rxvt-unicode-patched urxvt-perls nerd-fonts-hack\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-802781"},"children":[{"type":"text","value":"rxvt-unicode-patched"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-802781"},"children":[{"type":"text","value":"urxvt-perls"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-802781"},"children":[{"type":"text","value":"nerd-fonts-hack"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"настройка-urxvt"},"children":[{"type":"text","value":"Настройка urxvt"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Файл "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/.Xresources"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"!"}]},{"type":"text","value":" Это комментарий. Строки с Xft не относятся к urxvt."}]},{"type":"element","tag":"code","props":{"code":"URxvt.font: xft:Hack Nerd Font Mono:size=9\nURxvt.geometry: 84x22\nURxvt.internalBorder: 15\nURxvt.letterSpace: 0\nURxvt.antialias: true\nURxvt.iconFile: /usr/share/icons/Papirus/48x48/apps/urxvt.svg\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"URxvt.font:"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-802781"},"children":[{"type":"text","value":"xft:Hack"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-802781"},"children":[{"type":"text","value":"Nerd"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-802781"},"children":[{"type":"text","value":"Font"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-802781"},"children":[{"type":"text","value":"Mono:size="}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"9"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"URxvt.geometry:"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-802781"},"children":[{"type":"text","value":"84x22"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"URxvt.internalBorder:"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"15"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"URxvt.letterSpace:"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"URxvt.antialias:"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"true"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"URxvt.iconFile:"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-802781"},"children":[{"type":"text","value":"/usr/share/icons/Papirus/48x48/apps/urxvt.svg"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"шрифт."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"геометрия."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"отступ."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"меж буквенное расстояние."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"файл иконки, как раз за это и отвечает rxvt-unicode-patched."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Строки ниже, отвечают за копирование/вставка по Ctrl-Shift-c/v."}]},{"type":"element","tag":"code","props":{"code":"URxvt.iso14755:        false\nURxvt.iso14755_52:     false\n\nURxvt.clipboard.autocopy: true\nURxvt.keysym.Shift-Control-V: eval:paste_clipboard\nURxvt.keysym.Shift-Control-C: eval:selection_to_clipboard\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"URxvt.iso14755:"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"false"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"URxvt.iso14755_52:"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":"     "}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"false"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"URxvt.clipboard.autocopy:"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"true"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"URxvt.keysym.Shift-Control-V:"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-802781"},"children":[{"type":"text","value":"eval:paste_clipboard"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"URxvt.keysym.Shift-Control-C:"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-802781"},"children":[{"type":"text","value":"eval:selection_to_clipboard"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Остальное, перл плагины для открытия ссылок по клику и некоторые кастомные клавиши."}]},{"type":"element","tag":"code","props":{"code":"URxvt.perl-ext-common: default,clipboard,url-select,keyboard-select,matcher\nURxvt.url-launcher: /usr/bin/xdg-open\nURxvt.url-select.underline: true\nURxvt.matcher.button: 1\n\nURxvt.keysym.Control-Up:    033[1;5A\nURxvt.keysym.Control-Down:  033[1;5B\nURxvt.keysym.Control-Left:  033[1;5D\nURxvt.keysym.Control-Right: 033[1;5C\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"URxvt.perl-ext-common:"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-802781"},"children":[{"type":"text","value":"default,clipboard,url-select,keyboard-select,matcher"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"URxvt.url-launcher:"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-802781"},"children":[{"type":"text","value":"/usr/bin/xdg-open"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"URxvt.url-select.underline:"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"true"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"URxvt.matcher.button:"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"URxvt.keysym.Control-Up:"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c4a2e9"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"33"}]},{"type":"element","tag":"span","props":{"class":"ct-802781"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":";5A"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"URxvt.keysym.Control-Down:"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c4a2e9"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"33"}]},{"type":"element","tag":"span","props":{"class":"ct-802781"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":";5B"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"URxvt.keysym.Control-Left:"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c4a2e9"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"33"}]},{"type":"element","tag":"span","props":{"class":"ct-802781"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":";5D"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"URxvt.keysym.Control-Right:"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c4a2e9"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"33"}]},{"type":"element","tag":"span","props":{"class":"ct-802781"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":";5C"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"config-reload Необходим для смены цвета на лету, не обязательно, поэтому опустил."}]},{"type":"element","tag":"h3","props":{"id":"настройка-цветов"},"children":[{"type":"text","value":"Настройка цветов"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Отключение непрозрачности."}]},{"type":"element","tag":"code","props":{"code":"URxvt.transparent:false\nURxvt.depth: 32\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"URxvt.transparent:"}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"false"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"URxvt.depth:"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"32"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Все схемы я храню в "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/.colors"}]},{"type":"text","value":", а подключаю их инклюдом. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"#"}]},{"type":"text","value":" В данном случае не комментарий, "},{"type":"element","tag":"a","props":{"href":"https://github.com/creio/dots/tree/master/.colors","rel":["nofollow"]},"children":[{"type":"text","value":"github.com/creio/dots/tree/master/.colors"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"#include \".colors/ln\"\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-41daf2"},"children":[{"type":"text","value":"#include \".colors/ln\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Просто цвета, что тут еще сказать. Все что начинается с rofi не обязательно, это цвета лаунчера rofi. Прозрачность фона я обычно задаю через "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[90]"}]},{"type":"text","value":" в процентах."}]},{"type":"element","tag":"code","props":{"code":"*.background: [90]#111113\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c4a2e9"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":".background: ["}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"90"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":"]#"}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"111113"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Рекомендую создать симлинк на rxvt."}]},{"type":"element","tag":"code","props":{"code":"sudo ln -s /usr/bin/urxvt /usr/bin/rxvt\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-802781"},"children":[{"type":"text","value":"ln"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"-s"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-802781"},"children":[{"type":"text","value":"/usr/bin/urxvt"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-802781"},"children":[{"type":"text","value":"/usr/bin/rxvt"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Комбинации клавиш."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ctrl+стрелка вправо/влево: перемешение по словам."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ctrl+a/e: перемешение в начало/конец строки."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ctrl+q: очистить строку."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ctrl+w: удалить слово."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ctrl+l: очистить экран."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ctrl+c: остановить процесс, сбросить набор."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Есть вопросы, пиши в комментах. После изменения файла "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/.Xresources"}]},{"type":"text","value":" необходимо считывать конфиг и перезапускать терминал."}]},{"type":"element","tag":"code","props":{"code":"xrdb -merge ~/.Xresources\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fca"},"children":[{"type":"text","value":"xrdb"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80159d"},"children":[{"type":"text","value":"-merge"}]},{"type":"element","tag":"span","props":{"class":"ct-ccfff2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-802781"},"children":[{"type":"text","value":"~/.Xresources"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-41daf2{color:#8B949E}\n.ct-c4a2e9{color:#FF7B72}\n.ct-802781{color:#A5D6FF}\n.ct-80159d{color:#79C0FF}\n.ct-ccfff2{color:#C9D1D9}\n.ct-d14fca{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"установка","depth":2,"text":"Установка"},{"id":"настройка-urxvt","depth":2,"text":"Настройка urxvt","children":[{"id":"настройка-цветов","depth":3,"text":"Настройка цветов"}]}]}},"_type":"markdown","_id":"content:posts:urxvt-config.md","_source":"content","_file":"posts/urxvt-config.md","_extension":"md"},{"_path":"/posts/vpn","_dir":"posts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Как Создать и Настроить VPN сервер в Linux | Wireguard","description":"Речь пойдет о шифровании трафика в сети и обходе блокировок, рассмотрю несколько способов.","date":"2021-01-31T00:00:00.000Z","type":"post","tags":["vpn"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Речь пойдет о шифровании трафика в сети и обходе блокировок, рассмотрю несколько способов."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.youtube.com/watch?v=4FmWp04auX4","rel":["nofollow"]},"children":[{"type":"text","value":"Video"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://m.do.co/c/49c4dbf3d0ca","rel":["nofollow"]},"children":[{"type":"text","value":"Всё реализовано в дроплете Digital Ocean"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/posts/psiphon"},"children":[{"type":"text","value":"Psiphon о котором я уже упоминал в прошлом посте"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Ssh туннель через сервер в tor"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Sshuttle прокси"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Wireguard"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Гуляем по сети, как рыбы в океане :)."}]},{"type":"element","tag":"h2","props":{"id":"ssh-туннель"},"children":[{"type":"text","value":"Ssh туннель"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Установить ssh."}]},{"type":"element","tag":"code","props":{"code":"yay -S openssh\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"openssh"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Допустим на вашем сервере запущен tor или прокси, через ssh легко можно пробросить порт на котором это работает. Про настройку ssh я писал в ctlos wiki."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://ctlos.github.io/wiki/config/ssh/","rel":["nofollow"]},"children":[{"type":"text","value":"Ctlos wiki ssh"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/OpenSSH","rel":["nofollow"]},"children":[{"type":"text","value":"OpenSSH"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/tor","rel":["nofollow"]},"children":[{"type":"text","value":"Tor"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Установить tor."}]},{"type":"element","tag":"code","props":{"code":"yay -S tor torsocks\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"tor"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"torsocks"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"ssh -L 9050:127.0.0.1:9050 -p 22 cretm@134.122.88.241 -N\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"ssh"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"9050"}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":":127.0.0.1:"}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"9050"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"22"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"cretm@134.122.88.241"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-N"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"127.0.0.1(localhost) — локальный адрес."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Первый 9050, локальный порт."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Второй 9050, на сервере."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-N говорит не открывать соединение, а только проброс."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Теперь локально доступен 9050 и можно открыть на нем chromium в другом терминале."}]},{"type":"element","tag":"code","props":{"code":"chromium --proxy-server='socks://127.0.0.1:9050'\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"chromium"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"--proxy-server="}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"'socks://127.0.0.1:9050'"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Или посмотреть ip через torify, или запустить шелл и выполнять все через tor."}]},{"type":"element","tag":"code","props":{"code":"torify curl ident.me\n# или\ntorify zsh\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"torify"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"ident.me"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2446e8"},"children":[{"type":"text","value":"# или"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"torify"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"zsh"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"sshuttle"},"children":[{"type":"text","value":"Sshuttle"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Позволяет завернуть весь трафик через ssh сервер."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/sshuttle/sshuttle","rel":["nofollow"]},"children":[{"type":"text","value":"repo"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://habr.com/ru/post/318694/","rel":["nofollow"]},"children":[{"type":"text","value":"Статейка habr"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://eax.me/sshuttle/","rel":["nofollow"]},"children":[{"type":"text","value":"И еще одна"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Установка."}]},{"type":"element","tag":"code","props":{"code":"yay -S sshuttle\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"sshuttle"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Запуск."}]},{"type":"element","tag":"code","props":{"code":"sshuttle --dns -r cretm@134.122.88.241 -x 134.122.88.241 0/0\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sshuttle"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"--dns"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-r"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"cretm@134.122.88.241"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-x"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"134.122.88.241"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"0"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"wireguard"},"children":[{"type":"text","value":"Wireguard"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Я все проделываю скриптом easy-wg-quick."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/WireGuard","rel":["nofollow"]},"children":[{"type":"text","value":"Arch Wiki wireguard"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/burghardt/easy-wg-quick","rel":["nofollow"]},"children":[{"type":"text","value":"easy-wg-quick"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.wireguard.com/quickstart/","rel":["nofollow"]},"children":[{"type":"text","value":"wireguard quickstart"}]}]}]},{"type":"element","tag":"h3","props":{"id":"сервер"},"children":[{"type":"text","value":"Сервер"}]},{"type":"element","tag":"code","props":{"code":"yay -S wireguard-tools gawk grep iproute2 net-tools qrencode wget\n\n# если ядро lts\nyay -S wireguard-lts\n\nmkdir vpn && cd vpn\n\nwget -O vpn.sh https://raw.githubusercontent.com/burghardt/easy-wg-quick/master/easy-wg-quick\n\nchmod +x vpn.sh\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"wireguard-tools"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"gawk"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"grep"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"iproute2"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"net-tools"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"qrencode"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"wget"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2446e8"},"children":[{"type":"text","value":"# если ядро lts"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"wireguard-lts"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"vpn"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"vpn"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"wget"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-O"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"vpn.sh"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"https://raw.githubusercontent.com/burghardt/easy-wg-quick/master/easy-wg-quick"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"chmod"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"+x"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"vpn.sh"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Выполните reboot после установки."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Можно задать конкретный порт и ip. Узнать."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Если за nat curl ident.me"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Нет nat ip a"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Путем отправки данных в файлы."}]},{"type":"element","tag":"code","props":{"code":"curl ident.me > extnetip.txt\n# или\necho 134.122.88.241 > extnetip.txt\n\necho 51820 > portno.txt\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"ident.me"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6b6186"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"extnetip.txt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2446e8"},"children":[{"type":"text","value":"# или"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"134.122.88.241"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6b6186"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"extnetip.txt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"51820"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6b6186"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"portno.txt"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Создание конфигурации и клиента."}]},{"type":"element","tag":"code","props":{"code":"./vpn.sh comp\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"/vpn.sh"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"comp"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Запуск, остановка, статус работы."}]},{"type":"element","tag":"code","props":{"code":"sudo wg-quick up ./wghub.conf\nsudo wg-quick down ./wghub.conf\nsudo wg show\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"wg-quick"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"up"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"./wghub.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"wg-quick"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"down"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"./wghub.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"wg"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"show"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Открыть порт если установлен файрвол, рестарт и просмотр статуса."}]},{"type":"element","tag":"code","props":{"code":"sudo ufw allow 51820/udp\nsudo ufw reload\nsudo ufw status\nnetstat -tulpn\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"allow"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"51820"}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"/udp"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"reload"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"status"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"netstat"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-tulpn"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Если на сервере iptables."}]},{"type":"element","tag":"code","props":{"code":"sudo iptables --policy INPUT ACCEPT\nsudo iptables -F\nsudo iptables -A INPUT -p tcp --dport 22 -m state --state NEW -j ACCEPT\nsudo iptables -A INPUT -p udp --dport 51820 -m state --state NEW -j ACCEPT\nsudo netfilter-persistent save\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"iptables"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"--policy"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"INPUT"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"ACCEPT"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"iptables"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-F"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"iptables"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-A"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"INPUT"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"tcp"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"--dport"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"22"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-m"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"state"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"--state"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"NEW"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-j"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"ACCEPT"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"iptables"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-A"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"INPUT"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"udp"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"--dport"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"51820"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-m"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"state"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"--state"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"NEW"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-j"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"ACCEPT"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"netfilter-persistent"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"save"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Удалить правило, где 5 линия. В данном случае удалять ничего не нужно, просто знайте, как работает удаление."}]},{"type":"element","tag":"code","props":{"code":"sudo iptables --list --line-numbers\nsudo iptables -D INPUT 5\nsudo netfilter-persistent save\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"iptables"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"--list"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"--line-numbers"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"iptables"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-D"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"INPUT"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"5"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"netfilter-persistent"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"save"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Создаем второго клиента для мобилки. Сканируем qr в приложении wireguard и перезапускаем сервер."}]},{"type":"element","tag":"code","props":{"code":"./vpn.sh mob\nsudo wg-quick down ./wghub.conf\nsudo wg-quick up ./wghub.conf\nsudo wg show\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"/vpn.sh"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"mob"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"wg-quick"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"down"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"./wghub.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"wg-quick"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"up"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"./wghub.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"wg"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"show"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Вывод qr кода."}]},{"type":"element","tag":"code","props":{"code":"qrencode -t ansiutf8 < wgclient_mob.conf\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"qrencode"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"ansiutf8"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6b6186"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"wgclient_mob.conf"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Основной конфиг с инфой о клиентах."}]},{"type":"element","tag":"code","props":{"code":"cat wghub.conf\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"wghub.conf"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Можно добавить в автостарт systemd."}]},{"type":"element","tag":"code","props":{"code":"sudo cp wghub.conf /etc/wireguard/wghub.conf\nsudo systemctl enable --now wg-quick@wghub\nsystemctl status wg-quick@wghub\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"cp"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"wghub.conf"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"/etc/wireguard/wghub.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"--now"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"wg-quick@wghub"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"wg-quick@wghub"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"клиент"},"children":[{"type":"text","value":"Клиент"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Для клиента Arch Linux. Настройка на вашем компе."}]},{"type":"element","tag":"code","props":{"code":"yay -S wireguard-tools\nsudo nano /etc/wireguard/wg0.conf\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"wireguard-tools"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"/etc/wireguard/wg0.conf"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Скопировать с сервера содержимое файла "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"wgclient_comp.conf"}]},{"type":"text","value":", пример."}]},{"type":"element","tag":"code","props":{"code":"# 10: comp > wgclient_comp.conf\n[Interface]\nAddress = 10.256.112.10/24, fd51:9999:3322:6414::10/64\nDNS = 1.1.1.1, 2606:4700:4700::1111\nPrivateKey = UGdsdfgsdgdfgiJRhlQdX7kQ=\n\n[Peer]\nPublicKey = wvr/gmg/FJN0dfgdfhdfhudRLdIdn+2DQ=\nPresharedKey = /DXNfgNi2iMY5jrdgdfgdgu5tyIX94Xvss=\nAllowedIPs = 0.0.0.0/0, ::/0\nEndpoint = 134.111.10.21:51820\nPersistentKeepalive = 25\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2446e8"},"children":[{"type":"text","value":"# 10: comp > wgclient_comp.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":"[Interface]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"Address"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"10.256.112.10/"}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"24"}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"fd51:"}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"9999"}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"3322"}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"6414"}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"64"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"DNS"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"1.1.1.1,"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"2606"}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"4700"}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"4700"}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"1111"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"PrivateKey"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"UGdsdfgsdgdfgiJRhlQdX7kQ="}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":"[Peer]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"PublicKey"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"wvr/gmg/FJN0dfgdfhdfhudRLdIdn+2DQ="}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"PresharedKey"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"/DXNfgNi2iMY5jrdgdfgdgu5tyIX94Xvss="}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"AllowedIPs"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"0.0.0.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"::/"}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"Endpoint"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"134.111.10.21:"}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"51820"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"PersistentKeepalive"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"25"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Включить сервис systemd и добавить в автостарт если нужно."}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl start wg-quick@wg0\n\nsudo systemctl enable wg-quick@wg0\n\nsudo systemctl enable --now systemd-resolved\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"start"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"wg-quick@wg0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"wg-quick@wg0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"--now"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"systemd-resolved"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Имейте ввиду если на сервере, что-то не так, то и у вас не будет интернета при включенном сервисе. Остановить, выключить."}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl stop wg-quick@wg0\n\nsudo systemctl disable wg-quick@wg0\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"stop"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"wg-quick@wg0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"disable"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"wg-quick@wg0"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Проверить ip можно на "},{"type":"element","tag":"a","props":{"href":"https://2ip.ru","rel":["nofollow"]},"children":[{"type":"text","value":"2ip.ru"}]},{"type":"text","value":", в терминале."}]},{"type":"element","tag":"code","props":{"code":"curl ident.me\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"ident.me"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Проверить скорость интернета."}]},{"type":"element","tag":"code","props":{"code":"curl -s https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest.py | python -\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5bfb58"},"children":[{"type":"text","value":"-s"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest.py"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6b6186"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7718c1"},"children":[{"type":"text","value":"python"}]},{"type":"element","tag":"span","props":{"class":"ct-6519b4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188ef4"},"children":[{"type":"text","value":"-"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-6b6186{color:#FF7B72}\n.ct-2446e8{color:#8B949E}\n.ct-188ef4{color:#A5D6FF}\n.ct-5bfb58{color:#79C0FF}\n.ct-6519b4{color:#C9D1D9}\n.ct-7718c1{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"ssh-туннель","depth":2,"text":"Ssh туннель"},{"id":"sshuttle","depth":2,"text":"Sshuttle"},{"id":"wireguard","depth":2,"text":"Wireguard","children":[{"id":"сервер","depth":3,"text":"Сервер"},{"id":"клиент","depth":3,"text":"Клиент"}]}]}},"_type":"markdown","_id":"content:posts:vpn.md","_source":"content","_file":"posts/vpn.md","_extension":"md"},{"_path":"/posts/web-server","_dir":"posts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Настройка и использование Nginx в Arch Linux | Docker Portainer","description":"Nginx reverse proxy, проброс локальной сети на сервер, через wireguard. Portainer — gui для docker контейнеров.","date":"2021-04-05T00:00:00.000Z","type":"post","tags":["vpn","docker","webserver"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nginx reverse proxy, проброс локальной сети на сервер, через wireguard. Portainer — gui для docker контейнеров."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.youtube.com/watch?v=IFjzUpTjsC4","rel":["nofollow"]},"children":[{"type":"text","value":"Video"}]}]},{"type":"element","tag":"h2","props":{"id":"nginx-локально"},"children":[{"type":"text","value":"Nginx локально"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Для установки на Arch."}]},{"type":"element","tag":"code","props":{"code":"sudo pacman -S nginx\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"pacman"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"nginx"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://nginx.org/ru/docs/beginners_guide.html","rel":["nofollow"]},"children":[{"type":"text","value":"Nginx docs"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/Nginx","rel":["nofollow"]},"children":[{"type":"text","value":"ArchWiki Nginx"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/title/Certbot","rel":["nofollow"]},"children":[{"type":"text","value":"Certbot"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Глобальный конфиг, при обращении по ip, nginx будет отдавать стандартную страницу, по пути "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/usr/share/nginx/html/index.html"}]},{"type":"text","value":", некоторые настройки и импорты других конфигураций include, user - указываю юзера creio, от которого я работаю и из его директории в дальнейшем буду импортировать статичный сайт "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/media/files/github/ctlos/ctlos.github.io/_site"}]},{"type":"text","value":", который сгенерирован jekyll, точнее это не его домашняя директория, но права на нее принадлежат ему."}]},{"type":"element","tag":"code","props":{"code":"sudo nano /etc/nginx/nginx.conf\n\nuser creio users;\nworker_processes  1;\n#error_log  logs/error.log;\n#error_log  logs/error.log  notice;\n#error_log  logs/error.log  info;\n#pid        logs/nginx.pid;\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n    #access_log  logs/access.log  main;\n    types_hash_max_size 4096;\n    server_names_hash_bucket_size 128;\n    sendfile        on;\n    #tcp_nopush     on;\n    keepalive_timeout  65;\n    gzip  on;\n\n    server {\n        listen 80 default_server;\n        listen [::]:80 default_server;\n\n        root /usr/share/nginx/html;\n        index index.htm index.html;\n\n        server_tokens off;\n        autoindex off;\n    }\n\n    include sites-enabled/*;\n}\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/etc/nginx/nginx.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"user"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"creio"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"users"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"worker_processes"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-138d8f"},"children":[{"type":"text","value":"#error_log  logs/error.log;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-138d8f"},"children":[{"type":"text","value":"#error_log  logs/error.log  notice;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-138d8f"},"children":[{"type":"text","value":"#error_log  logs/error.log  info;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-138d8f"},"children":[{"type":"text","value":"#pid        logs/nginx.pid;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"events"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"worker_connections"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"1024"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"http"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"include"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"       "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"mime.types"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"default_type"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"application/octet-stream"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-138d8f"},"children":[{"type":"text","value":"#access_log  logs/access.log  main;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"types_hash_max_size"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"4096"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"server_names_hash_bucket_size"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"128"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sendfile"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-138d8f"},"children":[{"type":"text","value":"#tcp_nopush     on;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"keepalive_timeout"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"65"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"gzip"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"80"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"default_server"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" [::]:80 "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"default_server"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"root"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/usr/share/nginx/html"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"index"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"index.htm"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"index.html"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"server_tokens"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"off"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"autoindex"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"off"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"include"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"sites-enabled/"}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Создаем 2 директории в "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"available"}]},{"type":"text","value":" будем складывать все конфиги сайтов, а в "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"enabled"}]},{"type":"text","value":" будем создавать сим линки "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ln -s"}]},{"type":"text","value":" на то, что хотим включить, если нужно выключить, то просто удаляем конфиг(симлинк) из enabled. Файлы в этих директориях, как зеркала, не важно откуда мы их будем править."}]},{"type":"element","tag":"code","props":{"code":"sudo mkdir /etc/nginx/sites-{available,enabled}\nsudo nano /etc/nginx/sites-available/home.conf\nsudo ln -s /etc/nginx/sites-available/home.conf /etc/nginx/sites-enabled\n# если нужно удалить и не забудь перезапустить nginx\nsudo rm /etc/nginx/sites-enabled/home.conf\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/etc/nginx/sites-{available,enabled}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/etc/nginx/sites-available/home.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"ln"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"-s"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/etc/nginx/sites-available/home.conf"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/etc/nginx/sites-enabled"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-138d8f"},"children":[{"type":"text","value":"# если нужно удалить и не забудь перезапустить nginx"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"rm"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/etc/nginx/sites-enabled/home.conf"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"команды-nginx"},"children":[{"type":"text","value":"Команды nginx"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Проверить конфигурацию на валидность."}]},{"type":"element","tag":"code","props":{"code":"sudo nginx -t\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"nginx"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"-t"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Запуск сервера, рестарт, стоп, средствами systemd."}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl start nginx\n\nsudo systemctl restart nginx\n\nsudo systemctl stop nginx\n\nsudo systemctl status nginx\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"start"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"nginx"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"nginx"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"stop"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"nginx"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"nginx"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Добавить в авто старт и убрать, если нужно."}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl enable nginx\n\nsudo systemctl disable nginx\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"nginx"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"disable"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"nginx"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Просмотр логов в зависимости, что указали в access_log и error_log."}]},{"type":"element","tag":"code","props":{"code":"cat /var/log/nginx/home.access\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/var/log/nginx/home.access"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Я использую "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server_name домен"}]},{"type":"text","value":", но можно манипулировать портами, если нет доменного имени, или воспользоваться freedns, no-ip и подобные. В конфиге ниже нет привязки к домену, а именно к порту, можно использовать и то и другое, как вместе, так и отдельно. В данном случае в браузере мы должны обратится "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ip:port ip:4000"}]},{"type":"text","value":". Команда ip a покажет ip, обычно это 127.0.0.1(localhost), можно и так "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"localhost:4000"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"https://www.duckdns.org/","rel":["nofollow"]},"children":[{"type":"text","value":"www.duckdns.org/"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"# cat /etc/nginx/sites-available/home.conf\nserver {\n  listen 4000;\n  listen [::]:4000;\n  # server_name creio.duckdns.org;\n\n  root /media/files/github/ctlos/ctlos.github.io/_site;\n  index index.html index.htm index.php;\n\n  access_log /var/log/nginx/home.access;\n  error_log /var/log/nginx/home.error;\n\n  location / {\n      autoindex off;\n      try_files $uri $uri/ =404;\n    }\n\n    error_page 404 /404.html;\n    location = /404.html {\n        internal;\n    }\n\n    if ($request_uri = /index.html) {\n        return 301 /;\n    }\n}\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-138d8f"},"children":[{"type":"text","value":"# cat /etc/nginx/sites-available/home.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"4000"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" [::]:4000;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-138d8f"},"children":[{"type":"text","value":"# server_name creio.duckdns.org;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"root"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/media/files/github/ctlos/ctlos.github.io/_site"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"index"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"index.html"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"index.htm"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"index.php"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"access_log"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/var/log/nginx/home.access"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"error_log"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/var/log/nginx/home.error"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"location"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"autoindex"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"off"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"try_files"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" $uri $uri"}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"404"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"error_page"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"404"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/404.html"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"location"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/404.html"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"internal"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8f1662"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" ($request_uri = /index.html) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-8f1662"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"301"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Пример запуска jekyll, по умолчанию он стартует на localhost "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"127.0.0.1"}]},{"type":"text","value":", порт 4000, но через vpn доступа к нему вы не получите, решение указать хост "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-H 0.0.0.0"}]},{"type":"text","value":". В этом случае нам локально не нужен запущенный nginx, а сразу же настраиваем реверс на сервере. Jekyll используется для примера, тут может быть любое приложение на любом порту."}]},{"type":"element","tag":"code","props":{"code":"bundle exec jekyll serve -H 0.0.0.0\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"bundle"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"exec"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"jekyll"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"serve"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"-H"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"0.0.0.0"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Команду можно повесить в авто запуск."}]},{"type":"element","tag":"h2","props":{"id":"nginx-на-сервере"},"children":[{"type":"text","value":"Nginx на сервере"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Конфиг проброса (reverse proxy) локалки на сервер через vpn(wireguard), о его настройке я писал "},{"type":"element","tag":"a","props":{"href":"/posts/vpn"},"children":[{"type":"text","value":"тут"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"curl ident.me\n\nsudo systemctl start wg-quick@wg0\n\nip a\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"ident.me"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"start"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"wg-quick@wg0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"ip"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"a"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Важный момент, если вы хотите иметь доступ к работающим докерам в локальной сети из вне, через vpn, находясь за nat с динамическим ip, обязательно используйте host сеть(0.0.0.0) --network host. При создании конфигурации в portainer, выбирайте сеть host для контейнера, или при ручном запуске контейнера указывайте(--network host). Просмотр сведений о сети. "},{"type":"element","tag":"a","props":{"href":"https://stackoverflow.com/q/32103885","rel":["nofollow"]},"children":[{"type":"text","value":"stackoverflow.com/q/32103885"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"# iproute2\nss -tulpn\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-138d8f"},"children":[{"type":"text","value":"# iproute2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"ss"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"-tulpn"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Приложение работает и теперь можно настроить реверс прокси на сервере впн к этому порту, конфиг почти такой же как и в примере выше, только убираем путь root."}]},{"type":"element","tag":"code","props":{"code":"cat /etc/nginx/sites-enabled/home.ctlos.ru.conf\n# содержимое\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name creio.duckdns.org;\n\n    access_log /var/log/nginx/home.access;\n    error_log /var/log/nginx/home.error;\n\n    # reverse proxy\n    location / {\n        proxy_pass http://10.0.0.10:4000;\n        # proxy_redirect http:// $scheme://;\n        proxy_redirect off;\n        proxy_buffering off;\n        tcp_nodelay on;\n\n        proxy_http_version 1.1;\n        proxy_pass_header Server;\n        proxy_set_header Host $http_host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header Proxy \"Cloud-LB\";\n        proxy_set_header Upgrade $http_upgrade;\n    }\n}\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/etc/nginx/sites-enabled/home.ctlos.ru.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-138d8f"},"children":[{"type":"text","value":"# содержимое"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"80"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" [::]:80;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"server_name"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"creio.duckdns.org"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"access_log"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/var/log/nginx/home.access"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"error_log"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/var/log/nginx/home.error"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-138d8f"},"children":[{"type":"text","value":"# reverse proxy"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"location"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"proxy_pass"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"http://10.0.0.10:"}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"4000"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-138d8f"},"children":[{"type":"text","value":"# proxy_redirect http:// $scheme://;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"proxy_redirect"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"off"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"proxy_buffering"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"off"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"tcp_nodelay"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"proxy_http_version"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"1.1"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"proxy_pass_header"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"Server"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"Host"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" $http_host;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"X-Real-IP"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" $remote_addr;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"X-Forwarded-For"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" $proxy_add_x_forwarded_for;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"X-Forwarded-Proto"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" $scheme;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"Proxy"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"\"Cloud-LB\""}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"Upgrade"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" $http_upgrade;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"proxy_pass http://10.0.0.10:4000;"}]},{"type":"text","value":" указываем ip wg клиента, то есть ваш локальный ip интерфейса wg, команда ip a покажет его. Рестарт nginx и посмотрим статус."}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl restart nginx\n\nsudo systemctl status nginx\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"nginx"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"nginx"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Просмотр отдачи инфы сервером в vpn сети. Должно отдавать одни и теже данные, как локально, так и на сервере."}]},{"type":"element","tag":"code","props":{"code":"curl 10.0.0.10:4000\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"10.0.0.10:"}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"4000"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Таким образом можно создать множество сайтов, пробросить нужные приложения в сеть из локальной сети, но обязательное условие, иметь сервер, иначе в этом мало смысла."}]}]},{"type":"element","tag":"h2","props":{"id":"docker-portainer"},"children":[{"type":"text","value":"Docker Portainer"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В данном подходе не обязательно иметь сервер и можно забыть о vpn, а организовать все локально, без всяких доступов за nat. Поднять в докерах plex, nextcloud и многое другое, а portainer позволяет легко этим управлять."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Установка Doker, docker-compose и настройка. "},{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/Docker","rel":["nofollow"]},"children":[{"type":"text","value":"wiki.archlinux.org/index.php/Docker"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"sudo pacman -S docker-compose\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"pacman"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"docker-compose"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Добавляем пользователя от которого работаем(username) в группу docker."}]},{"type":"element","tag":"code","props":{"code":"sudo usermod -aG docker username\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"usermod"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"-aG"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"username"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Возможно стоит перезагрузиться. Включаем сервис и добавляем в авто-старт, если нужно."}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl start docker\n\nsudo systemctl enable docker\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"start"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"docker"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"docker"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Portainer — веб интерфейс на 9000 порту, для управления docker контейнерами. "},{"type":"element","tag":"a","props":{"href":"https://documentation.portainer.io/v2.0/deploy/ceinstalldocker/","rel":["nofollow"]},"children":[{"type":"text","value":"documentation portainer"}]},{"type":"text","value":". Создадим диск "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"portainer_data"}]},{"type":"text","value":", как сказано в доках."}]},{"type":"element","tag":"code","props":{"code":"docker volume create portainer_data\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"volume"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"portainer_data"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Одна из команд ниже запустит portainer, о хост сети я уже говорил выше, но можно и использовать 2 команду, только необходимо немного ковырнуть докер. В случае отказа запуска сервиса docker, попробуйте. "},{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/Docker#Daemon_socket","rel":["nofollow"]},"children":[{"type":"text","value":"wiki.archlinux.org"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl daemon-reload\nsudo rm -rf /var/run/docker.sock\nsudo systemctl restart docker\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"daemon-reload"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"rm"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"-rf"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/var/run/docker.sock"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"docker"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Если вы изменили socket, как сказано в вики, то используйте вторую команду, контейнер будет доступен в vpn сети на 9000 порту."}]},{"type":"element","tag":"code","props":{"code":"# запуск в host сети\ndocker run -d --network host --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce --logo \"https://ctlos.github.io/assets/img/logo.svg\"\n\n# bridge ports, portainer-ce\ndocker run -d -p 9000:9000 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce --logo \"https://ctlos.github.io/assets/img/logo.svg\"\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-138d8f"},"children":[{"type":"text","value":"# запуск в host сети"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"-d"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"--network"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"host"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"--name=portainer"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"--restart=always"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"-v"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/var/run/docker.sock:/var/run/docker.sock"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"-v"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"portainer_data:/data"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"portainer/portainer-ce"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"--logo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"\"https://ctlos.github.io/assets/img/logo.svg\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-138d8f"},"children":[{"type":"text","value":"# bridge ports, portainer-ce"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"-d"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"9000"}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"9000"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"--name=portainer"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"--restart=always"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"-v"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"/var/run/docker.sock:/var/run/docker.sock"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"-v"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"portainer_data:/data"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"portainer/portainer-ce"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-994575"},"children":[{"type":"text","value":"--logo"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"\"https://ctlos.github.io/assets/img/logo.svg\""}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"команды-docker"},"children":[{"type":"text","value":"Команды docker"}]},{"type":"element","tag":"code","props":{"code":"# список контейнеров\ndocker ps\n\n# остановка ID или Name\ndocker stop portainer\n\n# запуск ID или Name\ndocker start fc46d04d334d\n\n# удалить\ndocker rm portainer\n\n# удалить диск\ndocker volume rm portainer_data\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-138d8f"},"children":[{"type":"text","value":"# список контейнеров"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"ps"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-138d8f"},"children":[{"type":"text","value":"# остановка ID или Name"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"stop"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"portainer"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-138d8f"},"children":[{"type":"text","value":"# запуск ID или Name"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"start"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"fc46d04d334d"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-138d8f"},"children":[{"type":"text","value":"# удалить"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"rm"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"portainer"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-138d8f"},"children":[{"type":"text","value":"# удалить диск"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e7562"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"volume"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"rm"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1c3e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0362"},"children":[{"type":"text","value":"portainer_data"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Многое можно делать в терминале, точнее все. Рекомендую детальней изучить docker-compose, "},{"type":"element","tag":"a","props":{"href":"https://docs.docker.com/","rel":["nofollow"]},"children":[{"type":"text","value":"docs.docker.com/"}]},{"type":"text","value":"."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-8f1662{color:#FF7B72}\n.ct-138d8f{color:#8B949E}\n.ct-994575{color:#79C0FF}\n.ct-2e0362{color:#A5D6FF}\n.ct-2b1c3e{color:#C9D1D9}\n.ct-2e7562{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"nginx-локально","depth":2,"text":"Nginx локально","children":[{"id":"команды-nginx","depth":3,"text":"Команды nginx"}]},{"id":"nginx-на-сервере","depth":2,"text":"Nginx на сервере"},{"id":"docker-portainer","depth":2,"text":"Docker Portainer","children":[{"id":"команды-docker","depth":3,"text":"Команды docker"}]}]}},"_type":"markdown","_id":"content:posts:web-server.md","_source":"content","_file":"posts/web-server.md","_extension":"md"},{"_path":"/posts/weechat","_dir":"posts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Настройка и использование weechat в linux","description":"Weechat — консольный чат клиент для irc сетей и не только, weechat about.","date":"2022-05-12T00:00:00.000Z","type":"post","img":"/images/posts/weechat.png","tags":["config"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Weechat — консольный чат клиент для irc сетей и не только, "},{"type":"element","tag":"a","props":{"href":"https://weechat.org/about/","rel":["nofollow"]},"children":[{"type":"text","value":"weechat about"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"weechat","src":"/images/posts/weechat.png"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"установка"},"children":[{"type":"text","value":"Установка"}]},{"type":"element","tag":"code","props":{"code":"yay -S weechat\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"weechat"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Запуск."}]},{"type":"element","tag":"code","props":{"code":"weechat\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"weechat"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"основные-команды"},"children":[{"type":"text","value":"Основные команды"}]},{"type":"element","tag":"code","props":{"code":"# записать изменения в конфиги\n/save\n# перезагрузить\n/reload\n# выход\n/quit\n# изменения значений, через\n/set\n# показ значений, типо справка\n/fset\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# записать изменения в конфиги"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/save"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# перезагрузить"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/reload"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# выход"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/quit"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# изменения значений, через"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"set"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# показ значений, типо справка"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/fset"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"подключение-к-сети-libera"},"children":[{"type":"text","value":"Подключение к сети Libera"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Настройка подключения к irc сети Libera.Chat. Актуальные данные для подключения уточняйте на их сайте, порт и хост. "},{"type":"element","tag":"a","props":{"href":"https://libera.chat/guides/connect","rel":["nofollow"]},"children":[{"type":"text","value":"libera.chat guides"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"После запуска weechat, конфиги пользователя инициализируются в "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/.config/weechat"}]},{"type":"text","value":" вручную менять их не рекомендуется, все делаем через /команды. Добавляем сервер. Стоит отметить, что серверов может быть много, можно добавить и другие таким же макаром."}]},{"type":"element","tag":"code","props":{"code":"/server add libera irc.libera.chat/6697 -ssl\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/server"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"libera"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"irc.libera.chat/"}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"6697"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"-ssl"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ники и имя."}]},{"type":"element","tag":"code","props":{"code":"/set irc.server.libera.nicks \"creio,cretm,mynick3,mynick4,mynick5\"\n/set irc.server.libera.username \"creio\"\n/set irc.server.libera.realname \"Alex Creio\"\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"irc.server.libera.nicks"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"\"creio,cretm,mynick3,mynick4,mynick5\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"irc.server.libera.username"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"\"creio\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"irc.server.libera.realname"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"\"Alex Creio\""}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"регистрация-в-libera"},"children":[{"type":"text","value":"Регистрация в libera"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Довольно неплохо написано на их сайте, но я все же опишу."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://libera.chat/guides/registration","rel":["nofollow"]},"children":[{"type":"text","value":"libera.chat guides registration"}]}]},{"type":"element","tag":"code","props":{"code":"# подключиться к серверу\n/connect libera\n\n# присвойте основной ник\n/nick YourNick\n# дополнительный\n/nick YourNick2\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# подключиться к серверу"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/connect"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"libera"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# присвойте основной ник"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/nick"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"YourNick"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# дополнительный"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/nick"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"YourNick2"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Регистрация ника. Придумайте пароль и укажите реальные email, на него придет подтверждение, которое нужно запустить."}]},{"type":"element","tag":"code","props":{"code":"/msg NickServ REGISTER YourPassword youremail@example.com\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/msg"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"NickServ"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"REGISTER"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"YourPassword"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"youremail@example.com"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"После подтверждения вход в учетку."}]},{"type":"element","tag":"code","props":{"code":"/msg NickServ IDENTIFY YourNick YourPassword\n# привязка\n/msg NickServ GROUP\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/msg"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"NickServ"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"IDENTIFY"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"YourNick"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"YourPassword"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# привязка"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/msg"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"NickServ"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"GROUP"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Чистый вход. Подключение к серверу и авторизация."}]},{"type":"element","tag":"code","props":{"code":"/connect irc.libera.chat 6667 YourNick:YourPassword\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/connect"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"irc.libera.chat"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"6667"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"YourNick:YourPassword"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Если подключены к серверу, но не авторизованы."}]},{"type":"element","tag":"code","props":{"code":"/msg NickServ IDENTIFY YourNick YourPassword\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/msg"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"NickServ"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"IDENTIFY"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"YourNick"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"YourPassword"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ниже описан процесс сохранения данных в конфиг."}]}]},{"type":"element","tag":"h3","props":{"id":"подключение"},"children":[{"type":"text","value":"Подключение"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В чистый weechat с имеющейся учетной записью."}]},{"type":"element","tag":"code","props":{"code":"/set irc.server.libera.autoconnect on\n/set irc.server.libera.sasl_username \"creio\"\n/set irc.server.libera.sasl_password \"xxxxxxx\"\n# автовход в чат(ы), через запятую\n/set irc.server.libera.autojoin \"#ctlos\"\n# сохранить\n/save\n# подключить\n/connect libera\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"irc.server.libera.autoconnect"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"on"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"irc.server.libera.sasl_username"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"\"creio\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"irc.server.libera.sasl_password"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"\"xxxxxxx\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# автовход в чат(ы), через запятую"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"irc.server.libera.autojoin"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"\"#ctlos\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# сохранить"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/save"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# подключить"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/connect"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"libera"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Более п"},{"type":"element","tag":"a","props":{"href":"https://weechat.org/files/doc/stable/weechat_quickstart.ru.html","rel":["nofollow"]},"children":[{"type":"text","value":"одробное руководство"}]},{"type":"text","value":" по настройки подключения."}]},{"type":"element","tag":"h2","props":{"id":"дополнительные-команды"},"children":[{"type":"text","value":"Дополнительные команды"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Вход, выход, отключение, сообщения."}]},{"type":"element","tag":"code","props":{"code":"# Зайти на канал\n/join #ctlos\n\n# Покинуть канал (оставляет буфер)\n/part [quit message]\n\nЗакрыть соединение с сервером, каналом или буфером\n/close\n\n# Отключиться от сервера, на серверном буфере\n/disconnect\n\n# Открыть буфер и отправить сообщение пользователю (с псевдонимом foo):\n/query foo сообщение\n\n# Закрыть буфер\n/close\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# Зайти на канал"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/join"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"#ctlos"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# Покинуть канал (оставляет буфер)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/part"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" [quit message]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"Закрыть"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"соединение"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"с"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"сервером,"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"каналом"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"или"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"буфером"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/close"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# Отключиться от сервера, на серверном буфере"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/disconnect"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# Открыть буфер и отправить сообщение пользователю (с псевдонимом foo):"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/query"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"сообщение"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# Закрыть буфер"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/close"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"подключение-к-matrix"},"children":[{"type":"text","value":"Подключение к matrix"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://matrix.to/#/#ctlos:matrix.org","rel":["nofollow"]},"children":[{"type":"text","value":"Matrix"}]},{"type":"text","value":" отдельный сервер, точнее целая сеть, проще всего создать аккаунт через веб интерфейс riot.im(element), а затем уже его прописать в weechat. В репозитории лежит пакет weechat-matrix, но он криво работает, поэтому ставим rs."}]},{"type":"element","tag":"code","props":{"code":"yay -S weechat-matrix-rs-git\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"weechat-matrix-rs-git"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Добавляем сервер и настраиваем подключение."}]},{"type":"element","tag":"code","props":{"code":"/matrix server add matrix_org https://matrix.org/\n\n/set matrix-rust.server.matrix_org.autoconnect on\n/set matrix-rust.server.matrix_org.ssl_verify on\n\n/set matrix-rust.server.matrix_org.username johndoe\n/set matrix-rust.server.matrix_org.password Mypassword\n\n/matrix connect matrix_org\n\n/save\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/matrix"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"matrix_org"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"https://matrix.org/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"matrix-rust.server.matrix_org.autoconnect"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"on"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"matrix-rust.server.matrix_org.ssl_verify"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"on"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"matrix-rust.server.matrix_org.username"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"johndoe"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"matrix-rust.server.matrix_org.password"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"Mypassword"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/matrix"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"connect"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"matrix_org"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/save"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"изменение-интерфейса"},"children":[{"type":"text","value":"Изменение интерфейса"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Чаты(каналы) и серверы образуют буферы(вкладки), переключать их Alt + цифра или Alt + (вверх,вниз). Отключить автоматическое совмещение буферов сервера."}]},{"type":"element","tag":"code","props":{"code":"# default: merge_with_core\n/set irc.look.server_buffer independent\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# default: merge_with_core"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"irc.look.server_buffer"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"independent"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Уменьшить ники и буферы по ширине."}]},{"type":"element","tag":"code","props":{"code":"/set weechat.bar.buflist.size_max 20\n/set weechat.look.prefix_align_max 15\n/bar set nicklist size_max 15\n/bar set nicklist size 15\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"weechat.bar.buflist.size_max"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"20"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"weechat.look.prefix_align_max"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"15"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/bar"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"nicklist"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"size_max"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"15"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/bar"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"nicklist"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"size"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"15"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Включить мышь, после этого копирование работает с удерживанием Shift."}]},{"type":"element","tag":"code","props":{"code":"/mouse enable\n/save\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/mouse"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"enable"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/save"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://weechat.org/scripts/","rel":["nofollow"]},"children":[{"type":"text","value":"Скрипты"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"/set weechat.plugin.autoload \"*,!guile,!javascript,!lua,!php,!tcl,!perl,!ruby,!fifo,!xfer\"\n/set script.scripts.download_enabled on\n/script install autosort.py\n/save\n/script\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"weechat.plugin.autoload"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"\"*,!guile,!javascript,!lua,!php,!tcl,!perl,!ruby,!fifo,!xfer\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-89f232"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"script.scripts.download_enabled"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"on"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/script"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"autosort.py"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/save"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/script"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Клавиши PageUp/PageDown скролл истории чата, Alt+l переключение ленты чата на все окно. Остальное в "},{"type":"element","tag":"a","props":{"href":"https://weechat.org/doc/","rel":["nofollow"]},"children":[{"type":"text","value":"документации"}]},{"type":"text","value":" :)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Настраивается абсолютно все, постарался в данное руководство воткнуть самый минимум для старта и более-менее комфортного использования, а также не забывайте, что матричные чаты можно юзать и в браузере, как и некоторые irc."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Не забудь заглянуть в чаты Ctlos Linux:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://matrix.to/#/#ctlos:matrix.org","rel":["nofollow"]},"children":[{"type":"text","value":"Matrix"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://matrix.to/#/#ctlos:libera.chat","rel":["nofollow"]},"children":[{"type":"text","value":"Matrix Libera"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://web.libera.chat/#ctlos","rel":["nofollow"]},"children":[{"type":"text","value":"Web Kiwiirc"}]}]}]},{"type":"element","tag":"code","props":{"code":"/join #ctlos\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/join"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"#ctlos"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"подключение-через-matrix"},"children":[{"type":"text","value":"Подключение через Matrix"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Авторизовавшись через web морду, например riot.im(element) по ссылкам выше, можно войти практически в любой irc сервер под своими учетными данными, через мосты, так сервисы крупных irc сетей уже присутствуют в матриксе, покажу на примере libera. Откройте диалоги с ботами "},{"type":"element","tag":"a","props":{"href":"https://matrix.to/#/@appservice:libera.chat","rel":["nofollow"]},"children":[{"type":"text","value":"@appservice:libera.chat"}]},{"type":"text","value":" и "},{"type":"element","tag":"a","props":{"href":"https://matrix.to/#/@NickServ:libera.chat","rel":["nofollow"]},"children":[{"type":"text","value":"@NickServ:libera.chat"}]},{"type":"text","value":", просто начните с ними чат."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Первой командой вы меняете ник, сообщаете серверу, что это вы."}]},{"type":"element","tag":"code","props":{"code":"# команда|server|ник\n!nick irc.libera.chat YourNick\n# в ответе\n# Nick changed from 'YourNick[m]' to 'YourNick'\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# команда|server|ник"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5449e7"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"nick"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"irc.libera.chat"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"YourNick"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# в ответе"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# Nick changed from 'YourNick[m]' to 'YourNick'"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Перечисление чатов к которым вы подключены на сервере libera, их мосты, если таковые имеются."}]},{"type":"element","tag":"code","props":{"code":"!listrooms\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5449e7"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"listrooms"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Для авторизации перейдите к боту "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@NickServ:libera.chat"}]},{"type":"text","value":", тут все по аналогии, выше писал о создании учетки и логине, отличие только в опускании начала команды "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/msg NickServ"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"identify YourNick YourPassword\n# должен появиться диалог SaslServ (PM on irc.libera.chat) с инфо о логине\ninfo\nstatus\nacc YourNick\n# ответ acc 3, значит все ок\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"identify"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"YourNick"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"YourPassword"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# должен появиться диалог SaslServ (PM on irc.libera.chat) с инфо о логине"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"info"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"status"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"acc"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"YourNick"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# ответ acc 3, значит все ок"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Регистрация и подтверждение кода через почту."}]},{"type":"element","tag":"code","props":{"code":"register YourPassword your@email.com\n# код с почты\nverify register YourNick verification-code\ninfo\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"register"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"YourPassword"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"your@email.com"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# код с почты"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"verify"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"register"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"YourNick"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"verification-code"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"info"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Теперь возвращайтесь к боту "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@appservice:libera.chat"}]},{"type":"text","value":" для настройки автоматической авторизации."}]},{"type":"element","tag":"code","props":{"code":"!username YourNick\n# ответ Successfully\n!storepass YourPassword\n# ответ Successfully\n# переподключить\n!reconnect\n# информация\n!whois YourNick\n\n# список чатов данного моста\n!listrooms\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5449e7"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"YourNick"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# ответ Successfully"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5449e7"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"storepass"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"YourPassword"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# ответ Successfully"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# переподключить"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5449e7"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"reconnect"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# информация"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5449e7"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"whois"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"YourNick"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"# список чатов данного моста"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5449e7"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"listrooms"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Мосты работают с небольшой задержкой и в интерфейсе матрикса форматирование мешает, но можно выбрать простой текст:"}]},{"type":"element","tag":"code","props":{"code":"/plain !join #ctlos\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"/plain"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439adb"},"children":[{"type":"text","value":"!join"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c7055a"},"children":[{"type":"text","value":"#ctlos"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Если вы хотите войти без моста с учеткой матрикса, то просто подставьте в адресной строке #ctlos:libera.chat"}]},{"type":"element","tag":"code","props":{"code":"https://riot.im/app/#/room/#ctlos:libera.chat\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a83a"},"children":[{"type":"text","value":"https://riot.im/app/"}]},{"type":"element","tag":"span","props":{"class":"ct-2c0f88"},"children":[{"type":"text","value":"#/room/#ctlos:libera.chat"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-5449e7{color:#FF7B72}\n.ct-c7055a{color:#8B949E}\n.ct-439adb{color:#A5D6FF}\n.ct-89f232{color:#79C0FF}\n.ct-2c0f88{color:#C9D1D9}\n.ct-f1a83a{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"установка","depth":2,"text":"Установка","children":[{"id":"основные-команды","depth":3,"text":"Основные команды"}]},{"id":"подключение-к-сети-libera","depth":2,"text":"Подключение к сети Libera","children":[{"id":"регистрация-в-libera","depth":3,"text":"Регистрация в libera"},{"id":"подключение","depth":3,"text":"Подключение"}]},{"id":"дополнительные-команды","depth":2,"text":"Дополнительные команды"},{"id":"подключение-к-matrix","depth":2,"text":"Подключение к matrix"},{"id":"изменение-интерфейса","depth":2,"text":"Изменение интерфейса"},{"id":"подключение-через-matrix","depth":2,"text":"Подключение через Matrix"}]}},"_type":"markdown","_id":"content:posts:weechat.md","_source":"content","_file":"posts/weechat.md","_extension":"md"},{"_path":"/posts/wire-hole","_dir":"posts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Wireguard, pihole, unbound | предотвращаем утечку dns","description":"Смотри видео с детальной настройкой youtube.com.","date":"2022-12-17T00:00:00.000Z","type":"post","tags":["vpn","network"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Смотри видео с детальной настройкой "},{"type":"element","tag":"a","props":{"href":"https://www.youtube.com/watch?v=iTozi7KE904","rel":["nofollow"]},"children":[{"type":"text","value":"youtube.com"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"45.138.72.135\nroot\n747AuBOZ7WNt\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"45.138.72.135"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"root"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"747AuBOZ7WNt"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"unbound"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"wireguard"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"pihole"}]}]},{"type":"element","tag":"code","props":{"code":"apt install wg...\n\n\nwget https://raw.githubusercontent.com/burghardt/easy-wg-quick/master/easy-wg-quick\nchmod +x easy-wg-quick\n./easy-wg-quick\n\nsudo cp wghub.conf /etc/wireguard/wghub.conf\nsudo systemctl enable --now wg-quick@wghub\n\n# new client\n./easy-wg-quick bla\nsudo cp -r wghub.conf /etc/wireguard/wghub.conf\nsudo systemctl restart wg-quick@wghub\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"wg..."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"wget"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"https://raw.githubusercontent.com/burghardt/easy-wg-quick/master/easy-wg-quick"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"chmod"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"+x"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"easy-wg-quick"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"/easy-wg-quick"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"cp"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"wghub.conf"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"/etc/wireguard/wghub.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"--now"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"wg-quick@wghub"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# new client"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"/easy-wg-quick"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"bla"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"cp"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"-r"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"wghub.conf"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"/etc/wireguard/wghub.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"wg-quick@wghub"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"sudo wg-quick down ./wghub.conf # if already configured\nsudo wg-quick up ./wghub.conf\nsudo wg show\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"wg-quick"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"down"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"./wghub.conf"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# if already configured"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"wg-quick"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"up"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"./wghub.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"wg"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"show"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"# sudo nano /etc/sysctl.conf\n\nnet.core.default_qdisc = fq\nnet.ipv4.tcp_congestion_control = bbr\nnet.ipv4.ip_forward = 1\nnet.ipv4.conf.default.rp_filter = 1\nnet.ipv4.conf.all.rp_filter = 1\nnet.ipv4.tcp_syncookies = 1\n\n# sudo sysctl -p\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# sudo nano /etc/sysctl.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"net.core.default_qdisc"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"fq"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"net.ipv4.tcp_congestion_control"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"bbr"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"net.ipv4.ip_forward"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"net.ipv4.conf.default.rp_filter"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"net.ipv4.conf.all.rp_filter"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"net.ipv4.tcp_syncookies"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# sudo sysctl -p"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"sudo cat /etc/wireguard/wghub.conf\n# open port\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"/etc/wireguard/wghub.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# open port"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"curl -o /var/lib/unbound/root.hints https://www.internic.net/domain/named.cache\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"/var/lib/unbound/root.hints"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"https://www.internic.net/domain/named.cache"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"# mv access-control: 10.134.99.0/24 > wg network | ip a\n# sudo nano /etc/unbound/unbound.conf.d/pi-hole.conf\n\nserver:\n    # if no logfile is specified, syslog is used\n    # logfile: \"/var/log/unbound/unbound.log\"\n    verbosity: 1\n    port: 5353\n\n    do-ip4: yes\n    do-udp: yes\n    do-tcp: yes\n\n    # may be set to yes if you have IPv6 connectivity\n    do-ip6: no\n\n    # use this only when you downloaded the list of primary root servers\n    root-hints: \"/var/lib/unbound/root.hints\"\n\n    # respond to DNS requests on all interfaces\n    interface: 0.0.0.0\n    max-udp-size: 3072\n\n    # IPs authorised to access the DNS Server\n    access-control: 0.0.0.0/0                 refuse\n    access-control: 127.0.0.1                 allow\n    access-control: 10.134.99.0/24            allow\n\n    # hide DNS Server info\n    hide-identity: yes\n    hide-version: yes\n\n    # limit DNS fraud and use DNSSEC\n    harden-glue: yes\n    harden-dnssec-stripped: yes\n    harden-referral-path: yes\n\n    # add an unwanted reply threshold to clean the cache and avoid, when possible, DNS poisoning\n    unwanted-reply-threshold: 10000000\n\n    # have the validator print validation failures to the log val-log-level: 1\n    # don't use Capitalisation randomisation as it known to cause DNSSEC issues sometimes\n    # see https://discourse.pi-hole.net/t/unbound-stubby-or-dnscrypt-proxy/9378 for further details\n    use-caps-for-id: no\n\n    # reduce EDNS reassembly buffer size\n    # suggested by the unbound man page to reduce fragmentation reassembly problems\n    edns-buffer-size: 1472\n\n    # TTL bounds for cache\n    cache-min-ttl: 3600\n    cache-max-ttl: 86400\n\n    # perform prefetching of close to expired message cache entries\n    # this only applies to domains that have been frequently queried\n    prefetch: yes\n    prefetch-key: yes\n    # one thread should be sufficient, can be increased on beefy machines\n    num-threads: 1\n    # ensure kernel buffer is large enough to not lose messages in traffic spikes\n    so-rcvbuf: 1m\n\n    # ensure privacy of local IP ranges\n    private-address: 192.168.0.0/16\n    private-address: 169.254.0.0/16\n    private-address: 172.16.0.0/12\n    private-address: 10.0.0.0/8\n    private-address: fd00::/8\n    private-address: fe80::/10\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# mv access-control: 10.134.99.0/24 > wg network | ip a"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# sudo nano /etc/unbound/unbound.conf.d/pi-hole.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"server:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# if no logfile is specified, syslog is used"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# logfile: \"/var/log/unbound/unbound.log\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"verbosity:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"port:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"5353"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    do-ip4: yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    do-udp: yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    do-tcp: yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# may be set to yes if you have IPv6 connectivity"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    do-ip6: no"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# use this only when you downloaded the list of primary root servers"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"root-hints:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"\"/var/lib/unbound/root.hints\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# respond to DNS requests on all interfaces"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"interface:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"0.0.0.0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"max-udp-size:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"3072"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# IPs authorised to access the DNS Server"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"access-control:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"0.0.0.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"                 "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"refuse"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"access-control:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"127.0.0.1"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"                 "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"allow"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"access-control:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"10.134.99.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"24"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"allow"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# hide DNS Server info"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"hide-identity:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"hide-version:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# limit DNS fraud and use DNSSEC"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"harden-glue:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"harden-dnssec-stripped:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"harden-referral-path:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# add an unwanted reply threshold to clean the cache and avoid, when possible, DNS poisoning"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"unwanted-reply-threshold:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"10000000"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# have the validator print validation failures to the log val-log-level: 1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# don't use Capitalisation randomisation as it known to cause DNSSEC issues sometimes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# see https://discourse.pi-hole.net/t/unbound-stubby-or-dnscrypt-proxy/9378 for further details"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"use-caps-for-id:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"no"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# reduce EDNS reassembly buffer size"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# suggested by the unbound man page to reduce fragmentation reassembly problems"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"edns-buffer-size:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"1472"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# TTL bounds for cache"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"cache-min-ttl:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"3600"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"cache-max-ttl:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"86400"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# perform prefetching of close to expired message cache entries"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# this only applies to domains that have been frequently queried"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"prefetch:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"prefetch-key:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"yes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# one thread should be sufficient, can be increased on beefy machines"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"num-threads:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# ensure kernel buffer is large enough to not lose messages in traffic spikes"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"so-rcvbuf:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"1m"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# ensure privacy of local IP ranges"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"private-address:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"192.168.0.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"16"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"private-address:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"169.254.0.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"16"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"private-address:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"172.16.0.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"12"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"private-address:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"10.0.0.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"8"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"private-address:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"fd00::/"}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"8"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"private-address:"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"fe80::/"}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"10"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl enable --now unbound\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"--now"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"unbound"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"# intfs  wghub\ncurl -sSL https://install.pi-hole.net | bash\n\nhttp://ip/admin\n\n# Settings - DNS наш Unbound 127.0.0.1#5353\n\n# open port 5353\ndig pi-hole.net @127.0.0.1 -p 5353  # NOERROR\ndig sigok.verteiltesysteme.net @127.0.0.1 -p 5353\ndig sigfail.verteiltesysteme.net @127.0.0.1 -p 5353  # SERFAIL\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# intfs  wghub"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"-sSL"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"https://install.pi-hole.net"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4562fb"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"bash"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"http://ip/admin"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# Settings - DNS наш Unbound 127.0.0.1#5353"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# open port 5353"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"dig"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"pi-hole.net"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"@127.0.0.1"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"5353"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# NOERROR"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"dig"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"sigok.verteiltesysteme.net"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"@127.0.0.1"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"5353"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"dig"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"sigfail.verteiltesysteme.net"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"@127.0.0.1"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"5353"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# SERFAIL"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"# wg client conf dns > wghub | ip a\n# wg\nnano intnetdns.txt\n\n# replace ip 1.1.1.1 default > wghub ip : 10.148.135.1\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# wg client conf dns > wghub | ip a"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# wg"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"intnetdns.txt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# replace ip 1.1.1.1 default > wghub ip : 10.148.135.1"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"# dns wghub ip : 10.148.135.1\n\n# 10: 10 > wgclient_10.conf\n[Interface]\nAddress = 10.148.135.10/24\nDNS = 10.148.135.1\nPrivateKey = oBj9b47cvZaGaCdHQUl1tu6in6L4yoL8hXxUd1EpU1c=\nMTU = 1280\n\n[Peer]\nPublicKey = G7VcOHBqXYFPppKNUZ25RJLjEXEDq+Gsn/jmczX5HB0=\nPresharedKey = LDgByqF8J/TgBI9vE+17aRNWnlJwQoD6i6xZCbwbdBk=\nAllowedIPs = 0.0.0.0/0, ::/0\nEndpoint = 45.138.72.135:44828\nPersistentKeepalive = 25\n\n# open ports\nufw allow ssh\nufw allow 44828/udp\n\n# net\nufw allow 80/tcp\nufw allow 53/udp\n\n# wg\nsudo ufw allow from 10.134.99.0/24 to any port 80\nsudo ufw allow from 10.134.99.0/24 to any port 53\nsudo ufw reject https\n\nss -tulpn\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# dns wghub ip : 10.148.135.1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# 10: 10 > wgclient_10.conf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"[Interface]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"Address"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"10.148.135.10/"}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"24"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"DNS"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"10.148.135.1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"PrivateKey"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"oBj9b47cvZaGaCdHQUl1tu6in6L4yoL8hXxUd1EpU1c="}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"MTU"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"1280"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":"[Peer]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"PublicKey"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"G7VcOHBqXYFPppKNUZ25RJLjEXEDq+Gsn/jmczX5HB0="}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"PresharedKey"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"LDgByqF8J/TgBI9vE+17aRNWnlJwQoD6i6xZCbwbdBk="}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"AllowedIPs"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"0.0.0.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"::/"}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"Endpoint"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"45.138.72.135:"}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"44828"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"PersistentKeepalive"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"25"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# open ports"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"allow"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"ssh"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"allow"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"44828"}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"/udp"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# net"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"allow"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"80"}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"/tcp"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"allow"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"53"}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"/udp"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-58cba8"},"children":[{"type":"text","value":"# wg"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"allow"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"10.134.99.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"24"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"any"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"port"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"80"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"allow"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"10.134.99.0/"}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"24"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"any"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"port"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"53"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"ufw"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8aa26c"},"children":[{"type":"text","value":"https"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17a0b3"},"children":[{"type":"text","value":"ss"}]},{"type":"element","tag":"span","props":{"class":"ct-c76938"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7545b1"},"children":[{"type":"text","value":"-tulpn"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"45.138.72.135/admin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://pi.hole/admin","rel":["nofollow"]},"children":[{"type":"text","value":"http://pi.hole/admin"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://dnsleak.com","rel":["nofollow"]},"children":[{"type":"text","value":"https://dnsleak.com"}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-4562fb{color:#FF7B72}\n.ct-58cba8{color:#8B949E}\n.ct-7545b1{color:#79C0FF}\n.ct-8aa26c{color:#A5D6FF}\n.ct-17a0b3{color:#FFA657}\n.ct-c76938{color:#C9D1D9}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:posts:wire-hole.md","_source":"content","_file":"posts/wire-hole.md","_extension":"md"},{"_path":"/posts/zsh-config","_dir":"posts","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Zsh установка и настройка","description":"Разбор конфига ~/.zshrc, конечный результат примерно такой. Рекомендую установить и использовать терминал urxvt о настройке которого я писал в прошлом посте.","date":"2019-07-11T00:00:00.000Z","img":"/images/posts/zsh-cfg.png","type":"post","tags":["config"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Разбор конфига "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/.zshrc"}]},{"type":"text","value":", конечный результат примерно такой. Рекомендую установить и использовать терминал urxvt о настройке которого я писал в "},{"type":"element","tag":"a","props":{"href":"/posts/urxvt-config"},"children":[{"type":"text","value":"прошлом посте"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Zsh","src":"/images/posts/zsh-cfg.png"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"установка-пакетов"},"children":[{"type":"text","value":"Установка пакетов"}]},{"type":"element","tag":"code","props":{"code":"yay -S zsh oh-my-zsh fast-syntax-highlighting zsh-autosuggestions\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ad4779"},"children":[{"type":"text","value":"yay"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e5958"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"zsh"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"oh-my-zsh"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"fast-syntax-highlighting"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"zsh-autosuggestions"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"oh-my-zsh: надстройка над zsh."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"fast-syntax-highlighting: подсветка синтаксиса."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"zsh-autosuggestions: автодополнение."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Переключение шелла на zsh: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"chsh -s /usr/bin/zsh"}]},{"type":"text","value":", обратно на bash: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"chsh -s /usr/bin/bash"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"настройка"},"children":[{"type":"text","value":"Настройка"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Мой конфиг "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".zshrc"}]},{"type":"text","value":", необходимо сохранить в домашнюю директорию "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/.zshrc"}]},{"type":"text","value":", если файл существует замените, "},{"type":"element","tag":"a","props":{"href":"https://github.com/creio/dots/blob/master/.zshrc","rel":["nofollow"]},"children":[{"type":"text","value":".zshrc"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Так как oh-my-zsh установлен через yay, то строка "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ZSH=/usr/share/oh-my-zsh/"}]},{"type":"text","value":" идет от корня, это касается и плагинов."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Тема оформления строки приветствия задается в данной строке "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ZSH_THEME=\"af-magic\""}]},{"type":"text","value":", сами темы можно "},{"type":"element","tag":"a","props":{"href":"https://github.com/robbyrussell/oh-my-zsh/wiki/Themes","rel":["nofollow"]},"children":[{"type":"text","value":"выбрать тут"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Плагинов из набора oh-my-zsh полно, но я их не использую. "},{"type":"element","tag":"a","props":{"href":"https://github.com/robbyrussell/oh-my-zsh/wiki/Plugins","rel":["nofollow"]},"children":[{"type":"text","value":"wiki/Plugins"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"plugins=(\n)\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":"plugins"}]},{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Использую только то, что установил дополнительно, путем экспорта в файл. Полный путь до .zsh файла. В зависимости от способа установки путь может отличаться, в данном случае такой."}]},{"type":"element","tag":"code","props":{"code":"source /usr/share/zsh/plugins/fast-syntax-highlighting/fast-syntax-highlighting.plugin.zsh\nsource /usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e5958"},"children":[{"type":"text","value":"source"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"/usr/share/zsh/plugins/fast-syntax-highlighting/fast-syntax-highlighting.plugin.zsh"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e5958"},"children":[{"type":"text","value":"source"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"/usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Тут задаем дерикторию кэша и условие проверки."}]},{"type":"element","tag":"code","props":{"code":"ZSH_CACHE_DIR=$HOME/.cache/oh-my-zsh\n[[ ! -d $ZSH_CACHE_DIR ]] && mkdir $ZSH_CACHE_DIR\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":"ZSH_CACHE_DIR"}]},{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":"$HOME"}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"/.cache/oh-my-zsh"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":"[[ "}]},{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"-d"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" $ZSH_CACHE_DIR ]] && "}]},{"type":"element","tag":"span","props":{"class":"ct-ad4779"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" $ZSH_CACHE_DIR"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Экспорт путей со скриптами и бинарниками."}]},{"type":"element","tag":"code","props":{"code":"export PATH=$HOME/.bin:$HOME/.bin/popup:$HOME/.local/bin:/usr/local/bin:$PATH\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" PATH"}]},{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":"$HOME"}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"/.bin:"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":"$HOME"}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"/.bin/popup:"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":"$HOME"}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"/.local/bin:/usr/local/bin:"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":"$PATH"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Экспорт различных переменных."}]},{"type":"element","tag":"code","props":{"code":"export TERM=\"rxvt-unicode\"\nexport EDITOR=\"$(if [[ -n $DISPLAY ]]; then echo 'subl3'; else echo 'nano'; fi)\"\nexport BROWSER=\"chromium\"\nexport SSH_KEY_PATH=\"~/.ssh/dsa_id\"\nexport XDG_CONFIG_HOME=\"$HOME/.config\"\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" TERM"}]},{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"\"rxvt-unicode\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" EDITOR"}]},{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"\"$(if [[ "}]},{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"-n"}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":"$DISPLAY"}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":" ]]; "}]},{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":" echo 'subl3'; "}]},{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":" echo 'nano'; fi)\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" BROWSER"}]},{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"\"chromium\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" SSH_KEY_PATH"}]},{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"\"~/.ssh/dsa_id\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" XDG_CONFIG_HOME"}]},{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":"$HOME"}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"/.config\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Условие проверки и загрузки файла. Алиасы можно и не выносить в отдельный файл, но так удобнее."}]},{"type":"element","tag":"code","props":{"code":"[[ -f ~/.alias_zsh ]] && . ~/.alias_zsh\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":"[[ "}]},{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"-f"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"~"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":"/.alias_zsh ]] && "}]},{"type":"element","tag":"span","props":{"class":"ct-0e5958"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"~/.alias_zsh"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Данный блок не обязателен, отвечает за fzf поиск."}]},{"type":"element","tag":"code","props":{"code":"[[ -e \"/usr/share/fzf/fzf-extras.zsh\" ]] && source /usr/share/fzf/fzf-extras.zsh\nexport FZF_DEFAULT_COMMAND=\"fd --type file --color=always --follow --hidden --exclude .git\"\nexport FZF_CTRL_T_COMMAND=\"$FZF_DEFAULT_COMMAND\"\n# export FZF_DEFAULT_OPTS=\"--ansi\"\nexport FZF_DEFAULT_OPTS=\"--height 50% --layout=reverse --border --preview 'file {}' --preview-window down:1\"\nexport FZF_COMPLETION_TRIGGER=\"~~\"\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":"[[ "}]},{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"-e"}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":" \"/usr/share/fzf/fzf-extras.zsh\""}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" ]] && "}]},{"type":"element","tag":"span","props":{"class":"ct-0e5958"},"children":[{"type":"text","value":"source"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"/usr/share/fzf/fzf-extras.zsh"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" FZF_DEFAULT_COMMAND"}]},{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"\"fd --type file --color=always --follow --hidden --exclude .git\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" FZF_CTRL_T_COMMAND"}]},{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":"$FZF_DEFAULT_COMMAND"}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fafea3"},"children":[{"type":"text","value":"# export FZF_DEFAULT_OPTS=\"--ansi\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" FZF_DEFAULT_OPTS"}]},{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"\"--height 50% --layout=reverse --border --preview 'file {}' --preview-window down:1\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-e380fc"},"children":[{"type":"text","value":" FZF_COMPLETION_TRIGGER"}]},{"type":"element","tag":"span","props":{"class":"ct-4d7778"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-5a6cd7"},"children":[{"type":"text","value":"\"~~\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В момент набора и появления автодополнения можно перемещаться по словам Ctrl+стрелка вправо, а просто стрелка вправо прыжок в конец подсвеченной строки. Вот собственно и все."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-fafea3{color:#8B949E}\n.ct-4d7778{color:#FF7B72}\n.ct-5a6cd7{color:#A5D6FF}\n.ct-0e5958{color:#79C0FF}\n.ct-e380fc{color:#C9D1D9}\n.ct-ad4779{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"установка-пакетов","depth":2,"text":"Установка пакетов"},{"id":"настройка","depth":2,"text":"Настройка"}]}},"_type":"markdown","_id":"content:posts:zsh-config.md","_source":"content","_file":"posts/zsh-config.md","_extension":"md"},{"_path":"/wow","_dir":"","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Сервисы и утилиты","description":"В разработке.","date":"2023-04-09T00:00:00.000Z","type":"page","draft":false,"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В разработке."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:wow.md","_source":"content","_file":"wow.md","_extension":"md"}],"navigation":[{"title":"Links","_path":"/links","children":[{"title":"Hello world","_path":"/links/bla-bla"}]},{"title":"Posts","_path":"/posts","children":[{"title":"Установка Arch Linux на зашифрованный раздел, LVM на LUKS","_path":"/posts/arch-lvm-luks"},{"title":"Ctlos Linux Bspwm v0.1.0","_path":"/posts/bspwm-0-1"},{"title":"Firewall в linux | iptables | ufw","_path":"/posts/firewall"},{"title":"Перенос форума fluxbb на discourse","_path":"/posts/fluxbb-discourse"},{"title":"Настройка автоматической загрузки фильмов с торрентов","_path":"/posts/media-server"},{"title":"Доступность веб сервера в tor и создание onion домена | Nginx tor onion","_path":"/posts/nginx-onion"},{"title":"Установка Arch Linux в Oracle Cloud","_path":"/posts/oci"},{"title":"Psiphon linux, обходим блокировку трафика","_path":"/posts/psiphon"},{"title":"Tor проксирование","_path":"/posts/tor"},{"title":"Transmission — раздача торрентов со своего сервера","_path":"/posts/transmission"},{"title":"Arch Urxvt, установка и настройка","_path":"/posts/urxvt-config"},{"title":"Как Создать и Настроить VPN сервер в Linux | Wireguard","_path":"/posts/vpn"},{"title":"Настройка и использование Nginx в Arch Linux | Docker Portainer","_path":"/posts/web-server"},{"title":"Настройка и использование weechat в linux","_path":"/posts/weechat"},{"title":"Wireguard, pihole, unbound | предотвращаем утечку dns","_path":"/posts/wire-hole"},{"title":"Zsh установка и настройка","_path":"/posts/zsh-config"}]},{"title":"Сервисы и утилиты","_path":"/wow"}]}